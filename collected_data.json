[
  {
    "url": "https://sst.dev/docs",
    "body": " <a href=\"#_top\" class=\"astro-mjgt46rb\">Skip to content</a>  <div class=\"page sl-flex astro-uiem3kpq\"> <header class=\"header astro-uiem3kpq\"><div class=\"header sl-flex astro-3ef6ksr2\"> <div class=\"sl-flex astro-3ef6ksr2\"> <a href=\"/\" class=\"site-title sl-flex astro-hmm4yru7\">  <img class=\"light:sl-hidden astro-hmm4yru7\" alt=\"\" src=\"/_astro/logo-dark.DpZ7_bWK.svg\" width=\"256\" height=\"75\"> <img class=\"dark:sl-hidden astro-hmm4yru7\" alt=\"\" src=\"/_astro/logo-light.BYAt7w5s.svg\" width=\"256\" height=\"75\"> <span class=\"sr-only astro-hmm4yru7\"> SST </span> </a>  </div> <div class=\"middle-group astro-3ef6ksr2\"> <div class=\"sl-flex astro-3ef6ksr2\"> <a class=\"links astro-kvuzbkmh\" href=\"/blog/\">Blog</a> <a class=\"links astro-kvuzbkmh\" href=\"/docs/\">Docs</a> <a class=\"links sm astro-kvuzbkmh\" href=\"/docs/examples/\">Examples</a>  </div> </div> <div class=\"sl-hidden md:sl-flex right-group astro-3ef6ksr2\"> <a class=\"stars astro-3ef6ksr2\" href=\"https://github.com/sst/sst\" target=\"_blank\"> <svg aria-hidden=\"true\" class=\"astro-3ef6ksr2 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> <span class=\"astro-3ef6ksr2\">23K</span> </a> <div class=\"button-group astro-3ef6ksr2\"> <div class=\"search-options astro-3ef6ksr2\"> <button class=\"ask-ai kapa-modal-open astro-3ef6ksr2\"> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"13\" height=\"13\" viewBox=\"0 0 256 256\" class=\"astro-3ef6ksr2\"><path fill=\"currentColor\" d=\"m197.58 129.06l-51.61-19l-19-51.65a15.92 15.92 0 0 0-29.88 0L78.07 110l-51.65 19a15.92 15.92 0 0 0 0 29.88L78 178l19 51.62a15.92 15.92 0 0 0 29.88 0l19-51.61l51.65-19a15.92 15.92 0 0 0 0-29.88ZM140.39 163a15.87 15.87 0 0 0-9.43 9.43l-19 51.46L93 172.39a15.87 15.87 0 0 0-9.39-9.39l-51.46-19l51.46-19a15.87 15.87 0 0 0 9.39-9.39l19-51.46l19 51.46a15.87 15.87 0 0 0 9.43 9.43l51.46 19ZM144 40a8 8 0 0 1 8-8h16V16a8 8 0 0 1 16 0v16h16a8 8 0 0 1 0 16h-16v16a8 8 0 0 1-16 0V48h-16a8 8 0 0 1-8-8m104 48a8 8 0 0 1-8 8h-8v8a8 8 0 0 1-16 0v-8h-8a8 8 0 0 1 0-16h8v-8a8 8 0 0 1 16 0v8h8a8 8 0 0 1 8 8\" class=\"astro-3ef6ksr2\"></path></svg>\nAI\n</button> <site-search data-translations=\"{&quot;placeholder&quot;:&quot;Search&quot;}\" class=\"astro-quwjm75j\"> <button data-open-modal=\"\" aria-label=\"Search\" aria-keyshortcuts=\"Meta+K\" class=\"astro-quwjm75j\"> <svg aria-hidden=\"true\" class=\"astro-quwjm75j astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z\"></path></svg>  <span class=\"sl-hidden md:sl-block astro-quwjm75j\" aria-hidden=\"true\">Search</span> <kbd class=\"sl-hidden md:sl-flex astro-quwjm75j\" style=\"\"> <kbd class=\"astro-quwjm75j\">⌘</kbd><kbd class=\"astro-quwjm75j\">K</kbd> </kbd> </button> <dialog style=\"padding:0\" aria-label=\"Search\" class=\"astro-quwjm75j\"> <div class=\"dialog-frame sl-flex astro-quwjm75j\">  <button data-close-modal=\"\" class=\"sl-flex md:sl-hidden astro-quwjm75j\"> Cancel </button> <div class=\"search-container astro-quwjm75j\"> <div id=\"starlight__search\" class=\"astro-quwjm75j\"></div> </div> </div> </dialog> </site-search>  <script>\n\t(() => {\n\t\tconst openBtn = document.querySelector('button[data-open-modal]');\n\t\tconst shortcut = openBtn?.querySelector('kbd');\n\t\tif (!openBtn || !(shortcut instanceof HTMLElement)) return;\n\t\tconst platformKey = shortcut.querySelector('kbd');\n\t\tif (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {\n\t\t\tplatformKey.textContent = '⌘';\n\t\t\topenBtn.setAttribute('aria-keyshortcuts', 'Meta+K');\n\t\t}\n\t\tshortcut.style.display = '';\n\t})();\n</script>    </div> <a class=\"console astro-3ef6ksr2\" target=\"_blank\" href=\"https://console.sst.dev\">\nConsole\n</a> </div> <!--\n    <ThemeSelect {...Astro.props} />\n    --> </div> </div> </header> <nav class=\"sidebar astro-uiem3kpq\" aria-label=\"Main\"> <starlight-menu-button class=\"astro-eb2pnebv\"> <button aria-expanded=\"false\" aria-label=\"Menu\" aria-controls=\"starlight__sidebar\" class=\"sl-flex md:sl-hidden astro-eb2pnebv\"> <svg aria-hidden=\"true\" class=\"astro-eb2pnebv astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z\"></path></svg>  </button> </starlight-menu-button>    <div id=\"starlight__sidebar\" class=\"sidebar-pane astro-uiem3kpq\"> <div class=\"sidebar-content sl-flex astro-uiem3kpq\"> <sl-sidebar-state-persist data-hash=\"17l2d3i\" class=\"astro-tkkz5khv\"> <script>\n\t\t(() => {\n\t\t\ttry {\n\t\t\t\tif (!matchMedia('(min-width: 50em)').matches) return;\n\t\t\t\t/** @type {HTMLElement | null} */\n\t\t\t\tconst target = document.querySelector('sl-sidebar-state-persist');\n\t\t\t\tconst state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');\n\t\t\t\tif (!target || !state || target.dataset.hash !== state.hash) return;\n\t\t\t\twindow._starlightScrollRestore = state.scroll;\n\t\t\t\tcustomElements.define(\n\t\t\t\t\t'sl-sidebar-restore',\n\t\t\t\t\tclass SidebarRestore extends HTMLElement {\n\t\t\t\t\t\tconnectedCallback() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst idx = parseInt(this.dataset.index || '');\n\t\t\t\t\t\t\t\tconst details = this.closest('details');\n\t\t\t\t\t\t\t\tif (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch {}\n\t\t})();\n\t</script>  <ul class=\"top-level astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs\" aria-current=\"page\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Intro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/workflow\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Workflow</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/enterprise\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Enterprise</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"0\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Get Started</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/bun\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bun</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nuxt\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nuxt</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/solid\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Solid</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/auth\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Auth</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/deno\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Deno</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/trpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">tRPC</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/hono\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Hono</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/astro\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Astro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/email\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Email</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/remix\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Remix</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/svelte\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Svelte</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/drizzle\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Drizzle</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/prisma\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Prisma</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nextjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Next.js</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/analog\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Analog</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nestjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">NestJS</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/angular\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Angular</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/express\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Express</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/realtime\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Realtime</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"5\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Cloudflare</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/trpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">tRPC</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/hono\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Hono</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/worker\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Worker</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"1\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Concepts</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/live\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Live</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/state\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">State</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/linking\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Linking</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/console\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Console</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/providers\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Providers</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/components\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Components</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"2\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">How to</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/aws-accounts\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AWS Accounts</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/iam-credentials\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">IAM Credentials</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/migrate-from-v2\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Migrate From v2</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/custom-domains\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Custom Domains</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/import-resources\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Import Resources</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/set-up-a-monorepo\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Set up a Monorepo</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/share-across-stages\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Share Across Stages</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference-resources\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Reference Resources</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/environment-variables\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Environment Variables</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"3\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Components</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"6\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">AWS</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/efs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Efs</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bus</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vpc</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/task\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Task</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cron\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cron</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/auth\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Auth</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/nuxt\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nuxt</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/astro\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Astro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/redis\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Redis</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/email\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Email</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/react\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">React</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/remix\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Remix</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/nextjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nextjs</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/queue\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Queue</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vector\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vector</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/aurora\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Aurora</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/router\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Router</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/analog\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Analog</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bucket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bucket</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cluster\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cluster</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/service\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Service</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dynamo\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Dynamo</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/realtime\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Realtime</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopic</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/function\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Function</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/postgres\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Postgres</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSync</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/svelte-kit\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SvelteKit</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/static-site\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">StaticSite</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/solid-start\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SolidStart</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/opencontrol\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">OpenControl</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/tan-stack-start\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">TanStackStart</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/kinesis-stream\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">KinesisStream</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-user-pool\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoUserPool</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-identity-pool\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoIdentityPool</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigateway-websocket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayWebSocket</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"9\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Internal</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cdn\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cdn</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-resolver\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncResolver</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-function\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncFunction</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bucket-notification\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BucketNotification</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-data-source\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncDataSource</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-api-key\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1ApiKey</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus-queue-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BusQueueSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-user-pool-client\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoUserPoolClient</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BusLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-url-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2UrlRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-authorizer\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1Authorizer</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-usage-plan\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1UsagePlan</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-authorizer\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2Authorizer</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/queue-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">QueueLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic-queue-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopicQueueSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dynamo-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">DynamoLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/realtime-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">RealtimeLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopicLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-lambda-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1LambdaRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-lambda-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2LambdaRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigateway-websocket-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayWebSocketRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-integration-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1IntegrationRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/kinesis-stream-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">KinesisStreamLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/providers/function-environment-update\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">FunctionEnvironmentUpdate</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"10\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Deprecated</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vpc-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vpc.v1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cluster-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cluster.v1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/postgres-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Postgres.v1</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"7\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Cloudflare</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/kv\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Kv</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/d1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">D1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/worker\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Worker</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/bucket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bucket</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"8\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Internal</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"11\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Dns</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AWS</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/vercel/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vercel</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cloudflare</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"12\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Linkable</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/binding\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">binding</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/permission\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">permission</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/all-providers\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">All Providers</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"4\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Reference</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/cli\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CLI</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/sdk\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SDK</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/global\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Global</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/config\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Config</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/secret\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Secret</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/linkable\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Linkable</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/experimental/dev-command\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">DevCommand</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/examples\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Examples</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/common-errors\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Common Errors</span>  </a> </li> </ul>   <script>\n\t\t(() => {\n\t\t\tconst scroller = document.getElementById('starlight__sidebar');\n\t\t\tif (!window._starlightScrollRestore || !scroller) return;\n\t\t\tscroller.scrollTop = window._starlightScrollRestore;\n\t\t\tdelete window._starlightScrollRestore;\n\t\t})();\n\t</script> </sl-sidebar-state-persist>  <div class=\"md:sl-hidden\"> <div class=\"mobile-nav-links astro-lbnvevm2\"> <a class=\"links astro-kvuzbkmh\" href=\"/blog/\">Blog</a> <a class=\"links astro-kvuzbkmh\" href=\"/docs/\">Docs</a> <a class=\"links sm astro-kvuzbkmh\" href=\"/docs/examples/\">Examples</a>  </div> <div class=\"mobile-preferences sl-flex astro-lbnvevm2\"> <div class=\"sl-flex social-icons astro-lbnvevm2\"> <a href=\"https://x.com/SST_dev\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">X</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M 18.242188 2.25 L 21.554688 2.25 L 14.324219 10.507812 L 22.828125 21.75 L 16.171875 21.75 L 10.953125 14.933594 L 4.992188 21.75 L 1.679688 21.75 L 9.40625 12.914062 L 1.257812 2.25 L 8.082031 2.25 L 12.792969 8.480469 Z M 17.082031 19.773438 L 18.914062 19.773438 L 7.082031 4.125 L 5.113281 4.125 Z M 17.082031 19.773438 \"></path></svg> </a><a href=\"https://sst.dev/discord\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">Discord</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z\"></path></svg> </a><a href=\"https://github.com/sst/sst\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">GitHub</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> </a> </div> <!--\n  <ThemeSelect {...Astro.props} />\n  --> </div>  </div> </div> </div> </nav> <div class=\"main-frame astro-uiem3kpq\">   <div class=\"lg:sl-flex astro-gmuhqzgb\"> <aside class=\"right-sidebar-container astro-gmuhqzgb\"> <div class=\"right-sidebar astro-gmuhqzgb\"> <div class=\"lg:sl-hidden astro-vnryqqfi\"><mobile-starlight-toc data-min-h=\"2\" data-max-h=\"3\" class=\"astro-gqxvhmbf\"><nav aria-labelledby=\"starlight__on-this-page--mobile\" class=\"astro-gqxvhmbf\"><details id=\"starlight__mobile-toc\" class=\"astro-gqxvhmbf\"><summary id=\"starlight__on-this-page--mobile\" class=\"sl-flex astro-gqxvhmbf\"><div class=\"toggle sl-flex astro-gqxvhmbf\">On this page<svg aria-hidden=\"true\" class=\"caret astro-gqxvhmbf astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg> </div><span class=\"display-current astro-gqxvhmbf\"></span></summary><div class=\"dropdown astro-gqxvhmbf\"><ul class=\"isMobile astro-iubqjzjt\" style=\"--depth: 0;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#_top\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Overview</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#components\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Components</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#infrastructure\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Infrastructure</span> </a> <ul class=\"isMobile astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#configure\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Configure</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#providers\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Providers</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#link-resources\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Link resources</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#project-structure\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Project structure</span> </a> <ul class=\"isMobile astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#drop-in-mode\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Drop-in mode</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#monorepo\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Monorepo</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cli\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">CLI</span> </a> <ul class=\"isMobile astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#dev\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Dev</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#deploy\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Deploy</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#console\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Console</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#faq\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">FAQ</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class=\"right-sidebar-panel sl-hidden lg:sl-block astro-vnryqqfi\"><div class=\"sl-container astro-vnryqqfi\"><starlight-toc data-min-h=\"2\" data-max-h=\"3\"><nav aria-labelledby=\"starlight__on-this-page\"><h2 id=\"starlight__on-this-page\">On this page</h2><ul class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#_top\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Overview</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#components\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Components</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#infrastructure\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Infrastructure</span> </a> <ul class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#configure\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Configure</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#providers\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Providers</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#link-resources\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Link resources</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#project-structure\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Project structure</span> </a> <ul class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#drop-in-mode\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Drop-in mode</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#monorepo\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Monorepo</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cli\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">CLI</span> </a> <ul class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#dev\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Dev</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <a href=\"#deploy\" class=\"astro-iubqjzjt\" style=\"--depth: 1;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 1;\">Deploy</span> </a>  </li> </ul>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#console\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Console</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#faq\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">FAQ</span> </a>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class=\"main-pane astro-gmuhqzgb\">  <main data-pagefind-body=\"\" lang=\"en\" dir=\"ltr\" class=\"astro-lydmput2\">    <div class=\"content-panel astro-4ube7caa\"> <div class=\"sl-container astro-4ube7caa\"> <h1 id=\"_top\" class=\"astro-guvttfii\">What is SST</h1><p class=\"page-description astro-guvttfii\">Build full-stack apps on your own infrastructure.</p> </div> </div>  <div class=\"content-panel astro-4ube7caa\"> <div class=\"sl-container astro-4ube7caa\"> <div class=\"sl-markdown-content\"> <p>SST is a framework that makes it easy to build modern full-stack applications on your own infrastructure.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>SST supports over 150 providers. Check out the <a href=\"/docs/all-providers#directory\">full list</a>.</p></section></aside>\n<p>What makes SST different is that your <em>entire</em> app is <strong>defined in code</strong> — in a single <code dir=\"auto\">sst.config.ts</code> file. This includes databases, buckets, queues, Stripe webhooks, or any one of <strong>150+ providers</strong>.</p>\n<p>With SST, <strong>everything is automated</strong>.</p>\n<hr>\n<h2 id=\"components\"><a href=\"#components\">Components</a></h2>\n<p>You start by defining parts of your app, <em><strong>in code</strong></em>.</p>\n<p>For example, you can add your frontend and set the domain you want to use.</p>\n<starlight-tabs class=\"astro-g7wulw6w\"> <div class=\"tablist-wrapper not-content astro-g7wulw6w\"> <ul role=\"tablist\" class=\"astro-g7wulw6w\"> <li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-24\" id=\"tab-24\" aria-selected=\"true\" tabindex=\"0\" class=\"astro-g7wulw6w\">  Next.js </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-25\" id=\"tab-25\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Remix </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-26\" id=\"tab-26\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Astro </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-27\" id=\"tab-27\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Svelte </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-28\" id=\"tab-28\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Solid </a> </li> </ul> </div> <section id=\"tab-panel-24\" aria-labelledby=\"tab-24\" role=\"tabpanel\"> <div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.j8ofn.css\"><script type=\"module\" src=\"/_astro/ec.8zarh.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-app.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Nextjs(&quot;MyWeb&quot;, {  domain: &quot;my-app.com&quot;});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-25\" aria-labelledby=\"tab-25\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Remix</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-app.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Remix(&quot;MyWeb&quot;, {  domain: &quot;my-app.com&quot;});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-26\" aria-labelledby=\"tab-26\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Astro</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-app.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Astro(&quot;MyWeb&quot;, {  domain: &quot;my-app.com&quot;});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-27\" aria-labelledby=\"tab-27\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SvelteKit</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-app.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.SvelteKit(&quot;MyWeb&quot;, {  domain: &quot;my-app.com&quot;});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-28\" aria-labelledby=\"tab-28\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SolidStart</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-app.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.SolidStart(&quot;MyWeb&quot;, {  domain: &quot;my-app.com&quot;});\"><div></div></button></div></figure></div> </section>  </starlight-tabs>  \n<p>Just like the frontend, you can configure backend features <em>in code</em>.</p>\n<p>Like your API deployed in a container. Or any Lambda functions, Postgres databases, S3 Buckets, or cron jobs.</p>\n<starlight-tabs class=\"astro-g7wulw6w\"> <div class=\"tablist-wrapper not-content astro-g7wulw6w\"> <ul role=\"tablist\" class=\"astro-g7wulw6w\"> <li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-29\" id=\"tab-29\" aria-selected=\"true\" tabindex=\"0\" class=\"astro-g7wulw6w\">  Containers </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-30\" id=\"tab-30\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Functions </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-31\" id=\"tab-31\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Postgres </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-32\" id=\"tab-32\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Bucket </a> </li><li role=\"presentation\" class=\"tab astro-g7wulw6w\"> <a role=\"tab\" href=\"#tab-panel-33\" id=\"tab-33\" aria-selected=\"false\" tabindex=\"-1\" class=\"astro-g7wulw6w\">  Cron </a> </li> </ul> </div> <section id=\"tab-panel-29\" aria-labelledby=\"tab-29\" role=\"tabpanel\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }]  }});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-30\" aria-labelledby=\"tab-30\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/lambda.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyFunction&quot;, {  handler: &quot;src/lambda.handler&quot;});\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-31\" aria-labelledby=\"tab-31\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyDatabase</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, { vpc });</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Postgres(&quot;MyDatabase&quot;, { vpc });\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-32\" aria-labelledby=\"tab-32\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Bucket(&quot;MyBucket&quot;);\"><div></div></button></div></figure></div> </section><section id=\"tab-panel-33\" aria-labelledby=\"tab-33\" role=\"tabpanel\" hidden=\"\"> <div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cron</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCronJob</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">job: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/cron.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">schedule: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">rate(1 minute)</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Cron(&quot;MyCronJob&quot;, {  job: &quot;src/cron.handler&quot;,  schedule: &quot;rate(1 minute)&quot;});\"><div></div></button></div></figure></div> </section>  </starlight-tabs>  \n<p>You can even set up your Stripe products in code.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> stripe</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Product</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyStripeProduct</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">SST Paid Plan</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">description: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">This is how SST makes money</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new stripe.Product(&quot;MyStripeProduct&quot;, {  name: &quot;SST Paid Plan&quot;,  description: &quot;This is how SST makes money&quot;,});\"><div></div></button></div></figure></div>\n<p>You can check out the full list of components in the sidebar.</p>\n<hr>\n<h2 id=\"infrastructure\"><a href=\"#infrastructure\">Infrastructure</a></h2>\n<p>The above are called <strong>Components</strong>. They are a way of defining the features of your application in code. You can define any feature of your application with them.</p>\n<p>In the above examples, they create the necessary infrastructure in your AWS account. All without using the AWS Console.</p>\n<p>Learn more about <a href=\"/docs/components/\">Components</a>.</p>\n<hr>\n<h3 id=\"configure\"><a href=\"#configure\">Configure</a></h3>\n<p>SST’s components come with sensible defaults designed to get you started. But they can also be configured completely.</p>\n<p>For example, the <code dir=\"auto\">sst.aws.Function</code> can be configured with all the common Lambda function options.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/lambda.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">3 minutes</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">memory: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">1024 MB</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyFunction&quot;, {  handler: &quot;src/lambda.handler&quot;,  timeout: &quot;3 minutes&quot;,  memory: &quot;1024 MB&quot;});\"><div></div></button></div></figure></div>\n<p>But with SST you can take it a step further and transform how the Function component creates its low level resources. For example, the Function component also creates an IAM Role. You can transform the IAM Role using the <code dir=\"auto\">transform</code> prop.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/lambda.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">transform: {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#335497\">role</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">args</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#773b98\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ({</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#e38683;--1:#9d312e\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">name</span><span style=\"--0:#e38683;--1:#9d312e\">}</span><span style=\"--0:#ECC48D;--1:#335497\">-MyRole</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyFunction&quot;, {  handler: &quot;src/lambda.handler&quot;,  transform: {    role: (args) => ({      name: `${args.name}-MyRole`    })  }});\"><div></div></button></div></figure></div>\n<p>Learn more about <a href=\"/docs/components#transforms\">transforms</a>.</p>\n<hr>\n<h3 id=\"providers\"><a href=\"#providers\">Providers</a></h3>\n<p>SST has built-in components for AWS and Cloudflare that make these services easier to use.</p>\n<aside aria-label=\"Watch a video about providers in SST\" class=\"starlight-aside starlight-aside--tip custom-aside-video\"> <p class=\"starlight-aside__title\" aria-hidden=\"true\"> <svg aria-hidden=\"true\" class=\"starlight-aside__icon astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z\"></path></svg>  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://youtu.be/rlR2f5N9mW4\"> Watch a video about providers in SST <svg aria-hidden=\"true\" class=\" astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </a> </p> </aside>\n<p>However it also supports components from any one of the <strong>150+ Pulumi/Terraform providers</strong>. For example, you can use Vercel for your frontends.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> vercel</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Project</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFrontend</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">my-nextjs-app</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new vercel.Project(&quot;MyFrontend&quot;, {  name: &quot;my-nextjs-app&quot;});\"><div></div></button></div></figure></div>\n<p>Learn more about <a href=\"/docs/providers\">Providers</a> and check out the full list in the <a href=\"/docs/all-providers#directory\">Directory</a>.</p>\n<hr>\n<h2 id=\"link-resources\"><a href=\"#link-resources\">Link resources</a></h2>\n<p>Once you’ve added a couple of features, SST can help you link them together. This is great because you <strong>won’t need to hardcode</strong> anything in your app.</p>\n<aside aria-label=\"Watch a video on linking resources\" class=\"starlight-aside starlight-aside--tip custom-aside-video\"> <p class=\"starlight-aside__title\" aria-hidden=\"true\"> <svg aria-hidden=\"true\" class=\"starlight-aside__icon astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z\"></path></svg>  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://youtu.be/s8cWklU4Akw\"> Watch a video on linking resources <svg aria-hidden=\"true\" class=\" astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </a> </p> </aside>\n<p>Let’s say you are deploying an Express app in a container and you want to upload files to an S3 bucket. You can <code dir=\"auto\">link</code> the bucket to your container.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [bucket],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [bucket],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }]  }});\"><div></div></button></div></figure></div>\n<p>You can then use SST’s <a href=\"/docs/reference/sdk/\">SDK</a> to access the S3 bucket in your Express app.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.mjs</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { Resource } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><mark><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyBucket</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">name</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import { Resource } from &quot;sst&quot;;console.log(Resource.MyBucket.name);\"><div></div></button></div></figure></div>\n<p>Learn more about <a href=\"/docs/linking/\">resource linking</a>.</p>\n<hr>\n<h2 id=\"project-structure\"><a href=\"#project-structure\">Project structure</a></h2>\n<p>We’ve looked at a couple of different types of files. Let’s take a step back and see what an SST app looks like in practice.</p>\n<aside aria-label=\"Watch a video about SST's project structure\" class=\"starlight-aside starlight-aside--tip custom-aside-video\"> <p class=\"starlight-aside__title\" aria-hidden=\"true\"> <svg aria-hidden=\"true\" class=\"starlight-aside__icon astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z\"></path></svg>  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://youtu.be/mserRA-CWRw\"> Watch a video about SST's project structure <svg aria-hidden=\"true\" class=\" astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </a> </p> </aside>\n<hr>\n<h3 id=\"drop-in-mode\"><a href=\"#drop-in-mode\">Drop-in mode</a></h3>\n<p>The simplest way to run SST is to use it as a part of your app. This is called <em>drop-in mode</em>. For example, if you are building a Next.js app, you can add a <code dir=\"auto\">sst.config.ts</code> file to the root.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"txt\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">my-nextjs-app</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ next.config.js</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ sst.config.ts</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ package.json</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ app</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ lib</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">└─ public</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"my-nextjs-app├─ next.config.js├─ sst.config.ts├─ package.json├─ app├─ lib└─ public\"><div></div></button></div></figure></div>\n<p>View an <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nextjs\">example Next.js</a> app using SST in drop-in mode.</p>\n<hr>\n<h3 id=\"monorepo\"><a href=\"#monorepo\">Monorepo</a></h3>\n<p>Alternatively, you might use SST in a monorepo. This is useful because most projects have a frontend, a backend, and some functions.</p>\n<p>In this case, the <code dir=\"auto\">sst.config.ts</code> is still in the root but you can split it up into parts in the <code dir=\"auto\">infra/</code> directory.</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"txt\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">my-sst-app</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ sst.config.ts</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ package.json</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">├─ packages</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">│&nbsp;&nbsp;├─ functions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">│&nbsp;&nbsp;├─ frontend</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">│&nbsp;&nbsp;├─ backend</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">│&nbsp;&nbsp;└─ core</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">└─ infra</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"my-sst-app├─ sst.config.ts├─ package.json├─ packages│&nbsp;&nbsp;├─ functions│&nbsp;&nbsp;├─ frontend│&nbsp;&nbsp;├─ backend│&nbsp;&nbsp;└─ core└─ infra\"><div></div></button></div></figure></div>\n<p>Learn more about our <a href=\"/docs/set-up-a-monorepo/\">monorepo setup</a>.</p>\n<hr>\n<h2 id=\"cli\"><a href=\"#cli\">CLI</a></h2>\n<p>To make this all work, SST comes with a <a href=\"/docs/reference/cli/\">CLI</a>. You can install it as a part of your Node project.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm install sst\"><div></div></button></div></figure></div>\n<p>Or if you are not using Node, you can install it globally.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">curl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-fsSL</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">https://sst.dev/install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">|</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bash</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"curl -fsSL https://sst.dev/install | bash\"><div></div></button></div></figure></div>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>SST currently supports <strong>macOS, Linux, and WSL</strong>. Support for Windows is on the roadmap.</p></section></aside>\n<p>The CLI currently supports macOS, Linux, and WSL. Learn more about the <a href=\"/docs/reference/cli/\">CLI</a>.</p>\n<hr>\n<h3 id=\"dev\"><a href=\"#dev\">Dev</a></h3>\n<p>The CLI includes a <code dir=\"auto\">dev</code> command that starts a local development environment.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst dev\"><div></div></button></div></figure></div>\n<p>This brings up a <em>multiplexer</em> that:</p>\n<ol>\n<li>Starts a watcher that deploys any infrastructure changes.</li>\n<li>Runs your functions <a href=\"/docs/live/\"><em>Live</em></a>, letting you make and test changes without having to redeploy them.</li>\n<li>Creates a <a href=\"/docs/reference/cli#tunnel\"><em>tunnel</em></a> to connect your local machine to any resources in a VPC.</li>\n<li>Starts your frontend and container services in dev mode and links it to your infrastructure.</li>\n</ol>\n<aside aria-label=\"Watch a video about dev mode\" class=\"starlight-aside starlight-aside--tip custom-aside-video\"> <p class=\"starlight-aside__title\" aria-hidden=\"true\"> <svg aria-hidden=\"true\" class=\"starlight-aside__icon astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M23.5 6.2A3 3 0 0 0 21.4 4c-1.9-.5-9.4-.5-9.4-.5s-7.5 0-9.4.5A3 3 0 0 0 .5 6.3C0 8 0 12 0 12s0 4 .5 5.8A3 3 0 0 0 2.6 20c1.9.6 9.4.6 9.4.6s7.5 0 9.4-.6a3 3 0 0 0 2.1-2c.5-2 .5-5.9.5-5.9s0-4-.5-5.8zm-14 9.4V8.4l6.3 3.6-6.3 3.6z\"></path></svg>  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://youtu.be/mefLc137EB0\"> Watch a video about dev mode <svg aria-hidden=\"true\" class=\" astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </a> </p> </aside>\n<p>The <code dir=\"auto\">sst dev</code> CLI makes it so that you won’t have to start your frontend or container applications separately. Learn more about <a href=\"/docs/reference/cli/#dev\"><code dir=\"auto\">sst dev</code></a>.</p>\n<hr>\n<h3 id=\"deploy\"><a href=\"#deploy\">Deploy</a></h3>\n<p>When you’re ready to deploy your app, you can use the <code dir=\"auto\">deploy</code> command.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">deploy</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">production</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst deploy --stage production\"><div></div></button></div></figure></div>\n<hr>\n<h4 id=\"stages\"><a href=\"#stages\">Stages</a></h4>\n<p>The stage name is used to namespace different environments of your app. So you can create one for dev.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">deploy</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst deploy --stage dev\"><div></div></button></div></figure></div>\n<p>Or for a pull request.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">deploy</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">pr-123</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst deploy --stage pr-123\"><div></div></button></div></figure></div>\n<p>Learn more about <a href=\"/docs/reference/cli#stage\">stages</a>.</p>\n<hr>\n<h2 id=\"console\"><a href=\"#console\">Console</a></h2>\n<p>Once you are ready to go to production, you can use the <a href=\"/docs/console/\">SST Console</a> to <strong>auto-deploy</strong> your app, create <strong>preview environments</strong>, and <strong>monitor</strong> for any issues.</p>\n<p><img src=\"/_astro/sst-console-home.-pMOaf_T_2f9BxE.webp\" alt=\"SST Console\" width=\"2720\" height=\"1782\" loading=\"lazy\" decoding=\"async\"></p>\n<p>Learn more about the <a href=\"/docs/console/\">Console</a>.</p>\n<hr>\n<h2 id=\"faq\"><a href=\"#faq\">FAQ</a></h2>\n<p>Here are some questions that we frequently get.</p>\n<hr>\n<p><strong>Is SST open-source if it’s based on Pulumi and Terraform?</strong></p>\n<p>SST uses Pulumi behind the scenes for the providers and the deployment engine. And Terraform’s providers are <em>bridged</em> through Pulumi.</p>\n<p>SST only relies on the open-source parts of Pulumi and Terraform. It does not require a Pulumi account and all the data about your app and its resources stay on your side.</p>\n<hr>\n<p><strong>How does SST compare to CDK for Terraform or Pulumi?</strong></p>\n<p>Both CDKTF and Pulumi allow you to define your infrastructure using a programming language like TypeScript. SST is also built on top of Pulumi. So you might wonder how SST compares to them and why you would use SST instead of them.</p>\n<p>In a nutshell, SST is for developers, while CDKTF and Pulumi are primarily for DevOps engineers. There are 3 big things SST does for developers:</p>\n<ol>\n<li>\n<p>Higher-level components</p>\n<p>SST’s built-in components like <a href=\"/docs/component/aws/nextjs/\"><code dir=\"auto\">Nextjs</code></a> or <a href=\"/docs/component/aws/email/\"><code dir=\"auto\">Email</code></a> make it easy for developers to add features to their app. You can use these without having to figure out how to work with the underlying Terraform resources.</p>\n</li>\n<li>\n<p>Linking resources</p>\n<p>SST makes it easy to link your infrastructure to your application and access them at runtime in your code.</p>\n</li>\n<li>\n<p>Dev mode</p>\n<p>Finally, SST features a unified local developer environment that deploys your app through a watcher, runs your functions <a href=\"/docs/live/\"><em>Live</em></a>, creates a <a href=\"/docs/reference/cli#tunnel\"><em>tunnel</em></a> to your VPC, starts your frontend and backend, all together.</p>\n</li>\n</ol>\n<hr>\n<p><strong>How does SST make money?</strong></p>\n<p>While SST is open-source and free to use, we also have the <a href=\"/docs/console/\">Console</a> that can auto-deploy your apps and monitor for any issues. It’s optional and includes a free tier but it’s a SaaS service. It’s used by a large number of teams in our community, including ours.</p>\n<hr>\n<h4 id=\"next-steps\"><a href=\"#next-steps\">Next steps</a></h4>\n<ol>\n<li><a href=\"/docs/workflow/\">Learn about the SST workflow</a></li>\n<li>Create your first SST app\n<ul>\n<li><a href=\"/docs/start/aws/nextjs/\">Build a Next.js app in AWS</a></li>\n<li><a href=\"/docs/start/aws/bun/\">Deploy Bun in a container to AWS</a></li>\n<li><a href=\"/docs/start/cloudflare/hono/\">Build a Hono API with Cloudflare Workers</a></li>\n</ul>\n</li>\n</ol> </div> <footer class=\"doc astro-sz7xmlte\"><div class=\"meta sl-flex astro-sz7xmlte\"><div class=\"astro-sz7xmlte\"><a href=\"https://github.com/sst/sst/edit/dev/www/src/content/docs/docs/index.mdx\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z\"></path></svg> \nEdit this page\n</a><a href=\"https://x.com/SST_dev\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M 18.242188 2.25 L 21.554688 2.25 L 14.324219 10.507812 L 22.828125 21.75 L 16.171875 21.75 L 10.953125 14.933594 L 4.992188 21.75 L 1.679688 21.75 L 9.40625 12.914062 L 1.257812 2.25 L 8.082031 2.25 L 12.792969 8.480469 Z M 17.082031 19.773438 L 18.914062 19.773438 L 7.082031 4.125 L 5.113281 4.125 Z M 17.082031 19.773438 \"></path></svg> \nFollow us on X.com\n</a><a href=\"https://github.com/sst/sst/issues/new\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> \nFind a bug? Open an issue\n</a><a href=\"https://sst.dev/discord\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z\"></path></svg> \nJoin our Discord community\n</a></div><div class=\"astro-sz7xmlte\"><p class=\"astro-sz7xmlte\">\nBuilt with <a target=\"_blank\" href=\"https://github.com/sst/sst/tree/dev/www/sst.config.ts\" class=\"astro-sz7xmlte\">Astro &amp; SST</a></p><p class=\"astro-sz7xmlte\">\nLast updated — <time datetime=\"2025-02-12T19:48:59.000Z\" class=\"astro-sz7xmlte\">Feb 12, 2025</time></p><p class=\"astro-sz7xmlte\">\n© 2025&nbsp;<a target=\"_blank\" href=\"https://anoma.ly\" class=\"astro-sz7xmlte\">Anomaly Innovations</a></p></div></div></footer> </div> </div>   </main> </div> </div>  </div> </div>  <div id=\"kapa-widget-container\"></div>"
  },
  {
    "url": "https://sst.dev/docs/examples",
    "body": " <a href=\"#_top\" class=\"astro-mjgt46rb\">Skip to content</a>  <div class=\"page sl-flex astro-uiem3kpq\"> <header class=\"header astro-uiem3kpq\"><div class=\"header sl-flex astro-3ef6ksr2\"> <div class=\"sl-flex astro-3ef6ksr2\"> <a href=\"/\" class=\"site-title sl-flex astro-hmm4yru7\">  <img class=\"light:sl-hidden astro-hmm4yru7\" alt=\"\" src=\"/_astro/logo-dark.DpZ7_bWK.svg\" width=\"256\" height=\"75\"> <img class=\"dark:sl-hidden astro-hmm4yru7\" alt=\"\" src=\"/_astro/logo-light.BYAt7w5s.svg\" width=\"256\" height=\"75\"> <span class=\"sr-only astro-hmm4yru7\"> SST </span> </a>  </div> <div class=\"middle-group astro-3ef6ksr2\"> <div class=\"sl-flex astro-3ef6ksr2\"> <a class=\"links astro-kvuzbkmh\" href=\"/blog/\">Blog</a> <a class=\"links astro-kvuzbkmh\" href=\"/docs/\">Docs</a> <a class=\"links sm astro-kvuzbkmh\" href=\"/docs/examples/\">Examples</a>  </div> </div> <div class=\"sl-hidden md:sl-flex right-group astro-3ef6ksr2\"> <a class=\"stars astro-3ef6ksr2\" href=\"https://github.com/sst/sst\" target=\"_blank\"> <svg aria-hidden=\"true\" class=\"astro-3ef6ksr2 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> <span class=\"astro-3ef6ksr2\">23K</span> </a> <div class=\"button-group astro-3ef6ksr2\"> <div class=\"search-options astro-3ef6ksr2\"> <button class=\"ask-ai kapa-modal-open astro-3ef6ksr2\"> <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"13\" height=\"13\" viewBox=\"0 0 256 256\" class=\"astro-3ef6ksr2\"><path fill=\"currentColor\" d=\"m197.58 129.06l-51.61-19l-19-51.65a15.92 15.92 0 0 0-29.88 0L78.07 110l-51.65 19a15.92 15.92 0 0 0 0 29.88L78 178l19 51.62a15.92 15.92 0 0 0 29.88 0l19-51.61l51.65-19a15.92 15.92 0 0 0 0-29.88ZM140.39 163a15.87 15.87 0 0 0-9.43 9.43l-19 51.46L93 172.39a15.87 15.87 0 0 0-9.39-9.39l-51.46-19l51.46-19a15.87 15.87 0 0 0 9.39-9.39l19-51.46l19 51.46a15.87 15.87 0 0 0 9.43 9.43l51.46 19ZM144 40a8 8 0 0 1 8-8h16V16a8 8 0 0 1 16 0v16h16a8 8 0 0 1 0 16h-16v16a8 8 0 0 1-16 0V48h-16a8 8 0 0 1-8-8m104 48a8 8 0 0 1-8 8h-8v8a8 8 0 0 1-16 0v-8h-8a8 8 0 0 1 0-16h8v-8a8 8 0 0 1 16 0v8h8a8 8 0 0 1 8 8\" class=\"astro-3ef6ksr2\"></path></svg>\nAI\n</button> <site-search data-translations=\"{&quot;placeholder&quot;:&quot;Search&quot;}\" class=\"astro-quwjm75j\"> <button data-open-modal=\"\" aria-label=\"Search\" aria-keyshortcuts=\"Meta+K\" class=\"astro-quwjm75j\"> <svg aria-hidden=\"true\" class=\"astro-quwjm75j astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z\"></path></svg>  <span class=\"sl-hidden md:sl-block astro-quwjm75j\" aria-hidden=\"true\">Search</span> <kbd class=\"sl-hidden md:sl-flex astro-quwjm75j\" style=\"\"> <kbd class=\"astro-quwjm75j\">⌘</kbd><kbd class=\"astro-quwjm75j\">K</kbd> </kbd> </button> <dialog style=\"padding:0\" aria-label=\"Search\" class=\"astro-quwjm75j\"> <div class=\"dialog-frame sl-flex astro-quwjm75j\">  <button data-close-modal=\"\" class=\"sl-flex md:sl-hidden astro-quwjm75j\"> Cancel </button> <div class=\"search-container astro-quwjm75j\"> <div id=\"starlight__search\" class=\"astro-quwjm75j\"></div> </div> </div> </dialog> </site-search>  <script>\n\t(() => {\n\t\tconst openBtn = document.querySelector('button[data-open-modal]');\n\t\tconst shortcut = openBtn?.querySelector('kbd');\n\t\tif (!openBtn || !(shortcut instanceof HTMLElement)) return;\n\t\tconst platformKey = shortcut.querySelector('kbd');\n\t\tif (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {\n\t\t\tplatformKey.textContent = '⌘';\n\t\t\topenBtn.setAttribute('aria-keyshortcuts', 'Meta+K');\n\t\t}\n\t\tshortcut.style.display = '';\n\t})();\n</script>    </div> <a class=\"console astro-3ef6ksr2\" target=\"_blank\" href=\"https://console.sst.dev\">\nConsole\n</a> </div> <!--\n    <ThemeSelect {...Astro.props} />\n    --> </div> </div> </header> <nav class=\"sidebar astro-uiem3kpq\" aria-label=\"Main\"> <starlight-menu-button class=\"astro-eb2pnebv\"> <button aria-expanded=\"false\" aria-label=\"Menu\" aria-controls=\"starlight__sidebar\" class=\"sl-flex md:sl-hidden astro-eb2pnebv\"> <svg aria-hidden=\"true\" class=\"astro-eb2pnebv astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z\"></path></svg>  </button> </starlight-menu-button>    <div id=\"starlight__sidebar\" class=\"sidebar-pane astro-uiem3kpq\"> <div class=\"sidebar-content sl-flex astro-uiem3kpq\"> <sl-sidebar-state-persist data-hash=\"17l2d3i\" class=\"astro-tkkz5khv\"> <script>\n\t\t(() => {\n\t\t\ttry {\n\t\t\t\tif (!matchMedia('(min-width: 50em)').matches) return;\n\t\t\t\t/** @type {HTMLElement | null} */\n\t\t\t\tconst target = document.querySelector('sl-sidebar-state-persist');\n\t\t\t\tconst state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');\n\t\t\t\tif (!target || !state || target.dataset.hash !== state.hash) return;\n\t\t\t\twindow._starlightScrollRestore = state.scroll;\n\t\t\t\tcustomElements.define(\n\t\t\t\t\t'sl-sidebar-restore',\n\t\t\t\t\tclass SidebarRestore extends HTMLElement {\n\t\t\t\t\t\tconnectedCallback() {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst idx = parseInt(this.dataset.index || '');\n\t\t\t\t\t\t\t\tconst details = this.closest('details');\n\t\t\t\t\t\t\t\tif (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];\n\t\t\t\t\t\t\t} catch {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch {}\n\t\t})();\n\t</script>  <ul class=\"top-level astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Intro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/workflow\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Workflow</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/enterprise\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Enterprise</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"0\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Get Started</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/bun\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bun</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nuxt\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nuxt</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/solid\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Solid</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/auth\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Auth</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/deno\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Deno</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/trpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">tRPC</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/hono\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Hono</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/astro\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Astro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/email\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Email</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/remix\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Remix</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/svelte\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Svelte</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/drizzle\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Drizzle</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/prisma\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Prisma</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nextjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Next.js</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/analog\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Analog</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/nestjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">NestJS</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/angular\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Angular</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/express\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Express</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/aws/realtime\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Realtime</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"5\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Cloudflare</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/trpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">tRPC</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/hono\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Hono</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/start/cloudflare/worker\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Worker</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"1\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Concepts</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/live\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Live</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/state\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">State</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/linking\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Linking</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/console\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Console</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/providers\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Providers</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/components\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Components</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"2\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">How to</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/aws-accounts\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AWS Accounts</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/iam-credentials\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">IAM Credentials</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/migrate-from-v2\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Migrate From v2</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/custom-domains\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Custom Domains</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/import-resources\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Import Resources</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/set-up-a-monorepo\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Set up a Monorepo</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/share-across-stages\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Share Across Stages</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference-resources\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Reference Resources</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/environment-variables\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Environment Variables</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"3\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Components</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"6\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">AWS</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/efs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Efs</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bus</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vpc\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vpc</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/task\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Task</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cron\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cron</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/auth\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Auth</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/nuxt\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nuxt</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/astro\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Astro</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/redis\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Redis</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/email\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Email</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/react\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">React</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/remix\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Remix</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/nextjs\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Nextjs</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/queue\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Queue</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vector\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vector</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/aurora\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Aurora</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/router\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Router</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/analog\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Analog</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bucket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bucket</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cluster\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cluster</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/service\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Service</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dynamo\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Dynamo</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/realtime\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Realtime</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopic</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/function\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Function</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/postgres\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Postgres</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSync</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/svelte-kit\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SvelteKit</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/static-site\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">StaticSite</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/solid-start\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SolidStart</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/opencontrol\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">OpenControl</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/tan-stack-start\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">TanStackStart</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/kinesis-stream\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">KinesisStream</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-user-pool\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoUserPool</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-identity-pool\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoIdentityPool</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigateway-websocket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayWebSocket</span>  </a> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"9\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Internal</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cdn\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cdn</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-resolver\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncResolver</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-function\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncFunction</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bucket-notification\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BucketNotification</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/app-sync-data-source\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AppSyncDataSource</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-api-key\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1ApiKey</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus-queue-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BusQueueSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cognito-user-pool-client\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CognitoUserPoolClient</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/bus-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">BusLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-url-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2UrlRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-authorizer\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1Authorizer</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-usage-plan\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1UsagePlan</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-authorizer\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2Authorizer</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/queue-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">QueueLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic-queue-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopicQueueSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dynamo-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">DynamoLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/realtime-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">RealtimeLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/sns-topic-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SnsTopicLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-lambda-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1LambdaRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv2-lambda-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV2LambdaRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigateway-websocket-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayWebSocketRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/apigatewayv1-integration-route\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">ApiGatewayV1IntegrationRoute</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/kinesis-stream-lambda-subscriber\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">KinesisStreamLambdaSubscriber</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/providers/function-environment-update\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">FunctionEnvironmentUpdate</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"10\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Deprecated</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/vpc-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vpc.v1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/cluster-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cluster.v1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/postgres-v1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Postgres.v1</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"7\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Cloudflare</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/kv\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Kv</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/d1\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">D1</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/worker\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Worker</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/bucket\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Bucket</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"8\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Internal</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"11\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Dns</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">AWS</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/vercel/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Vercel</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/dns\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Cloudflare</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details open=\"\" class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"12\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Linkable</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/cloudflare/binding\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">binding</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/aws/permission\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">permission</span>  </a> </li> </ul>  </details> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/all-providers\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">All Providers</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <details class=\"astro-hwfqbuck\"> <sl-sidebar-restore data-index=\"4\"></sl-sidebar-restore> <summary class=\"astro-hwfqbuck\"> <div class=\"group-label astro-hwfqbuck\"> <span class=\"large astro-hwfqbuck\">Reference</span>  </div> <svg aria-hidden=\"true\" class=\"caret astro-hwfqbuck astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1.25rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg>  </summary> <ul class=\"astro-hwfqbuck\"> <li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/cli\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">CLI</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/sdk\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">SDK</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/global\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Global</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/reference/config\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Config</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/secret\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Secret</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/linkable\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Linkable</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/component/experimental/dev-command\" class=\"astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">DevCommand</span>  </a> </li> </ul>  </details> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/examples\" aria-current=\"page\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Examples</span>  </a> </li><li class=\"astro-hwfqbuck\"> <a href=\"/docs/common-errors\" class=\"large astro-hwfqbuck\"> <span class=\"astro-hwfqbuck\">Common Errors</span>  </a> </li> </ul>   <script>\n\t\t(() => {\n\t\t\tconst scroller = document.getElementById('starlight__sidebar');\n\t\t\tif (!window._starlightScrollRestore || !scroller) return;\n\t\t\tscroller.scrollTop = window._starlightScrollRestore;\n\t\t\tdelete window._starlightScrollRestore;\n\t\t})();\n\t</script> </sl-sidebar-state-persist>  <div class=\"md:sl-hidden\"> <div class=\"mobile-nav-links astro-lbnvevm2\"> <a class=\"links astro-kvuzbkmh\" href=\"/blog/\">Blog</a> <a class=\"links astro-kvuzbkmh\" href=\"/docs/\">Docs</a> <a class=\"links sm astro-kvuzbkmh\" href=\"/docs/examples/\">Examples</a>  </div> <div class=\"mobile-preferences sl-flex astro-lbnvevm2\"> <div class=\"sl-flex social-icons astro-lbnvevm2\"> <a href=\"https://x.com/SST_dev\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">X</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M 18.242188 2.25 L 21.554688 2.25 L 14.324219 10.507812 L 22.828125 21.75 L 16.171875 21.75 L 10.953125 14.933594 L 4.992188 21.75 L 1.679688 21.75 L 9.40625 12.914062 L 1.257812 2.25 L 8.082031 2.25 L 12.792969 8.480469 Z M 17.082031 19.773438 L 18.914062 19.773438 L 7.082031 4.125 L 5.113281 4.125 Z M 17.082031 19.773438 \"></path></svg> </a><a href=\"https://sst.dev/discord\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">Discord</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z\"></path></svg> </a><a href=\"https://github.com/sst/sst\" rel=\"me\" class=\"sl-flex astro-cxieozi7\"><span class=\"sr-only astro-cxieozi7\">GitHub</span><svg aria-hidden=\"true\" class=\"astro-cxieozi7 astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> </a> </div> <!--\n  <ThemeSelect {...Astro.props} />\n  --> </div>  </div> </div> </div> </nav> <div class=\"main-frame astro-uiem3kpq\">   <div class=\"lg:sl-flex astro-gmuhqzgb\"> <aside class=\"right-sidebar-container astro-gmuhqzgb\"> <div class=\"right-sidebar astro-gmuhqzgb\"> <div class=\"lg:sl-hidden astro-vnryqqfi\"><mobile-starlight-toc data-min-h=\"2\" data-max-h=\"3\" class=\"astro-gqxvhmbf\"><nav aria-labelledby=\"starlight__on-this-page--mobile\" class=\"astro-gqxvhmbf\"><details id=\"starlight__mobile-toc\" class=\"astro-gqxvhmbf\"><summary id=\"starlight__on-this-page--mobile\" class=\"sl-flex astro-gqxvhmbf\"><div class=\"toggle sl-flex astro-gqxvhmbf\">On this page<svg aria-hidden=\"true\" class=\"caret astro-gqxvhmbf astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1rem;\"><path d=\"m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z\"></path></svg> </div><span class=\"display-current astro-gqxvhmbf\"></span></summary><div class=\"dropdown astro-gqxvhmbf\"><ul class=\"isMobile astro-iubqjzjt\" style=\"--depth: 0;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#_top\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Overview</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#api-gateway-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">API Gateway auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-astro-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Astro container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-astro-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Astro streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-mysql\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora MySQL</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-postgres\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora Postgres</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-openauth-react-spa\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS OpenAuth React SPA</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-policy\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket policy</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-queue-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket queue notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-topic-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket topic notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-bun-elysia-container\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Bun Elysia container</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-bun-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Bun Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-private-service\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster private service</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-spot-capacity\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster Spot capacity</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-with-api-gateway\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster with API Gateway</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-queues\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-deno-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Deno Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#dynamodb-streams\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">DynamoDB streams</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#ec2-with-pulumi\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">EC2 with Pulumi</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs-with-sqlite\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS with SQLite</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs-with-surrealdb\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS with SurrealDB</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-express-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Express Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#ffmpeg-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">FFmpeg in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-apigatewayv2-go\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS ApiGatewayV2 Go</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go-s3-presigned\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go S3 Presigned</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go-dynamodb\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go DynamoDB</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-hono-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Hono container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-hono-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Hono streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#iam-permissions-boundaries\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">IAM permissions boundaries</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#current-aws-account\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Current AWS account</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-jsx-email\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS JSX Email</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#kinesis-streams\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Kinesis streams</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-retry-with-queues\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda retry with queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-in-a-vpc\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda in a VPC</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-multi-region\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS multi-region</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nestjs-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS NestJS with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-add-behavior\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js add behavior</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-basic-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js basic auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-postgres-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Postgres local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#prisma-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Prisma in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#puppeteer-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Puppeteer in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-queues-1\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-redis-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Redis local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-remix-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Remix container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-remix-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Remix streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#router-and-bucket\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Router and bucket</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#router-and-function-url\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Router and function URL</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-service-discovery\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster Service Discovery</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#sharp-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Sharp in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-solidstart-websocket-endpoint\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS SolidStart WebSocket endpoint</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-static-site-basic-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS static site basic auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-static-site\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS static site</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-sveltekit-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS SvelteKit container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#swift-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Swift in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#t3-stack-in-aws\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">T3 Stack in AWS</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-task-cron\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Task Cron</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-task\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Task</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-topics\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to topics</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#vector-search\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Vector search</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#react-spa-with-vite\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">React SPA with Vite</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cloudflare-cron\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Cloudflare Cron</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cloudflare-kv\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Cloudflare KV</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#link-multiple-secrets\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Link multiple secrets</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#default-function-props\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Default function props</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#vercel-domains\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Vercel domains</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class=\"right-sidebar-panel sl-hidden lg:sl-block astro-vnryqqfi\"><div class=\"sl-container astro-vnryqqfi\"><starlight-toc data-min-h=\"2\" data-max-h=\"3\"><nav aria-labelledby=\"starlight__on-this-page\"><h2 id=\"starlight__on-this-page\">On this page</h2><ul class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#_top\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Overview</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#api-gateway-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">API Gateway auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-astro-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Astro container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-astro-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Astro streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-mysql\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora MySQL</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-aurora-postgres\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Aurora Postgres</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-openauth-react-spa\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS OpenAuth React SPA</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-policy\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket policy</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-queue-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket queue notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#bucket-topic-notifications\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Bucket topic notifications</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-bun-elysia-container\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Bun Elysia container</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-bun-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Bun Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-private-service\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster private service</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-spot-capacity\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster Spot capacity</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-with-api-gateway\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster with API Gateway</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-queues\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-deno-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Deno Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#dynamodb-streams\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">DynamoDB streams</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#ec2-with-pulumi\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">EC2 with Pulumi</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs-with-sqlite\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS with SQLite</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs-with-surrealdb\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS with SurrealDB</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-efs\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS EFS</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-express-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Express Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#ffmpeg-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">FFmpeg in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-apigatewayv2-go\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS ApiGatewayV2 Go</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go-s3-presigned\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go S3 Presigned</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go-dynamodb\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go DynamoDB</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-hono-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Hono container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-hono-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Hono streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#iam-permissions-boundaries\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">IAM permissions boundaries</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#current-aws-account\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Current AWS account</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-jsx-email\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS JSX Email</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#kinesis-streams\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Kinesis streams</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-go\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda Go</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-retry-with-queues\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda retry with queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-lambda-in-a-vpc\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Lambda in a VPC</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-multi-region\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS multi-region</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nestjs-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS NestJS with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-add-behavior\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js add behavior</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-basic-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js basic auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-nextjs-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Next.js streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-postgres-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Postgres local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#prisma-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Prisma in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#puppeteer-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Puppeteer in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-queues-1\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to queues</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-redis-local\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Redis local</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-remix-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Remix container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-remix-streaming\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Remix streaming</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#router-and-bucket\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Router and bucket</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#router-and-function-url\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Router and function URL</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-cluster-service-discovery\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Cluster Service Discovery</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#sharp-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Sharp in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-solidstart-websocket-endpoint\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS SolidStart WebSocket endpoint</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-static-site-basic-auth\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS static site basic auth</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-static-site\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS static site</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-sveltekit-container-with-redis\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS SvelteKit container with Redis</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#swift-in-lambda\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Swift in Lambda</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#t3-stack-in-aws\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">T3 Stack in AWS</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-task-cron\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Task Cron</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#aws-task\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">AWS Task</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#subscribe-to-topics\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Subscribe to topics</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#vector-search\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Vector search</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#react-spa-with-vite\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">React SPA with Vite</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cloudflare-cron\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Cloudflare Cron</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#cloudflare-kv\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Cloudflare KV</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#link-multiple-secrets\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Link multiple secrets</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#default-function-props\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Default function props</span> </a>  </li><li class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <a href=\"#vercel-domains\" class=\"astro-iubqjzjt\" style=\"--depth: 0;\"> <span class=\"astro-iubqjzjt\" style=\"--depth: 0;\">Vercel domains</span> </a>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class=\"main-pane astro-gmuhqzgb\">  <main data-pagefind-body=\"\" lang=\"en\" dir=\"ltr\" class=\"astro-lydmput2\">    <div class=\"content-panel astro-4ube7caa\"> <div class=\"sl-container astro-4ube7caa\"> <h1 id=\"_top\" class=\"astro-guvttfii\">Examples</h1><p class=\"page-description astro-guvttfii\">A collection of example apps for reference.</p> </div> </div>  <div class=\"content-panel astro-4ube7caa\"> <div class=\"sl-container astro-4ube7caa\"> <div class=\"sl-markdown-content\"> \n\n<p>Below is a collection of example SST apps. These are available in the <a href=\"https://github.com/sst/sst/tree/dev/examples\"><code dir=\"auto\">examples/</code></a> directory of the repo.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>This doc is best viewed through the site search or through the <em>AI</em>.</p></section></aside>\n<p>The descriptions for these examples are generated using the comments in the <code dir=\"auto\">sst.config.ts</code> of the app.</p>\n<h4 id=\"contributing\"><a href=\"#contributing\">Contributing</a></h4>\n<p>To contribute an example or to edit one, submit a PR to the <a href=\"https://github.com/sst/sst\">repo</a>.\nMake sure to document the <code dir=\"auto\">sst.config.ts</code> in your example.</p>\n<hr>\n<h2 id=\"api-gateway-auth\"><a href=\"#api-gateway-auth\">API Gateway auth</a></h2>\n<p>Enable IAM and JWT authorizers for API Gateway routes.</p>\n<div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.j8ofn.css\"><script type=\"module\" src=\"/_astro/ec.8zarh.js\"></script><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">ApiGatewayV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">domain: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">api.ion.sst.sh</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">v1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET /</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">route.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET /foo</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">route.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, { auth: { iam: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\"> } });</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET /bar</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">route.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">auth: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">jwt: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">issuer:</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">https://cognito-idp.us-east-1.amazonaws.com/us-east-1_Rq4d8zILG</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">audiences: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">user@example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">$default</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">route.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">api: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const api = new sst.aws.ApiGatewayV2(&quot;MyApi&quot;, {  domain: {    name: &quot;api.ion.sst.sh&quot;,    path: &quot;v1&quot;,  },});api.route(&quot;GET /&quot;, {  handler: &quot;route.handler&quot;,});api.route(&quot;GET /foo&quot;, &quot;route.handler&quot;, { auth: { iam: true } });api.route(&quot;GET /bar&quot;, &quot;route.handler&quot;, {  auth: {    jwt: {      issuer:        &quot;https://cognito-idp.us-east-1.amazonaws.com/us-east-1_Rq4d8zILG&quot;,      audiences: [&quot;user@example.com&quot;],    },  },});api.route(&quot;$default&quot;, &quot;route.handler&quot;);return {  api: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-apig-auth\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-astro-container-with-redis\"><a href=\"#aws-astro-container-with-redis\">AWS Astro container with Redis</a></h2>\n<p>Creates a hit counter app with Astro and Redis.</p>\n<p>This deploys Astro as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:4321</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it by adding the <code dir=\"auto\">Dockerfile</code> that’s included in this example and\nrunning <code dir=\"auto\">npx sst deploy --stage production</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">4321/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;4321/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-astro-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-astro-streaming\"><a href=\"#aws-astro-streaming\">AWS Astro streaming</a></h2>\n<p>Follows the <a href=\"https://docs.astro.build/en/recipes/streaming-improve-page-performance/\">Astro Streaming</a> guide to create an app that streams HTML.</p>\n<p>The <code dir=\"auto\">responseMode</code> in the <a href=\"https://www.npmjs.com/package/astro-sst\"><code dir=\"auto\">astro-sst</code></a> adapter\nis set to enable streaming.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">astro.config.mjs</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">adapter: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">aws</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">responseMode: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">stream</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"adapter: aws({  responseMode: &quot;stream&quot;})\"><div></div></button></div></figure></div>\n<p>Now any components that return promises will be streamed.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/components/Friends.astro</span></figcaption><pre data-language=\"astro\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#616671\">---</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">type</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { Character } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./character</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">friends</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">Character</span><span style=\"--0:#D6DEEB;--1:#403F53\">[]</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = await </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">Promise</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">resolve</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; </span><span style=\"--0:#82AAFF;--1:#3C63B3\">setTimeout</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">setTimeout</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">[</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Patrick Star</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">patrick.png</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Sandy Cheeks</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sandy.png</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Squidward Tentacles</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">squidward.png</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Mr. Krabs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">mr-krabs.png</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}, </span><span style=\"--0:#F78C6C;--1:#AA0982\">3000</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">));</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#616671\">---</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\"> </span></span><span style=\"--0:#C5E478;--1:#3C63B3\">class</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">=</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">grid</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">friends</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">map</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">friend</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\"> </span></span><span style=\"--0:#C5E478;--1:#3C63B3\">class</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">card</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">img</span><span style=\"--0:#7FDBCA\"> </span></span><span style=\"--0:#C5E478;--1:#3C63B3\">class</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">img</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">src</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">friend</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">image</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">alt</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">friend</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> /&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">p</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">friend</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">p</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"---import type { Character } from &quot;./character&quot;;const friends: Character[] = await new Promise((resolve) => setTimeout(() => {  setTimeout(() => {    resolve(      [        { name: &quot;Patrick Star&quot;, image: &quot;patrick.png&quot; },        { name: &quot;Sandy Cheeks&quot;, image: &quot;sandy.png&quot; },        { name: &quot;Squidward Tentacles&quot;, image: &quot;squidward.png&quot; },        { name: &quot;Mr. Krabs&quot;, image: &quot;mr-krabs.png&quot; },      ]    );  }, 3000);}));---<div class=&quot;grid&quot;>  {friends.map((friend) => (    <div class=&quot;card&quot;>      <img class=&quot;img&quot; src={friend.image} alt={friend.name} />      <p>{friend.name}</p>    </div>  ))}</div>\"><div></div></button></div></figure></div>\n<p>You should see the <em>friends</em> section load after a 3 second delay.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Safari handles streaming differently than other browsers.</p></section></aside>\n<p>Safari uses a <a href=\"https://bugs.webkit.org/show_bug.cgi?id=252413\">different heuristic</a> to\ndetermine when to stream data. You need to render <em>enough</em> initial HTML to trigger streaming.\nThis is typically only a problem for demo apps.</p>\n<p>There’s nothing to configure for streaming in the <code dir=\"auto\">Astro</code> component.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Astro</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Astro(&quot;MyWeb&quot;);\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-astro-stream\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-aurora-local\"><a href=\"#aws-aurora-local\">AWS Aurora local</a></h2>\n<p>In this example, we connect to a locally running Postgres instance for dev. While\non deploy, we use RDS Aurora.</p>\n<p>We use the <a href=\"https://docs.docker.com/reference/cli/docker/container/run/\"><code dir=\"auto\">docker run</code></a> CLI\nto start a local container with Postgres. You don’t have to use Docker, you can use\nPostgres.app or any other way to run Postgres locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">docker</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--rm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-p</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">5432:5432</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-v</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $(</span><span style=\"--0:#C5E478;--1:#3C63B3\">pwd</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#ECC48D;--1:#3C63B3\">/.sst/storage/postgres:/var/lib/postgresql/data</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_USER=postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_PASSWORD=password</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_DB=local</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#ECC48D;--1:#3C63B3\">postgres:16.4</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"docker run \\  --rm \\  -p 5432:5432 \\  -v $(pwd)/.sst/storage/postgres:/var/lib/postgresql/data \\  -e POSTGRES_USER=postgres \\  -e POSTGRES_PASSWORD=password \\  -e POSTGRES_DB=local \\  postgres:16.4\"><div></div></button></div></figure></div>\n<p>The data is saved to the <code dir=\"auto\">.sst/storage</code> directory. So if you restart the dev server, the\ndata will still be there.</p>\n<p>We then configure the <code dir=\"auto\">dev</code> property of the <code dir=\"auto\">Aurora</code> component with the settings for the\nlocal Postgres instance.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">username: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">password</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">database: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">local</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">5432</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"dev: {  username: &quot;postgres&quot;,  password: &quot;password&quot;,  database: &quot;local&quot;,  port: 5432,}\"><div></div></button></div></figure></div>\n<p>By providing the <code dir=\"auto\">dev</code> prop for Postgres, SST will use the local Postgres instance and\nnot deploy a new RDS database when running <code dir=\"auto\">sst dev</code>.</p>\n<p>It also allows us to access the database through a Resource <code dir=\"auto\">link</code> without having to\nconditionally check if we are running locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">pool</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Pool</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">user: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const pool = new Pool({  host: Resource.MyPostgres.host,  port: Resource.MyPostgres.port,  user: Resource.MyPostgres.username,  password: Resource.MyPostgres.password,  database: Resource.MyPostgres.database,});\"><div></div></button></div></figure></div>\n<p>The above will work in both <code dir=\"auto\">sst dev</code> and <code dir=\"auto\">sst deploy</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">database</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Aurora</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPostgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">engine: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">username: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">password</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">local</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">localhost</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">5432</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [database],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;ec2&quot; });const database = new sst.aws.Aurora(&quot;MyPostgres&quot;, {  engine: &quot;postgres&quot;,  dev: {    username: &quot;postgres&quot;,    password: &quot;password&quot;,    database: &quot;local&quot;,    host: &quot;localhost&quot;,    port: 5432,  },  vpc,});new sst.aws.Function(&quot;MyFunction&quot;, {  vpc,  url: true,  link: [database],  handler: &quot;index.handler&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-aurora-local\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-aurora-mysql\"><a href=\"#aws-aurora-mysql\">AWS Aurora MySQL</a></h2>\n<p>In this example, we deploy a Aurora MySQL database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Aurora</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyDatabase</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">engine: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">mysql</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const mysql = new sst.aws.Aurora(&quot;MyDatabase&quot;, {  engine: &quot;mysql&quot;,  vpc,});\"><div></div></button></div></figure></div>\n<p>And link it to a Lambda function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [mysql],</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#ff728a;--1:#8b3e3e\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  link: [mysql],  url: true,  vpc,});\"><div></div></button></div></figure></div>\n<p>Now in the function we can access the database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">connection</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = await </span><span style=\"--0:#D6DEEB;--1:#403F53\">mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">createConnection</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">user: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const connection = await mysql.createConnection({  database: Resource.MyDatabase.database,  host: Resource.MyDatabase.host,  port: Resource.MyDatabase.port,  user: Resource.MyDatabase.username,  password: Resource.MyDatabase.password,});\"><div></div></button></div></figure></div>\n<p>We also enable the <code dir=\"auto\">bastion</code> option for the VPC. This allows us to connect to the database\nfrom our local machine with the <code dir=\"auto\">sst tunnel</code> CLI.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>Now you can run <code dir=\"auto\">npx sst dev</code> and you can connect to the database from your local machine.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Aurora</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyDatabase</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">engine: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">mysql</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [mysql],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">username: mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">database: mysql</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, {  nat: &quot;ec2&quot;,  bastion: true,});const mysql = new sst.aws.Aurora(&quot;MyDatabase&quot;, {  engine: &quot;mysql&quot;,  vpc,});new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  link: [mysql],  url: true,  vpc,});return {  host: mysql.host,  port: mysql.port,  username: mysql.username,  password: mysql.password,  database: mysql.database,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-aurora-mysql\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-aurora-postgres\"><a href=\"#aws-aurora-postgres\">AWS Aurora Postgres</a></h2>\n<p>In this example, we deploy a Aurora Postgres database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Aurora</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyDatabase</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">engine: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const postgres = new sst.aws.Aurora(&quot;MyDatabase&quot;, {  engine: &quot;postgres&quot;,  vpc,});\"><div></div></button></div></figure></div>\n<p>And link it to a Lambda function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [postgres],</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#ff728a;--1:#8b3e3e\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  link: [postgres],  url: true,  vpc,});\"><div></div></button></div></figure></div>\n<p>In the function we use the <a href=\"https://www.npmjs.com/package/postgres\"><code dir=\"auto\">postgres</code></a> package.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> postgres </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { Resource } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">sql</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">username: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyDatabase</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import postgres from &quot;postgres&quot;;import { Resource } from &quot;sst&quot;;const sql = postgres({  username: Resource.MyDatabase.username,  password: Resource.MyDatabase.password,  database: Resource.MyDatabase.database,  host: Resource.MyDatabase.host,  port: Resource.MyDatabase.port,});\"><div></div></button></div></figure></div>\n<p>We also enable the <code dir=\"auto\">bastion</code> option for the VPC. This allows us to connect to the database\nfrom our local machine with the <code dir=\"auto\">sst tunnel</code> CLI.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>Now you can run <code dir=\"auto\">npx sst dev</code> and you can connect to the database from your local machine.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Aurora</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyDatabase</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">engine: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [postgres],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">username: postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">database: postgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, {  nat: &quot;ec2&quot;,  bastion: true,});const postgres = new sst.aws.Aurora(&quot;MyDatabase&quot;, {  engine: &quot;postgres&quot;,  vpc,});new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  link: [postgres],  url: true,  vpc,});return {  host: postgres.host,  port: postgres.port,  username: postgres.username,  password: postgres.password,  database: postgres.database,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-aurora-postgres\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-openauth-react-spa\"><a href=\"#aws-openauth-react-spa\">AWS OpenAuth React SPA</a></h2>\n<p>This is a full-stack monorepo app shows the OpenAuth flow for a single-page app\nand an authenticated API. It has:</p>\n<ul>\n<li>\n<p>React SPA built with Vite and the <code dir=\"auto\">StaticSite</code> component in the <code dir=\"auto\">packages/web</code>\ndirectory.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">infra/web.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">web</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">StaticSite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">packages/web</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">build: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">output: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">dist</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run build</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">environment: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">VITE_API_URL: </span><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">VITE_AUTH_URL: </span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const web = new sst.aws.StaticSite(&quot;MyWeb&quot;, {  path: &quot;packages/web&quot;,  build: {    output: &quot;dist&quot;,    command: &quot;npm run build&quot;,  },  environment: {    VITE_API_URL: api.url,    VITE_AUTH_URL: auth.url,  },});\"><div></div></button></div></figure></div>\n</li>\n<li>\n<p>API with Hono and the <code dir=\"auto\">Function</code> component in <code dir=\"auto\">packages/functions/src/api.ts</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">infra/api.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [auth]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">packages/functions/src/api.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const api = new sst.aws.Function(&quot;MyApi&quot;, {  url: true,  link: [auth],  handler: &quot;packages/functions/src/api.handler&quot;,});\"><div></div></button></div></figure></div>\n</li>\n<li>\n<p>OpenAuth with the <code dir=\"auto\">Auth</code> component in <code dir=\"auto\">packages/functions/src/auth.ts</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">infra/auth.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Auth</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyAuth</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">issuer: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">packages/functions/src/auth.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const auth = new sst.aws.Auth(&quot;MyAuth&quot;, {  issuer: &quot;packages/functions/src/auth.handler&quot;,});\"><div></div></button></div></figure></div>\n</li>\n</ul>\n<p>The React frontend uses a <code dir=\"auto\">AuthContext</code> provider to manage the auth flow.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">packages/web/src/AuthContext.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;</span><span style=\"--0:#F78C6C;--1:#AA0982\">AuthContext.Provider</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#3C63B3\">value</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">login</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">logout</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">userId</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">loaded</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">loggedIn</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">getToken</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">  </span></span><span style=\"--0:#7FDBCA;--1:#8D46B4\">}</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">children</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;/</span><span style=\"--0:#F78C6C;--1:#AA0982\">AuthContext.Provider</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"<AuthContext.Provider  value={{    login,    logout,    userId,    loaded,    loggedIn,    getToken,  }}>  {children}</AuthContext.Provider>\"><div></div></button></div></figure></div>\n<p>Now in <code dir=\"auto\">App.tsx</code>, we can use the <code dir=\"auto\">useAuth</code> hook.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">packages/web/src/App.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">useAuth</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!</span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">loaded</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Loading...</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">loggedIn</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">p</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">span</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Logged in</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">span</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">userId</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">&amp;&amp;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">span</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#D6DEEB;--1:#403F53\"> as </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">userId</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">span</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">p</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">) </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">button</span><span style=\"--0:#7FDBCA\"> </span></span><span style=\"--0:#C5E478;--1:#3C63B3\">onClick</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">login</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\">Login with OAuth</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">button</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const auth = useAuth();return !auth.loaded ? (  <div>Loading...</div>) : (  <div>    {auth.loggedIn ? (      <div>        <p>          <span>Logged in</span>          {auth.userId &amp;&amp; <span> as {auth.userId}</span>}        </p>      </div>    ) : (      <button onClick={auth.login}>Login with OAuth</button>    )}  </div>);\"><div></div></button></div></figure></div>\n<p>Once authenticated, we can call our authenticated API by passing in the access\ntoken.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">packages/web/src/App.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">fetch</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#C792EA;--1:#8D46B4\">import.</span><span style=\"--0:#7FDBCA;--1:#097174\">meta</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">env</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">VITE_API_URL</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">me</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">headers: {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Authorization: </span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#335497\">Bearer </span><span style=\"--0:#e38683;--1:#9d312e\">${</span><span style=\"--0:#C792EA;--1:#773b98\">await</span><span style=\"--0:#e38683;--1:#9d312e\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">auth</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#82AAFF;--1:#335497\">getToken</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#e38683;--1:#9d312e\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"await fetch(`${import.meta.env.VITE_API_URL}me`, {  headers: {    Authorization: `Bearer ${await auth.getToken()}`,  },});\"><div></div></button></div></figure></div>\n<p>The API uses the OpenAuth client to verify the token.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">packages/functions/src/api.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">authHeader</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">c</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">req</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">header</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Authorization</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">token</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">authHeader</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">split</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)[</span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">];</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#773b98\">const </span><span style=\"--0:#82AAFF;--1:#335497\">verified</span><span style=\"--0:#C792EA;--1:#773b98\"> = await </span><span style=\"--0:#D6DEEB;--1:#403F53\">client</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#82AAFF;--1:#335497\">verify</span><span style=\"--0:#D6DEEB;--1:#403F53\">(subjects</span><span style=\"--0:#C792EA;--1:#773b98\">, </span><span style=\"--0:#D6DEEB;--1:#403F53\">token);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const authHeader = c.req.header(&quot;Authorization&quot;);const token = authHeader.split(&quot; &quot;)[1];const verified = await client.verify(subjects, token);\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">sst.config.ts</code> dynamically imports all the <code dir=\"auto\">infra/</code> files.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./infra/auth</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./infra/api</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./infra/web</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"await import(&quot;./infra/auth&quot;);await import(&quot;./infra/api&quot;);await import(&quot;./infra/web&quot;);\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-auth-react\">full example</a>.</p>\n<hr>\n<h2 id=\"bucket-policy\"><a href=\"#bucket-policy\">Bucket policy</a></h2>\n<p>Create an S3 bucket and transform its bucket policy.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">transform: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">policy</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">args</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#809191;--1:#5E6578\">// use sst.aws.iamEdit helper function to manipulate IAM policy</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#809191;--1:#5E6578\">// containing Output values from components</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">policy</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">iamEdit</span><span style=\"--0:#D6DEEB;--1:#403F53\">(args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">policy</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">policy</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">policy</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">Statement</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">push</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">Effect: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Allow</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">Principal: { Service: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ses.amazonaws.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">Action: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:PutObject</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">Resource: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">arn:aws:s3:::</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">bucket</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">/*</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;, {  transform: {    policy: (args) => {      // use sst.aws.iamEdit helper function to manipulate IAM policy      // containing Output values from components      args.policy = sst.aws.iamEdit(args.policy, (policy) => {        policy.Statement.push({          Effect: &quot;Allow&quot;,          Principal: { Service: &quot;ses.amazonaws.com&quot; },          Action: &quot;s3:PutObject&quot;,          Resource: $interpolate`arn:aws:s3:::${args.bucket}/*`,        });      });    },  },});return {  bucket: bucket.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bucket-policy\">full example</a>.</p>\n<hr>\n<h2 id=\"bucket-queue-notifications\"><a href=\"#bucket-queue-notifications\">Bucket queue notifications</a></h2>\n<p>Create an S3 bucket and subscribe to its events with an SQS queue.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">notify</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">notifications: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">queue,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">events: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:ObjectCreated:*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">queue: queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const queue = new sst.aws.Queue(&quot;MyQueue&quot;);queue.subscribe(&quot;subscriber.handler&quot;);const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);bucket.notify({  notifications: [    {      name: &quot;MySubscriber&quot;,      queue,      events: [&quot;s3:ObjectCreated:*&quot;],    },  ],});return {  bucket: bucket.name,  queue: queue.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bucket-queue-subscriber\">full example</a>.</p>\n<hr>\n<h2 id=\"bucket-notifications\"><a href=\"#bucket-notifications\">Bucket notifications</a></h2>\n<p>Create an S3 bucket and subscribe to its events with a function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">notify</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">notifications: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">function: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">events: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:ObjectCreated:*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);bucket.notify({  notifications: [    {      name: &quot;MySubscriber&quot;,      function: &quot;subscriber.handler&quot;,      events: [&quot;s3:ObjectCreated:*&quot;],    },  ],});return {  bucket: bucket.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bucket-subscriber\">full example</a>.</p>\n<hr>\n<h2 id=\"bucket-topic-notifications\"><a href=\"#bucket-topic-notifications\">Bucket topic notifications</a></h2>\n<p>Create an S3 bucket and subscribe to its events with an SNS topic.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">topic</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SnsTopic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyTopic</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">topic</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">notify</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">notifications: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">topic,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">events: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:ObjectCreated:*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">topic: topic</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const topic = new sst.aws.SnsTopic(&quot;MyTopic&quot;);topic.subscribe(&quot;MySubscriber&quot;, &quot;subscriber.handler&quot;);const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);bucket.notify({  notifications: [    {      name: &quot;MySubscriber&quot;,      topic,      events: [&quot;s3:ObjectCreated:*&quot;],    },  ],});return {  bucket: bucket.name,  topic: topic.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bucket-topic-subscriber\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-bun-elysia-container\"><a href=\"#aws-bun-elysia-container\">AWS Bun Elysia container</a></h2>\n<p>Deploys a Bun <a href=\"https://elysiajs.com/\">Elysia</a> API to AWS.</p>\n<p>You can get started by running.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">bun</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">create</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">elysia</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">aws-bun-elysia</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">cd</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">aws-bun-elysia</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">bunx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">init</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"bun create elysia aws-bun-elysiacd aws-bun-elysiabunx sst init\"><div></div></button></div></figure></div>\n<p>Now you can add a service.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bun dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;bun dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Start your app locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">bun</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"bun sst dev\"><div></div></button></div></figure></div>\n<p>This example lets you upload a file to S3 and then download it.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">curl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-F</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">file=@elysia.png</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">http://localhost:3000/</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">curl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">http://localhost:3000/latest</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"curl -F file=@elysia.png http://localhost:3000/curl http://localhost:3000/latest\"><div></div></button></div></figure></div>\n<p>Finally, you can deploy it using <code dir=\"auto\">bun sst deploy --stage production</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bun dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [bucket],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;);const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;bun dev&quot;,  },  link: [bucket],});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bun-elysia\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-bun-redis\"><a href=\"#aws-bun-redis\">AWS Bun Redis</a></h2>\n<p>Creates a hit counter app with Bun and Redis.</p>\n<p>This deploys Bun as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bun dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;bun dev&quot;,  },  link: [redis],});\"><div></div></button></div></figure></div>\n<p>We also have a couple of scripts. A <code dir=\"auto\">dev</code> script with a watcher and a <code dir=\"auto\">build</code> script\nthat used when we deploy to production.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">package.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">\"scripts\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#097174\">\"dev\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">bun run --watch index.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#097174\">\"build\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">bun build --target bun index.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  &quot;scripts&quot;: {    &quot;dev&quot;: &quot;bun run --watch index.ts&quot;,    &quot;build&quot;: &quot;bun build --target bun index.ts&quot;  },}\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">bun</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo bun sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">bun</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"bun sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:3000</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it using <code dir=\"auto\">bun sst deploy --stage production</code> using a <code dir=\"auto\">Dockerfile</code>\nthat’s included in the example.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bun dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;bun dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-bun-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-cluster-private-service\"><a href=\"#aws-cluster-private-service\">AWS Cluster private service</a></h2>\n<p>Adds a private load balancer to a service by setting the <code dir=\"auto\">loadBalancer.public</code> prop to\n<code dir=\"auto\">false</code>.</p>\n<p>This allows you to create internal services that can only be accessed inside a VPC.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">public: </span><span style=\"--0:#FF5874;--1:#A54A4A\">false</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    public: false,    ports: [{ listen: &quot;80/http&quot; }],  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-cluster-internal\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-cluster-spot-capacity\"><a href=\"#aws-cluster-spot-capacity\">AWS Cluster Spot capacity</a></h2>\n<p>This example, shows how to use the Fargate Spot capacity provider for your services.</p>\n<p>We have it set to use only Fargate Spot instances for all non-production stages. Learn more\nabout the <a href=\"/docs/component/aws/cluster#capacity\"><code dir=\"auto\">capacity</code></a> prop.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">capacity: $app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">===</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">production</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">undefined</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">spot</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;);const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }],  },  capacity: $app.stage === &quot;production&quot; ? undefined : &quot;spot&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-cluster-spot\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-cluster-with-api-gateway\"><a href=\"#aws-cluster-with-api-gateway\">AWS Cluster with API Gateway</a></h2>\n<p>Expose a service through API Gateway HTTP API using a VPC link.</p>\n<p>This is an alternative to using a load balancer. Since API Gateway is pay per request, it\nworks out a lot cheaper for services that don’t get a lot of traffic.</p>\n<p>You need to specify which port in your service will be exposed through API Gateway.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">service</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">serviceRegistry: {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">    </span></span><span style=\"--0:#C792EA\">port: </span></span><span style=\"--0:#F78C6C;--1:#a2097c\">80</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const service = new sst.aws.Service(&quot;MyService&quot;, {  cluster,  serviceRegistry: {    port: 80,  },});\"><div></div></button></div></figure></div>\n<p>A couple of things to note:</p>\n<ol>\n<li>\n<p>Your API Gateway HTTP API also needs to be in the <strong>same VPC</strong> as the service.</p>\n</li>\n<li>\n<p>You also need to verify that your VPC’s <a href=\"https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-vpc-links.html#http-api-vpc-link-availability\"><strong>availability zones support VPC link</strong></a>.</p>\n</li>\n<li>\n<p>Run <code dir=\"auto\">aws ec2 describe-availability-zones</code> to get a list of AZs for your\naccount.</p>\n</li>\n<li>\n<p>Only list the AZ ID’s that support VPC link.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">vpc: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">az: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">eu-west-3a</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">eu-west-3c</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"vpc: {  az: [&quot;eu-west-3a&quot;, &quot;eu-west-3c&quot;]}\"><div></div></button></div></figure></div>\n<p>If the VPC picks an AZ automatically that doesn’t support VPC link, you’ll get\nthe following error:</p>\n<div class=\"expressive-code\"><figure class=\"frame not-content\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">operation error ApiGatewayV2: BadRequestException: Subnet is in Availability</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#d6deeb;--1:#403f53\">Zone 'euw3-az2' where service is not available</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"operation error ApiGatewayV2: BadRequestException: Subnet is in AvailabilityZone 'euw3-az2' where service is not available\"><div></div></button></div></figure></div>\n</li>\n</ol>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// Pick at least two AZs that support VPC link</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// az: [\"eu-west-3a\", \"eu-west-3c\"],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">service</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">serviceRegistry: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">80</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">ApiGatewayV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">routePrivate</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">$default</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, service</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">nodes</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">cloudmapService</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, {  // Pick at least two AZs that support VPC link  // az: [&quot;eu-west-3a&quot;, &quot;eu-west-3c&quot;],});const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });const service = new sst.aws.Service(&quot;MyService&quot;, {  cluster,  serviceRegistry: {    port: 80,  },});const api = new sst.aws.ApiGatewayV2(&quot;MyApi&quot;, { vpc });api.routePrivate(&quot;$default&quot;, service.nodes.cloudmapService.arn);\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-cluster-vpclink\">full example</a>.</p>\n<hr>\n<h2 id=\"subscribe-to-queues\"><a href=\"#subscribe-to-queues\">Subscribe to queues</a></h2>\n<p>Create an SQS queue, subscribe to it, and publish to it from a function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// create dead letter queue</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">DeadLetterQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.dlq</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// create main queue</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dlq: </span><span style=\"--0:#D6DEEB;--1:#403F53\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.main</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [queue]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">queue: queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dlq: dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// create dead letter queueconst dlq = new sst.aws.Queue(&quot;DeadLetterQueue&quot;);dlq.subscribe(&quot;subscriber.dlq&quot;);// create main queueconst queue = new sst.aws.Queue(&quot;MyQueue&quot;, {  dlq: dlq.arn,});queue.subscribe(&quot;subscriber.main&quot;);const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;publisher.handler&quot;,  link: [queue],  url: true,});return {  app: app.url,  queue: queue.url,  dlq: dlq.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-dead-letter-queue\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-deno-redis\"><a href=\"#aws-deno-redis\">AWS Deno Redis</a></h2>\n<p>Creates a hit counter app with Deno and Redis.</p>\n<p>This deploys Deno as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">8000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">deno task dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;8000/http&quot; }],  },  dev: {    command: &quot;deno task dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:8000</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it using <code dir=\"auto\">sst deploy --stage production</code> using a <code dir=\"auto\">Dockerfile</code>\nthat’s included in the example.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">8000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">deno task dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;8000/http&quot; }],  },  dev: {    command: &quot;deno task dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-deno-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"dynamodb-streams\"><a href=\"#dynamodb-streams\">DynamoDB streams</a></h2>\n<p>Create a DynamoDB table, enable streams, and subscribe to it with a function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">table</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Dynamo</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyTable</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">fields: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">id: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">string</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">primaryIndex: { hashKey: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">id</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">stream: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">new-and-old-images</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">table</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">filters: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dynamodb: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">NewImage: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">message: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">            </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">S: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Hello</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [table]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">table: table</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const table = new sst.aws.Dynamo(&quot;MyTable&quot;, {  fields: {    id: &quot;string&quot;,  },  primaryIndex: { hashKey: &quot;id&quot; },  stream: &quot;new-and-old-images&quot;,});table.subscribe(&quot;MySubscriber&quot;, &quot;subscriber.handler&quot;, {  filters: [    {      dynamodb: {        NewImage: {          message: {            S: [&quot;Hello&quot;],          },        },      },    },  ],});const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;publisher.handler&quot;,  link: [table],  url: true,});return {  app: app.url,  table: table.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-dynamo\">full example</a>.</p>\n<hr>\n<h2 id=\"ec2-with-pulumi\"><a href=\"#ec2-with-pulumi\">EC2 with Pulumi</a></h2>\n<p>Use raw Pulumi resources to create an EC2 instance.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Notice you don't need to import pulumi, it is already part of sst.</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">securityGroup</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">ec2</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SecurityGroup</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">web-secgrp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">ingress:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">protocol: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">tcp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">fromPort: </span><span style=\"--0:#F78C6C;--1:#AA0982\">80</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">toPort: </span><span style=\"--0:#F78C6C;--1:#AA0982\">80</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cidrBlocks: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">0.0.0.0/0</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Find the latest Ubuntu AMI</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">ami</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">ec2</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getAmi</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">filters:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">values: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">mostRecent: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">owners:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">099720109477</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#809191;--1:#5E6578\">// Canonical</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// User data to set up a simple web server</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">userData</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">#!/bin/bash</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#ECC48D;--1:#3C63B3\">ho \"Hello, World!\" &gt; index.html</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#ECC48D;--1:#3C63B3\">hup python3 -m http.server 80 &amp;</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create an EC2 instance</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">server</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">ec2</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Instance</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">web-server</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">instanceType: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">t2.micro</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">ami: </span><span style=\"--0:#D6DEEB;--1:#403F53\">ami</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">then</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">ami</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; </span><span style=\"--0:#D6DEEB;--1:#403F53\">ami</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">userData: </span><span style=\"--0:#D6DEEB;--1:#403F53\">userData</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">vpcSecurityGroupIds:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [securityGroup</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">id</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">associatePublicIpAddress: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: server</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">publicIp</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Notice you don't need to import pulumi, it is already part of sst.const securityGroup = new aws.ec2.SecurityGroup(&quot;web-secgrp&quot;, {  ingress: [    {      protocol: &quot;tcp&quot;,      fromPort: 80,      toPort: 80,      cidrBlocks: [&quot;0.0.0.0/0&quot;],    },  ],});// Find the latest Ubuntu AMIconst ami = aws.ec2.getAmi({  filters: [    {      name: &quot;name&quot;,      values: [&quot;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&quot;],    },  ],  mostRecent: true,  owners: [&quot;099720109477&quot;], // Canonical});// User data to set up a simple web serverconst userData = `#!/bin/bashho &quot;Hello, World!&quot; > index.htmlhup python3 -m http.server 80 &amp;`;// Create an EC2 instanceconst server = new aws.ec2.Instance(&quot;web-server&quot;, {  instanceType: &quot;t2.micro&quot;,  ami: ami.then((ami) => ami.id),  userData: userData,  vpcSecurityGroupIds: [securityGroup.id],  associatePublicIpAddress: true,});return {  app: server.publicIp,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-ec2-pulumi\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-efs-with-sqlite\"><a href=\"#aws-efs-with-sqlite\">AWS EFS with SQLite</a></h2>\n<p>Mount an EFS file system to a function and write to a SQLite database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"js\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">db</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">sqlite3</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/mnt/efs/mydb.sqlite</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const db = sqlite3(&quot;/mnt/efs/mydb.sqlite&quot;);\"><div></div></button></div></figure></div>\n<p>The file system is mounted to <code dir=\"auto\">/mnt/efs</code> in the function.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Given the performance of EFS, it’s not recommended to use it for databases.</p></section></aside>\n<p>This example is for demonstration purposes only. It’s not recommended to use\nEFS for databases in production.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// NAT Gateways are required for Lambda functions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create an EFS file system to store the SQLite database</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">efs</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Efs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyEfs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a Lambda function that queries the database</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">volume: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">efs,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/mnt/efs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">nodejs: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">install: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">better-sqlite3</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// NAT Gateways are required for Lambda functionsconst vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;managed&quot; });// Create an EFS file system to store the SQLite databaseconst efs = new sst.aws.Efs(&quot;MyEfs&quot;, { vpc });// Create a Lambda function that queries the databasenew sst.aws.Function(&quot;MyFunction&quot;, {  vpc,  url: true,  volume: {    efs,    path: &quot;/mnt/efs&quot;,  },  handler: &quot;index.handler&quot;,  nodejs: {    install: [&quot;better-sqlite3&quot;],  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-efs-sqlite\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-efs-with-surrealdb\"><a href=\"#aws-efs-with-surrealdb\">AWS EFS with SurrealDB</a></h2>\n<p>We use the SurrealDB docker image to run a server in a container and use EFS as the file\nsystem.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">server</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">architecture: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">arm64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">surrealdb/surrealdb:v2.0.2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// ...</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">volumes:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ efs, path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/data</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const server = new sst.aws.Service(&quot;MyService&quot;, {  cluster,  architecture: &quot;arm64&quot;,  image: &quot;surrealdb/surrealdb:v2.0.2&quot;,  // ...  volumes: [    { efs, path: &quot;/data&quot; },  ],});\"><div></div></button></div></figure></div>\n<p>We then connect to the server from a Lambda function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"js\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">endpoint</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">http://</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#7FDBCA;--1:#097174\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyConfig</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#7FDBCA;--1:#097174\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyConfig</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">db</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Surreal</span><span style=\"--0:#D6DEEB;--1:#403F53\">();</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">db</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">connect</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">(</span><span style=\"--0:#D7DBE0\">endpoint</span><span style=\"--0:#D6DEEB\">);</span></span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const endpoint = `http://${Resource.MyConfig.host}:${Resource.MyConfig.port}`;const db = new Surreal();await db.connect(endpoint);\"><div></div></button></div></figure></div>\n<p>This uses the SurrealDB client to connect to the server.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Given the performance of EFS, it’s not recommended to use it for databases.</p></section></aside>\n<p>This example is for demonstration purposes only. It’s not recommended to use\nEFS for databases in production.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const { </span><span style=\"--0:#82AAFF;--1:#3C63B3\">RandomPassword</span><span style=\"--0:#C792EA;--1:#8D46B4\"> } = await </span><span style=\"--0:#7FDBCA;--1:#097174\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">@pulumi/random</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// SurrealDB Credentials</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">PORT</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#F78C6C;--1:#AA0982\">8080</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">NAMESPACE</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">test</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">DATABASE</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">test</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">USERNAME</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">root</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">PASSWORD</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">RandomPassword</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Password</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">length: </span><span style=\"--0:#F78C6C;--1:#AA0982\">32</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">result</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// NAT Gateways are required for Lambda functions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Store SurrealDB data in EFS</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">efs</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Efs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyEfs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Run SurrealDB server in a container</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">server</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">architecture: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">arm64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">image: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">surrealdb/surrealdb:v2.0.2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">command:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">start</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">--bind</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">0.0.0.0:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#82AAFF;--1:#3C63B3\">PORT</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">--log</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">info</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">--user</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">USERNAME</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">--pass</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">PASSWORD</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">surrealkv://data/data.skv</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">--allow-scripting</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">volumes:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [{ efs, path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/data</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Lambda client to connect to SurrealDB</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">config</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Linkable</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyConfig</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">properties: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">username: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">USERNAME</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">PASSWORD</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">namespace: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">NAMESPACE</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">DATABASE</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">PORT</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D6DEEB;--1:#403F53\">server</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">service</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [config],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const { RandomPassword } = await import(&quot;@pulumi/random&quot;);// SurrealDB Credentialsconst PORT = 8080;const NAMESPACE = &quot;test&quot;;const DATABASE = &quot;test&quot;;const USERNAME = &quot;root&quot;;const PASSWORD = new RandomPassword(&quot;Password&quot;, {  length: 32,}).result;// NAT Gateways are required for Lambda functionsconst vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;managed&quot; });// Store SurrealDB data in EFSconst efs = new sst.aws.Efs(&quot;MyEfs&quot;, { vpc });// Run SurrealDB server in a containerconst cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });const server = new sst.aws.Service(&quot;MyService&quot;, {  cluster,  architecture: &quot;arm64&quot;,  image: &quot;surrealdb/surrealdb:v2.0.2&quot;,  command: [    &quot;start&quot;,    &quot;--bind&quot;,    $interpolate`0.0.0.0:${PORT}`,    &quot;--log&quot;,    &quot;info&quot;,    &quot;--user&quot;,    USERNAME,    &quot;--pass&quot;,    PASSWORD,    &quot;surrealkv://data/data.skv&quot;,    &quot;--allow-scripting&quot;,  ],  volumes: [{ efs, path: &quot;/data&quot; }],});// Lambda client to connect to SurrealDBconst config = new sst.Linkable(&quot;MyConfig&quot;, {  properties: {    username: USERNAME,    password: PASSWORD,    namespace: NAMESPACE,    database: DATABASE,    port: PORT,    host: server.service,  },});new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  link: [config],  url: true,  vpc,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-efs-surrealdb\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-efs\"><a href=\"#aws-efs\">AWS EFS</a></h2>\n<p>Mount an EFS file system to a function and a container.</p>\n<p>This allows both your function and the container to access the same file system. Here they\nboth update a counter that’s stored in the file system.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">common.mjs</span></figcaption><pre data-language=\"js\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">writeFile</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/mnt/efs/counter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#7FDBCA;--1:#097174\">newValue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">toString</span><span style=\"--0:#D6DEEB;--1:#403F53\">());</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"await writeFile(&quot;/mnt/efs/counter&quot;, newValue.toString());\"><div></div></button></div></figure></div>\n<p>The file system is mounted to <code dir=\"auto\">/mnt/efs</code> in both the function and the container.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// NAT Gateways are required for Lambda functions</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create an EFS file system to store a counter</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">efs</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Efs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyEfs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a Lambda function that increments the counter</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">volume: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">efs,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/mnt/efs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a service that increments the same counter</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">volumes: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">efs,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/mnt/efs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// NAT Gateways are required for Lambda functionsconst vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;managed&quot; });// Create an EFS file system to store a counterconst efs = new sst.aws.Efs(&quot;MyEfs&quot;, { vpc });// Create a Lambda function that increments the counternew sst.aws.Function(&quot;MyFunction&quot;, {  handler: &quot;lambda.handler&quot;,  url: true,  vpc,  volume: {    efs,    path: &quot;/mnt/efs&quot;,  },});// Create a service that increments the same counterconst cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }],  },  volumes: [    {      efs,      path: &quot;/mnt/efs&quot;,    },  ],});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-efs\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-express-redis\"><a href=\"#aws-express-redis\">AWS Express Redis</a></h2>\n<p>Creates a hit counter app with Express and Redis.</p>\n<p>This deploys Express as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node --watch index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }],  },  dev: {    command: &quot;node --watch index.mjs&quot;,  },  link: [redis],});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:80</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it using <code dir=\"auto\">npx sst deploy --stage production</code> using a <code dir=\"auto\">Dockerfile</code>\nthat’s included in the example.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node --watch index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot; }],  },  dev: {    command: &quot;node --watch index.mjs&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-express-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"ffmpeg-in-lambda\"><a href=\"#ffmpeg-in-lambda\">FFmpeg in Lambda</a></h2>\n<p>Uses <a href=\"https://ffmpeg.org/\">FFmpeg</a> to process videos. In this example, it takes a <code dir=\"auto\">clip.mp4</code>\nand grabs a single frame from it.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>You don’t need to use a Lambda layer to use FFmpeg.</p></section></aside>\n<p>We use the <a href=\"https://www.npmjs.com/package/ffmpeg-static\"><code dir=\"auto\">ffmpeg-static</code></a> package that\ncontains pre-built binaries for all architectures.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> ffmpeg </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ffmpeg-static</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import ffmpeg from &quot;ffmpeg-static&quot;;\"><div></div></button></div></figure></div>\n<p>We can use this to spawn a child process and run FFmpeg.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">spawnSync</span><span style=\"--0:#D6DEEB;--1:#403F53\">(ffmpeg, ffmpegParams, { stdio: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">pipe</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> });</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"spawnSync(ffmpeg, ffmpegParams, { stdio: &quot;pipe&quot; });\"><div></div></button></div></figure></div>\n<p>We don’t need a layer when we deploy this because SST will use the right binary for the\ntarget Lambda architecture; including <code dir=\"auto\">arm64</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#FFFFFF;--1:#9B504E\">nodejs</span><span style=\"--0:#D6DEEB;--1:#403F53\">: { </span><span style=\"--0:#FFFFFF;--1:#9B504E\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\">: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">ffmpeg-static</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  nodejs: { install: [&quot;ffmpeg-static&quot;] }}\"><div></div></button></div></figure></div>\n<p>All this is handled by <a href=\"/docs/component/aws/function#nodejs-install\"><code dir=\"auto\">nodejs.install</code></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">func</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">memory: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">2 GB</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">15 minutes</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">copyFiles:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">clip.mp4</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">nodejs: { install:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ffmpeg-static</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: func</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const func = new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  memory: &quot;2 GB&quot;,  timeout: &quot;15 minutes&quot;,  handler: &quot;index.handler&quot;,  copyFiles: [{ from: &quot;clip.mp4&quot; }],  nodejs: { install: [&quot;ffmpeg-static&quot;] },});return {  url: func.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-ffmpeg\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-apigatewayv2-go\"><a href=\"#aws-apigatewayv2-go\">AWS ApiGatewayV2 Go</a></h2>\n<p>Uses <a href=\"https://github.com/awslabs/aws-lambda-go-api-proxy/tree/master\">aws-lambda-go-api-proxy</a> to allow you to run a Go API with API Gateway V2.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>We use the <code dir=\"auto\">aws-lambda-go-api-proxy</code> package to handle the API Gateway V2 event.</p></section></aside>\n<p>So you write your Go function as you normally would and then use the package to handle the API Gateway V2 event.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">github.com/aws/aws-lambda-go/lambda</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">github.com/awslabs/aws-lambda-go-api-proxy/httpadapter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">func</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#D6DEEB;--1:#403F53\">() </span><span style=\"--0:#7FDBCA;--1:#097174\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\">http.ServeMux {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#3C63B3\">mux</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">http</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">NewServeMux</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#3C63B3\">mux</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">HandleFunc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8D46B4\">func</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">(</span><span style=\"--0:#D7DBE0\">w</span><span style=\"--0:#D6DEEB\"> http.ResponseWriter, </span><span style=\"--0:#D7DBE0\">r</span><span style=\"--0:#D6DEEB\"> </span></span><span style=\"--0:#7FDBCA;--1:#097174\">*</span><span style=\"--0:#D6DEEB;--1:#403F53\">http.Request) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3C63B3\">w</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Header</span><span style=\"--0:#D6DEEB;--1:#403F53\">().</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Set</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Content-Type</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">application/json</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3C63B3\">w</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">WriteHeader</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">http</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#C5E478;--1:#3C63B3\">StatusOK</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C5E478;--1:#3C63B3\">w</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Write</span><span style=\"--0:#D6DEEB;--1:#403F53\">([]</span><span style=\"--0:#C792EA;--1:#8D46B4\">byte</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#ECC48D;--1:#9B504E\">{\"message\": \"hello world\"}</span><span style=\"--0:#D9F5DD;--1:#111111\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">mux</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">func</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">main</span><span style=\"--0:#D6DEEB;--1:#403F53\">() {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#3C63B3\">lambda</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Start</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">httpadapter</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">NewV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#D6DEEB;--1:#403F53\">()).</span><span style=\"--0:#C5E478;--1:#3C63B3\">ProxyWithContext</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import ( &quot;github.com/aws/aws-lambda-go/lambda&quot; &quot;github.com/awslabs/aws-lambda-go-api-proxy/httpadapter&quot;)func router() *http.ServeMux {  mux := http.NewServeMux()  mux.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {    w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)    w.WriteHeader(http.StatusOK)    w.Write([]byte(`{&quot;message&quot;: &quot;hello world&quot;}`))  })  return mux}func main() {  lambda.Start(httpadapter.NewV2(router()).ProxyWithContext)}\"><div></div></button></div></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">ApiGatewayV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GoApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">$default</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">go</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const api = new sst.aws.ApiGatewayV2(&quot;GoApi&quot;);api.route(&quot;$default&quot;, {  handler: &quot;src/&quot;,  runtime: &quot;go&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-go-api-gateway-v2\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-go-s3-presigned\"><a href=\"#aws-lambda-go-s3-presigned\">AWS Lambda Go S3 Presigned</a></h2>\n<p>Generates a presigned URL for the linked S3 bucket in a Go Lambda function.</p>\n<p>Configure the S3 Client and the PresignedClient.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">cfg</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">config</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">LoadDefaultConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">context</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">TODO</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#82AAFF;--1:#3C63B3\">panic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">client</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">s3</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">NewFromConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">cfg</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">presignedClient</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">s3</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">NewPresignClient</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">client</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"cfg, err := config.LoadDefaultConfig(context.TODO())if err != nil {   panic(err)}client := s3.NewFromConfig(cfg)presignedClient := s3.NewPresignClient(client)\"><div></div></button></div></figure></div>\n<p>Generate the presigned URL.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">bucketName</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">resource</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Get</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Bucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">panic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">presignedClient</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">PresignPutObject</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">context</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">TODO</span><span style=\"--0:#D6DEEB;--1:#403F53\">(), </span><span style=\"--0:#7FDBCA;--1:#097174\">&amp;</span><span style=\"--0:#D6DEEB;--1:#403F53\">s3.PutObjectInput{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#C5E478;--1:#3C63B3\">aws</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">String</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">.(</span><span style=\"--0:#C792EA;--1:#8D46B4\">string</span><span style=\"--0:#D6DEEB;--1:#403F53\">)),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">Key</span><span style=\"--0:#D6DEEB;--1:#403F53\">:    </span><span style=\"--0:#C5E478;--1:#3C63B3\">aws</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">String</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">key</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"bucketName, err := resource.Get(&quot;Bucket&quot;, &quot;name&quot;)if err != nil {  panic(err)}url, err := presignedClient.PresignPutObject(context.TODO(), &amp;s3.PutObjectInput{  Bucket: aws.String(bucket.(string)),  Key:    aws.String(key),})\"><div></div></button></div></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Bucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">ApiGatewayV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Api</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">route</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET /upload-url</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">go</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [bucket],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;Bucket&quot;);const api = new sst.aws.ApiGatewayV2(&quot;Api&quot;);api.route(&quot;GET /upload-url&quot;, {  handler: &quot;src/&quot;,  runtime: &quot;go&quot;,  link: [bucket],});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-go-lambda-bucket-presigned-url\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-go-dynamodb\"><a href=\"#aws-lambda-go-dynamodb\">AWS Lambda Go DynamoDB</a></h2>\n<p>An example on how to use a Go runtime Lambda with DynamoDB.</p>\n<p>You configure the DynamoDB client.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">github.com/sst/sst/v3/sdk/golang/resource</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">func</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">main</span><span style=\"--0:#D6DEEB;--1:#403F53\">() {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#3C63B3\">cfg</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">config</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">LoadDefaultConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">context</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Background</span><span style=\"--0:#D6DEEB;--1:#403F53\">())</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#82AAFF;--1:#3C63B3\">panic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\"> </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">client</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">dynamodb</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">NewFromConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">cfg</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">tableName</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">resource</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Get</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Table</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#82AAFF;--1:#3C63B3\">panic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\"> </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import (  &quot;github.com/sst/sst/v3/sdk/golang/resource&quot;)func main() {  cfg, err := config.LoadDefaultConfig(context.Background()) if err != nil {   panic(err) } client := dynamodb.NewFromConfig(cfg) tableName, err := resource.Get(&quot;Table&quot;, &quot;name&quot;) if err != nil {   panic(err) }}\"><div></div></button></div></figure></div>\n<p>And make a request to DynamoDB.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C5E478;--1:#3C63B3\">_</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">r</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#C5E478;--1:#3C63B3\">client</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">PutItem</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C5E478;--1:#3C63B3\">ctx</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#7FDBCA;--1:#097174\">&amp;</span><span style=\"--0:#D6DEEB;--1:#403F53\">dynamodb.PutItemInput{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">TableName</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#C5E478;--1:#3C63B3\">tableName</span><span style=\"--0:#D6DEEB;--1:#403F53\">.(</span><span style=\"--0:#C792EA;--1:#8D46B4\">string</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#7FDBCA;--1:#097174\">Item</span><span style=\"--0:#D6DEEB;--1:#403F53\">:      </span><span style=\"--0:#C5E478;--1:#3C63B3\">item</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"_, err = r.client.PutItem(ctx, &amp;dynamodb.PutItemInput{  TableName: tableName.(string),   Item:      item,})\"><div></div></button></div></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">table</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Dynamo</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Table</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">fields: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">PK: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">string</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">SK: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">string</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">primaryIndex: { hashKey: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">PK</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, rangeKey: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">SK</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GoFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">go</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./src</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [table],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const table = new sst.aws.Dynamo(&quot;Table&quot;, {  fields: {    PK: &quot;string&quot;,    SK: &quot;string&quot;,  },  primaryIndex: { hashKey: &quot;PK&quot;, rangeKey: &quot;SK&quot; },});new sst.aws.Function(&quot;GoFunction&quot;, {  url: true,  runtime: &quot;go&quot;,  handler: &quot;./src&quot;,  link: [table],});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-go-lambda-dynamo\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-hono-container-with-redis\"><a href=\"#aws-hono-container-with-redis\">AWS Hono container with Redis</a></h2>\n<p>Creates a hit counter app with Hono and Redis.</p>\n<p>This deploys Hono API as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:3000</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it by:</p>\n<ol>\n<li>\n<p>Using the <code dir=\"auto\">Dockerfile</code> that’s included in this example.</p>\n</li>\n<li>\n<p>This compiles our TypeScript file, so we’ll need add the following to the <code dir=\"auto\">tsconfig.json</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">tsconfig.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">\"compilerOptions\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#809191;--1:#5E6578\">// ...</span></div></div><div class=\"ec-line highlight mark ins\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#075759\">\"outDir\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#d09bdc;--1:#614369\">./dist</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line highlight mark ins\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#075759\">\"exclude\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#d09bdc;--1:#614369\">node_modules</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  &quot;compilerOptions&quot;: {    // ...    &quot;outDir&quot;: &quot;./dist&quot;  },  &quot;exclude&quot;: [&quot;node_modules&quot;]}\"><div></div></button></div></figure></div>\n</li>\n<li>\n<p>Install TypeScript.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">typescript</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--save-dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm install typescript --save-dev\"><div></div></button></div></figure></div>\n</li>\n<li>\n<p>And add a <code dir=\"auto\">build</code> script to our <code dir=\"auto\">package.json</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">package.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">scripts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// ...</span></div></div><div class=\"ec-line highlight ins\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#075759\">\"build\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#d09bdc;--1:#614369\">tsc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"&quot;scripts&quot;: {  // ...  &quot;build&quot;: &quot;tsc&quot;}\"><div></div></button></div></figure></div>\n</li>\n</ol>\n<p>And finally, running <code dir=\"auto\">npx sst deploy --stage production</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-hono-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-hono-streaming\"><a href=\"#aws-hono-streaming\">AWS Hono streaming</a></h2>\n<p>An example on how to enable streaming for Lambda functions using Hono.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">streaming: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  streaming: true}\"><div></div></button></div></figure></div>\n<p>While <code dir=\"auto\">sst dev</code> doesn’t support streaming, we can conditionally enable it on deploy.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handler</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">process</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">env</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SST_LIVE</span><span style=\"--0:#C792EA;--1:#8D46B4\"> ? </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handle</span><span style=\"--0:#D6DEEB;--1:#403F53\">(app)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> : </span><span style=\"--0:#82AAFF;--1:#3C63B3\">streamHandle</span><span style=\"--0:#D6DEEB;--1:#403F53\">(app);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const handler = process.env.SST_LIVE ? handle(app) : streamHandle(app);\"><div></div></button></div></figure></div>\n<p>This will return the standard handler for <code dir=\"auto\">sst dev</code>.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Streaming is currently not supported in <code dir=\"auto\">sst dev</code>.</p></section></aside>\n<p>To test this in your terminal, use the <code dir=\"auto\">curl</code> command with the <code dir=\"auto\">--no-buffer</code> option.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">curl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><mark><span style=\"--0:#82AAFF;--1:#335497\">--no-buffer</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">https://u3dyblk457ghskwbmzrbylpxoi0ayrbb.lambda-url.us-east-1.on.aws</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"curl --no-buffer https://u3dyblk457ghskwbmzrbylpxoi0ayrbb.lambda-url.us-east-1.on.aws\"><div></div></button></div></figure></div>\n<p>Here we are using a Function URL directly because API Gateway doesn’t support streaming.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">hono</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Hono</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">streaming: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">15 minutes</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">api: hono</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const hono = new sst.aws.Function(&quot;Hono&quot;, {  url: true,  streaming: true,  timeout: &quot;15 minutes&quot;,  handler: &quot;index.handler&quot;,});return {  api: hono.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-hono-steam\">full example</a>.</p>\n<hr>\n<h2 id=\"iam-permissions-boundaries\"><a href=\"#iam-permissions-boundaries\">IAM permissions boundaries</a></h2>\n<p>Use permissions boundaries to set the maximum permissions for all IAM roles that’ll be\ncreated in your app.</p>\n<p>In this example, the Function has the <code dir=\"auto\">s3:ListAllMyBuckets</code> and <code dir=\"auto\">sqs:ListQueues</code>\npermissions. However, we create a permissions boundary that only allows <code dir=\"auto\">s3:ListAllMyBuckets</code>.\nAnd we apply it to all Roles in the app using the global\n<a href=\"/docs/reference/global/#transform\"><code dir=\"auto\">$transform</code></a>.</p>\n<p>As a result, the Function is only allowed to list S3 buckets. If you open the deployed URL,\nyou’ll see that the SQS list call fails.</p>\n<p>Learn more about <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html\">AWS IAM permissions boundaries</a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a permission boundary</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">permissionsBoundary</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">iam</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Policy</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPermissionsBoundary</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">policy: </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">iam</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getPolicyDocumentOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">statements:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">actions: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:ListAllMyBuckets</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">resources: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">json</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Apply the boundary to all roles</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">$transform</span><span style=\"--0:#D6DEEB;--1:#403F53\">(aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">iam</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">Role</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">args</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">permissionsBoundary</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> permissionsBoundary;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// The boundary automatically applies to this Function's role</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">permissions:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">actions: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">s3:ListAllMyBuckets</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sqs:ListQueues</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">resources: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Create a permission boundaryconst permissionsBoundary = new aws.iam.Policy(&quot;MyPermissionsBoundary&quot;, {  policy: aws.iam.getPolicyDocumentOutput({    statements: [      {        actions: [&quot;s3:ListAllMyBuckets&quot;],        resources: [&quot;*&quot;],      },    ],  }).json,});// Apply the boundary to all roles$transform(aws.iam.Role, (args) => {  args.permissionsBoundary = permissionsBoundary;});// The boundary automatically applies to this Function's roleconst app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.handler&quot;,  permissions: [    {      actions: [&quot;s3:ListAllMyBuckets&quot;, &quot;sqs:ListQueues&quot;],      resources: [&quot;*&quot;],    },  ],  url: true,});return {  app: app.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-iam-permission-boundary\">full example</a>.</p>\n<hr>\n<h2 id=\"current-aws-account\"><a href=\"#current-aws-account\">Current AWS account</a></h2>\n<p>You can use the <code dir=\"auto\">aws.getXXXXOutput()</code> provider functions to get info about the current\nAWS account.\nLearn more about <a href=\"/docs/providers/#functions\">provider functions</a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">region: aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getRegionOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">account: aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getCallerIdentityOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">({})</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">accountId</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"return {  region: aws.getRegionOutput().name,  account: aws.getCallerIdentityOutput({}).accountId,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-info\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-jsx-email\"><a href=\"#aws-jsx-email\">AWS JSX Email</a></h2>\n<p>Uses <a href=\"https://jsx.email\">JSX Email</a> and the <code dir=\"auto\">Email</code> component to design and send emails.</p>\n<p>To test this example, change the <code dir=\"auto\">sst.config.ts</code> to use your own email address.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">sender: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">email@example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sender: &quot;email@example.com&quot;\"><div></div></button></div></figure></div>\n<p>Then run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm installnpx sst dev\"><div></div></button></div></figure></div>\n<p>You’ll get an email from AWS asking you to confirm your email address. Click the link to\nverify it.</p>\n<p>Next, go to the URL in the <code dir=\"auto\">sst dev</code> CLI output. You should now receive an email rendered\nusing JSX Email.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { Template } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./templates/email</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">await</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">render</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Template</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">email: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">spongebob@example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Spongebob Squarepants</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}))</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import { Template } from &quot;./templates/email&quot;;await render(Template({  email: &quot;spongebob@example.com&quot;,  name: &quot;Spongebob Squarepants&quot;}))\"><div></div></button></div></figure></div>\n<p>Once you are ready to go to production, you can:</p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ses/latest/dg/request-production-access.html\">Request production access</a> for SES</li>\n<li>And <a href=\"/docs/component/aws/email/\">use your domain</a> to send emails</li>\n</ul>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">email</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Email</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyEmail</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">sender: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">email@example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [email]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">api: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const email = new sst.aws.Email(&quot;MyEmail&quot;, {  sender: &quot;email@example.com&quot;,});const api = new sst.aws.Function(&quot;MyApi&quot;, {  handler: &quot;index.handler&quot;,  link: [email],  url: true,});return {  api: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-jsx-email\">full example</a>.</p>\n<hr>\n<h2 id=\"kinesis-streams\"><a href=\"#kinesis-streams\">Kinesis streams</a></h2>\n<p>Create a Kinesis stream, and subscribe to it with a function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">stream</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">KinesisStream</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyStream</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a function subscribing to all events</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">stream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">AllSub</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.all</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a function subscribing to events of `bar` type</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">stream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">FilteredSub</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.filtered</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">filters: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">data: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">type: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bar</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [stream]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">stream: stream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const stream = new sst.aws.KinesisStream(&quot;MyStream&quot;);// Create a function subscribing to all eventsstream.subscribe(&quot;AllSub&quot;, &quot;subscriber.all&quot;);// Create a function subscribing to events of `bar` typestream.subscribe(&quot;FilteredSub&quot;, &quot;subscriber.filtered&quot;, {  filters: [    {      data: {        type: [&quot;bar&quot;],      },    },  ],});const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;publisher.handler&quot;,  link: [stream],  url: true,});return {  app: app.url,  stream: stream.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-kinesis-stream\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-go\"><a href=\"#aws-lambda-go\">AWS Lambda Go</a></h2>\n<p>This example shows how to use the <a href=\"https://golang.org/\"><code dir=\"auto\">go</code></a> runtime in your Lambda\nfunctions.</p>\n<p>Our Go function is in the <code dir=\"auto\">src</code> directory and we point to it in our function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">go</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [bucket],</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">./src</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  runtime: &quot;go&quot;,  link: [bucket],  handler: &quot;./src&quot;,});\"><div></div></button></div></figure></div>\n<p>We are also linking it to an S3 bucket. We can reference the bucket in our function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">func</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handler</span><span style=\"--0:#D6DEEB;--1:#403F53\">() (</span><span style=\"--0:#C792EA;--1:#8D46B4\">string</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C792EA;--1:#8D46B4\">error</span><span style=\"--0:#D6DEEB;--1:#403F53\">) {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C5E478;--1:#335497\">bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#335497\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#773b98\">:=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#335497\">resource</span><span style=\"--0:#D6DEEB;--1:#403F53\">.</span><span style=\"--0:#82AAFF;--1:#335497\">Get</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">name</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">if</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#C5E478;--1:#3C63B3\">err</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">.(</span><span style=\"--0:#C792EA;--1:#8D46B4\">string</span><span style=\"--0:#D6DEEB;--1:#403F53\">), </span><span style=\"--0:#FF5874;--1:#A54A4A\">nil</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"func handler() (string, error) {  bucket, err := resource.Get(&quot;MyBucket&quot;, &quot;name&quot;)  if err != nil {    return &quot;&quot;, err  }  return bucket.(string), nil}\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">resource.Get</code> function is from the SST Go SDK.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/main.go</span></figcaption><pre data-language=\"go\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> (</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">github.com/sst/sst/v3/sdk/golang/resource</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import (  &quot;github.com/sst/sst/v3/sdk/golang/resource&quot;)\"><div></div></button></div></figure></div>\n<p>The <code dir=\"auto\">sst dev</code> CLI also supports running your Go function <a href=\"/docs/live\"><em>Live</em></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">go</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [bucket],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./src</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  runtime: &quot;go&quot;,  link: [bucket],  handler: &quot;./src&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-lambda-golang\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-retry-with-queues\"><a href=\"#aws-lambda-retry-with-queues\">AWS Lambda retry with queues</a></h2>\n<p>An example on how to retry Lambda invocations using SQS queues.</p>\n<p>Create a SQS retry queue which will be set as the destination for the Lambda function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/retry.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">retryQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bus</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bus</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bus</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">bus</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">busSubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/bus-subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">environment: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">RETRIES: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#809191;--1:#5E6578\">// set the number of retries</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [retryQueue]</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#809191;--1:#5E6578\">// so the function can send messages to the retry queue</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">lambda</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">FunctionEventInvokeConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">eventConfig</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">functionName: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">([busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">nodes</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">function</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">[</span><span style=\"--0:#D7DBE0\">name</span><span style=\"--0:#D6DEEB\">]</span></span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> name,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">maximumRetryAttempts: </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#809191;--1:#5E6578\">// default is 2, must be between 0 and 2</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">destinationConfig: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">onFailure: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">destination: retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const retryQueue = new sst.aws.Queue(&quot;retryQueue&quot;);const bus = new sst.aws.Bus(&quot;bus&quot;);const busSubscriber = bus.subscribe(&quot;busSubscriber&quot;, {  handler: &quot;src/bus-subscriber.handler&quot;,  environment: {    RETRIES: &quot;2&quot;, // set the number of retries  },  link: [retryQueue], // so the function can send messages to the retry queue});new aws.lambda.FunctionEventInvokeConfig(&quot;eventConfig&quot;, {  functionName: $resolve([busSubscriber.nodes.function.name]).apply(    ([name]) => name,  ),  maximumRetryAttempts: 2, // default is 2, must be between 0 and 2  destinationConfig: {    onFailure: {      destination: retryQueue.arn,    },  },});\"><div></div></button></div></figure></div>\n<p>Create a bus subscriber which will publish messages to the bus. Include a DLQ for messages that continue to fail.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">dlq</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/retry.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">nodes</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">function</span><span style=\"--0:#D6DEEB;--1:#403F53\">, retryQueue, dlq],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">30 seconds</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">environment: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">RETRIER_QUEUE_URL: retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">permissions: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">actions: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda:GetFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda:InvokeFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">resources: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">arn:aws:lambda:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getRegionOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getCallerIdentityOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">accountId</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:function:*</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">transform: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">function: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">deadLetterConfig: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">targetArn: dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const dlq = new sst.aws.Queue(&quot;dlq&quot;);retryQueue.subscribe({  handler: &quot;src/retry.handler&quot;,  link: [busSubscriber.nodes.function, retryQueue, dlq],  timeout: &quot;30 seconds&quot;,  environment: {    RETRIER_QUEUE_URL: retryQueue.url,  },  permissions: [    {      actions: [&quot;lambda:GetFunction&quot;, &quot;lambda:InvokeFunction&quot;],      resources: [        $interpolate`arn:aws:lambda:${aws.getRegionOutput().name}:${          aws.getCallerIdentityOutput().accountId        }:function:*`,      ],    },  ],  transform: {    function: {      deadLetterConfig: {        targetArn: dlq.arn,      },    },  },});\"><div></div></button></div></figure></div>\n<p>The Retry function will read mesaages and send back to the queue to be retried with a backoff.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/retry.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handler</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">SQSHandler</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = async </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">evt</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">for </span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">record</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">of</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">evt</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">Records</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">JSON</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">parse</span><span style=\"--0:#D6DEEB;--1:#403F53\">(record</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">body</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">body</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">functionName</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">requestContext</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">functionArn</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">replace</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">:$LATEST</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">split</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">:</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">pop</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">if </span><span style=\"--0:#D6DEEB;--1:#403F53\">(parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">responsePayload</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">attempt</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">(parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">requestPayload</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">attempts</span><span style=\"--0:#C792EA;--1:#8D46B4\"> || </span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> + </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">info</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = await </span><span style=\"--0:#D6DEEB;--1:#403F53\">lambda</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">send</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">GetFunctionCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">FunctionName: </span><span style=\"--0:#D6DEEB;--1:#403F53\">functionName</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">max</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">Number</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">parseInt</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#D6DEEB;--1:#403F53\">info</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">Configuration</span><span style=\"--0:#C792EA;--1:#8D46B4\">?.</span><span style=\"--0:#FAF39F;--1:#111111\">Environment</span><span style=\"--0:#C792EA;--1:#8D46B4\">?.</span><span style=\"--0:#FAF39F;--1:#111111\">Variables</span><span style=\"--0:#C792EA;--1:#8D46B4\">?.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">RETRIES</span><span style=\"--0:#C792EA;--1:#8D46B4\"> || </span><span style=\"--0:#D9F5DD;--1:#111111\">\"\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> || </span><span style=\"--0:#F78C6C;--1:#AA0982\">0</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">max retries</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D6DEEB;--1:#403F53\">max)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">if </span><span style=\"--0:#D6DEEB;--1:#403F53\">(attempt</span><span style=\"--0:#C792EA;--1:#8D46B4\"> &gt; </span><span style=\"--0:#D6DEEB;--1:#403F53\">max)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">giving up after </span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">attempt</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\"> retries</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#809191;--1:#5E6578\">// send to dlq</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">await </span><span style=\"--0:#D6DEEB;--1:#403F53\">sqs</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">send</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">SendMessageCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">QueueUrl: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">MessageBody: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">JSON</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">stringify</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">              </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">requestPayload: </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">requestPayload</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">              </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">requestContext: </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">requestContext</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">              </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">responsePayload: </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">responsePayload</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">return;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">seconds</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">Math</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">min</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Math</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">pow</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D6DEEB;--1:#403F53\">attempt)</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#F78C6C;--1:#AA0982\">900</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">delaying retry by </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">seconds</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">seconds for attempt</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">attempt</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">requestPayload</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">attempts</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">attempt</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">await </span><span style=\"--0:#D6DEEB;--1:#403F53\">sqs</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">send</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">SendMessageCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">QueueUrl: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">DelaySeconds: </span><span style=\"--0:#D6DEEB;--1:#403F53\">seconds</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">MessageBody: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">JSON</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">stringify</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">requestPayload: </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">requestPayload</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">requestContext: </span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">requestContext</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">if </span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">!</span><span style=\"--0:#D6DEEB;--1:#403F53\">parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">responsePayload</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">console</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">log</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">triggering function</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">try {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">await </span><span style=\"--0:#D6DEEB;--1:#403F53\">lambda</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">send</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">InvokeCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">InvocationType: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Event</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">Payload: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Buffer</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#82AAFF;--1:#3C63B3\">JSON</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">stringify</span><span style=\"--0:#D6DEEB;--1:#403F53\">(parsed</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">requestPayload</span><span style=\"--0:#D6DEEB;--1:#403F53\">))</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">            </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">FunctionName: </span><span style=\"--0:#D6DEEB;--1:#403F53\">functionName</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">} catch </span><span style=\"--0:#D6DEEB;--1:#403F53\">(e)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">if </span><span style=\"--0:#D6DEEB;--1:#403F53\">(e</span><span style=\"--0:#C792EA;--1:#8D46B4\"> instanceof </span><span style=\"--0:#FFCB8B;--1:#111111\">ResourceNotFoundException</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">          </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">return;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">        </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">throw </span><span style=\"--0:#D6DEEB;--1:#403F53\">e</span><span style=\"--0:#C792EA;--1:#8D46B4\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const handler: SQSHandler = async (evt) => {  for (const record of evt.Records) {    const parsed = JSON.parse(record.body);    console.log(&quot;body&quot;, parsed);    const functionName = parsed.requestContext.functionArn      .replace(&quot;:$LATEST&quot;, &quot;&quot;)      .split(&quot;:&quot;)      .pop();    if (parsed.responsePayload) {      const attempt = (parsed.requestPayload.attempts || 0) + 1;      const info = await lambda.send(        new GetFunctionCommand({          FunctionName: functionName,        }),      );      const max =        Number.parseInt(          info.Configuration?.Environment?.Variables?.RETRIES || &quot;&quot;,        ) || 0;      console.log(&quot;max retries&quot;, max);      if (attempt > max) {        console.log(`giving up after ${attempt} retries`);        // send to dlq        await sqs.send(          new SendMessageCommand({            QueueUrl: Resource.dlq.url,            MessageBody: JSON.stringify({              requestPayload: parsed.requestPayload,              requestContext: parsed.requestContext,              responsePayload: parsed.responsePayload,            }),          }),        );        return;      }      const seconds = Math.min(Math.pow(2, attempt), 900);      console.log(        &quot;delaying retry by &quot;,        seconds,        &quot;seconds for attempt&quot;,        attempt,      );      parsed.requestPayload.attempts = attempt;      await sqs.send(        new SendMessageCommand({          QueueUrl: Resource.retryQueue.url,          DelaySeconds: seconds,          MessageBody: JSON.stringify({            requestPayload: parsed.requestPayload,            requestContext: parsed.requestContext,          }),        }),      );    }    if (!parsed.responsePayload) {      console.log(&quot;triggering function&quot;);      try {        await lambda.send(          new InvokeCommand({            InvocationType: &quot;Event&quot;,            Payload: Buffer.from(JSON.stringify(parsed.requestPayload)),            FunctionName: functionName,          }),        );      } catch (e) {        if (e instanceof ResourceNotFoundException) {          return;        }        throw e;      }    }  }};\"><div></div></button></div></figure></div>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">dlq</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">retryQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bus</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bus</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bus</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">bus</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">busSubscriber</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/bus-subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">environment: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">RETRIES: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [retryQueue]</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#809191;--1:#5E6578\">// so the function can send messages to the queue</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">publisher</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [bus]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">lambda</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">FunctionEventInvokeConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">eventConfig</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">functionName: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">([busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">nodes</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">function</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">[</span><span style=\"--0:#D7DBE0\">name</span><span style=\"--0:#D6DEEB\">]</span></span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> name,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">maximumRetryAttempts: </span><span style=\"--0:#F78C6C;--1:#AA0982\">1</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">destinationConfig: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">onFailure: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">destination: retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">src/retry.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [busSubscriber</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">nodes</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">function</span><span style=\"--0:#D6DEEB;--1:#403F53\">, retryQueue, dlq],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">30 seconds</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">environment: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">RETRIER_QUEUE_URL: retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">permissions: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">actions: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda:GetFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda:InvokeFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">resources: [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">arn:aws:lambda:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getRegionOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">getCallerIdentityOutput</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">accountId</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:function:*</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">transform: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">function: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">deadLetterConfig: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">targetArn: dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">publisher: publisher</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dlq: dlq</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">retryQueue: retryQueue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const dlq = new sst.aws.Queue(&quot;dlq&quot;);const retryQueue = new sst.aws.Queue(&quot;retryQueue&quot;);const bus = new sst.aws.Bus(&quot;bus&quot;);const busSubscriber = bus.subscribe(&quot;busSubscriber&quot;, {  handler: &quot;src/bus-subscriber.handler&quot;,  environment: {    RETRIES: &quot;2&quot;,  },  link: [retryQueue], // so the function can send messages to the queue});const publisher = new sst.aws.Function(&quot;publisher&quot;, {  handler: &quot;src/publisher.handler&quot;,  link: [bus],  url: true,});new aws.lambda.FunctionEventInvokeConfig(&quot;eventConfig&quot;, {  functionName: $resolve([busSubscriber.nodes.function.name]).apply(    ([name]) => name,  ),  maximumRetryAttempts: 1,  destinationConfig: {    onFailure: {      destination: retryQueue.arn,    },  },});retryQueue.subscribe({  handler: &quot;src/retry.handler&quot;,  link: [busSubscriber.nodes.function, retryQueue, dlq],  timeout: &quot;30 seconds&quot;,  environment: {    RETRIER_QUEUE_URL: retryQueue.url,  },  permissions: [    {      actions: [&quot;lambda:GetFunction&quot;, &quot;lambda:InvokeFunction&quot;],      resources: [        $interpolate`arn:aws:lambda:${aws.getRegionOutput().name}:${          aws.getCallerIdentityOutput().accountId        }:function:*`,      ],    },  ],  transform: {    function: {      deadLetterConfig: {        targetArn: dlq.arn,      },    },  },});return {  publisher: publisher.url,  dlq: dlq.url,  retryQueue: retryQueue.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-lambda-retry-with-queues\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-streaming\"><a href=\"#aws-lambda-streaming\">AWS Lambda streaming</a></h2>\n<p>An example on how to enable streaming for Lambda functions.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">streaming: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  streaming: true}\"><div></div></button></div></figure></div>\n<p>While <code dir=\"auto\">sst dev</code> doesn’t support streaming, you can use the\n<a href=\"https://github.com/astuyve/lambda-stream\"><code dir=\"auto\">lambda-stream</code></a> package to test locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">lambda-stream</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm install lambda-stream\"><div></div></button></div></figure></div>\n<p>Then, you can use the <code dir=\"auto\">streamifyResponse</code> function to wrap your handler:</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { APIGatewayProxyEventV2 } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">aws-lambda</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { streamifyResponse, ResponseStream } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda-stream</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handler</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">streamifyResponse</span><span style=\"--0:#D6DEEB;--1:#403F53\">(myHandler);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">async</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">function</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">myHandler</span><span style=\"--0:#D9F5DD;--1:#111111\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--1:#403F53\">  </span></span><span style=\"--0:#D7DBE0;--1:#403F53\">_event</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">APIGatewayProxyEventV2</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--1:#403F53\">  </span></span><span style=\"--0:#D7DBE0;--1:#403F53\">responseStream</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">ResponseStream</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">Promise</span><span style=\"--0:#D6DEEB;--1:#403F53\">&lt;</span><span style=\"--0:#C5E478;--1:#3C63B3\">void</span><span style=\"--0:#D6DEEB;--1:#403F53\">&gt; {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">Promise</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--1:#403F53\"><span style=\"--0:#D7DBE0\">resolve</span><span style=\"--0:#D6DEEB\">, </span><span style=\"--0:#D7DBE0\">_reject</span></span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">responseStream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">setContentType</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">text/plain</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">responseStream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">write</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">Hello</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">setTimeout</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">()</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">responseStream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">write</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\"> World</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">responseStream</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">end</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#82AAFF;--1:#3C63B3\">resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span><span style=\"--0:#7690A6;--1:#4F687D\">,</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">3000</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import { APIGatewayProxyEventV2 } from &quot;aws-lambda&quot;;import { streamifyResponse, ResponseStream } from &quot;lambda-stream&quot;;export const handler = streamifyResponse(myHandler);async function myHandler(  _event: APIGatewayProxyEventV2,  responseStream: ResponseStream): Promise<void> {  return new Promise((resolve, _reject) => {    responseStream.setContentType('text/plain')    responseStream.write('Hello')    setTimeout(() => {      responseStream.write(' World')      responseStream.end()      resolve()    }, 3000)  })}\"><div></div></button></div></figure></div>\n<p>When deployed, this will use the <code dir=\"auto\">awslambda.streamifyResponse</code>.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Streaming is currently not supported in <code dir=\"auto\">sst dev</code>.</p></section></aside>\n<p>To test this in your terminal, use the <code dir=\"auto\">curl</code> command with the <code dir=\"auto\">--no-buffer</code> option.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">curl</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><mark><span style=\"--0:#82AAFF;--1:#335497\">--no-buffer</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">https://u3dyblk457ghskwbmzrbylpxoi0ayrbb.lambda-url.us-east-1.on.aws</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"curl --no-buffer https://u3dyblk457ghskwbmzrbylpxoi0ayrbb.lambda-url.us-east-1.on.aws\"><div></div></button></div></figure></div>\n<p>Here we are using a Function URL directly because API Gateway doesn’t support streaming.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">fn</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">streaming: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">15 minutes</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: fn</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const fn = new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  streaming: true,  timeout: &quot;15 minutes&quot;,  handler: &quot;index.handler&quot;,});return {  url: fn.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-lambda-stream\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-lambda-in-a-vpc\"><a href=\"#aws-lambda-in-a-vpc\">AWS Lambda in a VPC</a></h2>\n<p>You can use SST to locally work on Lambda functions that are in a VPC. To do so, you’ll\nneed to enable <code dir=\"auto\">bastion</code> and <code dir=\"auto\">nat</code> on the <code dir=\"auto\">Vpc</code> component.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">, nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> });</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true, nat: &quot;managed&quot; });\"><div></div></button></div></figure></div>\n<p>The NAT gateway is necessary to allow your Lambda function to connect to the internet. While,\nthe bastion host is necessary for your local machine to be able to tunnel to the VPC.</p>\n<p>You’ll need to install the tunnel, if you haven’t done this before.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create the network interface on your machine. You’ll only need to do\nthis once.</p>\n<p>Now you can run <code dir=\"auto\">sst dev</code>, your function can access resources in the VPC. For example, here\nwe are connecting to a Redis cluster.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">[{ host: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">, port: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">dnsLookup</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">address</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D7DBE0;--1:#403F53\">callback</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; </span><span style=\"--0:#82AAFF;--1:#3C63B3\">callback</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#FF5874;--1:#A54A4A\">null</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D6DEEB;--1:#403F53\">address)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">redisOptions: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">tls: {},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">username: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const redis = new Cluster(  [{ host: Resource.MyRedis.host, port: Resource.MyRedis.port }],  {    dnsLookup: (address, callback) => callback(null, address),    redisOptions: {      tls: {},      username: Resource.MyRedis.username,      password: Resource.MyRedis.password,    },  });\"><div></div></button></div></figure></div>\n<p>The Redis cluster is in the same VPC as the function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">, nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [redis]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true, nat: &quot;managed&quot; });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const api = new sst.aws.Function(&quot;MyFunction&quot;, {  vpc,  url: true,  link: [redis],  handler: &quot;index.handler&quot;});return {  url: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-lambda-vpc\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-multi-region\"><a href=\"#aws-multi-region\">AWS multi-region</a></h2>\n<p>To deploy resources to multiple AWS regions, you can create a new provider for the region\nyou want to deploy to.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">provider</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Provider</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyProvider</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { region: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">us-west-2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const provider = new aws.Provider(&quot;MyProvider&quot;, { region: &quot;us-west-2&quot; });\"><div></div></button></div></figure></div>\n<p>And then pass that in to the resource.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, { handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }, { provider });</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Function(&quot;MyFunction&quot;, { handler: &quot;index.handler&quot; }, { provider });\"><div></div></button></div></figure></div>\n<p>If no provider is passed in, the default provider will be used. And if no region is\nspecified, the default region from your credentials will be used.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">east</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyEastFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">provider</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Provider</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWestProvider</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { region: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">us-west-2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">west</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWestFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">{ </span><span style=\"--0:#D6DEEB;--1:#403F53\">provider</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">east: east</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">west: west</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const east = new sst.aws.Function(&quot;MyEastFunction&quot;, {  url: true,  handler: &quot;index.handler&quot;,});const provider = new aws.Provider(&quot;MyWestProvider&quot;, { region: &quot;us-west-2&quot; });const west = new sst.aws.Function(  &quot;MyWestFunction&quot;,  {    url: true,    handler: &quot;index.handler&quot;,  },  { provider });return {  east: east.url,  west: west.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-multi-region\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-nestjs-with-redis\"><a href=\"#aws-nestjs-with-redis\">AWS NestJS with Redis</a></h2>\n<p>Creates a hit counter app with NestJS and Redis.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>You need Node 22.12 or higher for this example to work.</p></section></aside>\n<p>Also make sure you have Node 22.12. Or set the <code dir=\"auto\">--experimental-require-module</code> flag.\nThis’ll allow NestJS to import the SST SDK.</p>\n<p>This deploys NestJS as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run start:dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run start:dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:3000</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it using <code dir=\"auto\">npx sst deploy --stage production</code> using a <code dir=\"auto\">Dockerfile</code>\nthat’s included in the example.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run start:dev</span><span style=\"--0:#D9F5DD;--1:#111111\">'</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc('MyVpc', { bastion: true });const redis = new sst.aws.Redis('MyRedis', { vpc });const cluster = new sst.aws.Cluster('MyCluster', { vpc });new sst.aws.Service('MyService', {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: '80/http', forward: '3000/http' }],  },  dev: {    command: 'npm run start:dev',  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nestjs-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-nextjs-add-behavior\"><a href=\"#aws-nextjs-add-behavior\">AWS Next.js add behavior</a></h2>\n<p>Here’s how to add additional routes or cache behaviors to the CDN of a Next.js app deployed\nwith OpenNext to AWS.</p>\n<p>Specify the path pattern that you want to forward to your new origin. For example, to forward\nall requests to the <code dir=\"auto\">/blog</code> path to a different origin.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">pathPattern: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/blog/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"pathPattern: &quot;/blog/*&quot;\"><div></div></button></div></figure></div>\n<p>And then specify the domain of the new origin.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">domainName: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">blog.example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"domainName: &quot;blog.example.com&quot;\"><div></div></button></div></figure></div>\n<p>We use this to <code dir=\"auto\">transform</code> our site’s CDN and add the additional behaviors.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">blogOrigin</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// The domain of the new origin</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">domainName: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">blog.example.com</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">originId: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">blogCustomOrigin</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">customOriginConfig: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">httpPort: </span><span style=\"--0:#F78C6C;--1:#AA0982\">80</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">httpsPort: </span><span style=\"--0:#F78C6C;--1:#AA0982\">443</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">originSslProtocols:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">TLSv1.2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#809191;--1:#5E6578\">// If HTTPS is supported</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">originProtocolPolicy: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">https-only</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cacheBehavior</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// The path to forward to the new origin</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">pathPattern: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/blog/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">targetOriginId: </span><span style=\"--0:#D6DEEB;--1:#403F53\">blogOrigin</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">originId</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">viewerProtocolPolicy: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">redirect-to-https</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">allowedMethods:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">HEAD</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">OPTIONS</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">cachedMethods:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">GET</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">HEAD</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">forwardedValues: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">queryString: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">cookies: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">all</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">transform: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cdn</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">options</span><span style=\"--0:#7FDBCA;--1:#097174\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#D6DEEB;--1:#403F53\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--1:#111111\"><span style=\"--0:#FFCB8B\">CdnArgs</span><span style=\"--0:#D9F5DD\">)</span></span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">options</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">origins</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">(options</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">origins</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">(</span><span style=\"--0:#D7DBE0\">val</span><span style=\"--0:#D6DEEB\"> </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#7FDBCA;--1:#097174\">...</span><span style=\"--0:#D6DEEB;--1:#403F53\">val, blogOrigin]);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">options</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">orderedCacheBehaviors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">options</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">orderedCacheBehaviors</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">||</span><span style=\"--0:#D6DEEB;--1:#403F53\"> []</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--1:#403F53\"><span style=\"--0:#D6DEEB\">(</span><span style=\"--0:#D7DBE0\">val</span><span style=\"--0:#D6DEEB\"> </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#7FDBCA;--1:#097174\">...</span><span style=\"--0:#D6DEEB;--1:#403F53\">val, cacheBehavior]);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const blogOrigin = {  // The domain of the new origin  domainName: &quot;blog.example.com&quot;,  originId: &quot;blogCustomOrigin&quot;,  customOriginConfig: {    httpPort: 80,    httpsPort: 443,    originSslProtocols: [&quot;TLSv1.2&quot;],    // If HTTPS is supported    originProtocolPolicy: &quot;https-only&quot;,  },};const cacheBehavior = {  // The path to forward to the new origin  pathPattern: &quot;/blog/*&quot;,  targetOriginId: blogOrigin.originId,  viewerProtocolPolicy: &quot;redirect-to-https&quot;,  allowedMethods: [&quot;GET&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;],  cachedMethods: [&quot;GET&quot;, &quot;HEAD&quot;],  forwardedValues: {    queryString: true,    cookies: {      forward: &quot;all&quot;,    },  },};new sst.aws.Nextjs(&quot;MyWeb&quot;, {  transform: {    cdn: (options: sst.aws.CdnArgs) => {      options.origins = $resolve(options.origins).apply(val => [...val, blogOrigin]);      options.orderedCacheBehaviors = $resolve(        options.orderedCacheBehaviors || []      ).apply(val => [...val, cacheBehavior]);    },  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nextjs-add-behavior\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-nextjs-basic-auth\"><a href=\"#aws-nextjs-basic-auth\">AWS Next.js basic auth</a></h2>\n<p>Deploys a simple Next.js app and adds basic auth to it.</p>\n<p>This is useful for dev environments where you want to share your app your team but ensure\nthat it’s not publicly accessible.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>You can use this for all the SSR sites, like Astro, Remix, SvelteKit, etc.</p></section></aside>\n<p>This works by injecting some code into a CloudFront function that checks the basic auth\nheader and matches it against the <code dir=\"auto\">USERNAME</code> and <code dir=\"auto\">PASSWORD</code> secrets.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">injection: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">    </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">if (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">!event.request.headers.authorization</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">|| event.request.headers.authorization.value !== \"Basic </span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">basicAuth</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">       </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">      </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">return {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">statusCode: 401,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">headers: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"www-authenticate\": { value: \"Basic\" }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">      </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">    </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  injection: $interpolate`    if (        !event.request.headers.authorization          || event.request.headers.authorization.value !== &quot;Basic ${basicAuth}&quot;       ) {      return {        statusCode: 401,        headers: {          &quot;www-authenticate&quot;: { value: &quot;Basic&quot; }        }      };    }`,}\"><div></div></button></div></figure></div>\n<p>To deploy this, you need to first set the <code dir=\"auto\">USERNAME</code> and <code dir=\"auto\">PASSWORD</code> secrets.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">secret</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">USERNAME</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">my-username</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">secret</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">PASSWORD</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">my-password</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst secret set USERNAME my-usernamesst secret set PASSWORD my-password\"><div></div></button></div></figure></div>\n<p>If you are deploying this to preview environments, you might want to set the secrets using\nthe <a href=\"/docs/reference/cli#secret\"><code dir=\"auto\">--fallback</code></a> flag.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">USERNAME</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">PASSWORD</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">basicAuth</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">([username</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\">, password</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">[</span><span style=\"--0:#D7DBE0;--1:#403F53\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D7DBE0;--1:#403F53\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">]</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">Buffer</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">username</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">password</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">toString</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">base64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">server: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#809191;--1:#5E6578\">// Don't password protect prod</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">edge: $app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!==</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">production</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">viewerRequest: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">injection: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">            </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">if (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">!event.request.headers.authorization</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                  </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">|| event.request.headers.authorization.value !== \"Basic </span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">basicAuth</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">               </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">return {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">statusCode: 401,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">headers: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                  </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"www-authenticate\": { value: \"Basic\" }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">            </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">undefined</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const username = new sst.Secret(&quot;USERNAME&quot;);const password = new sst.Secret(&quot;PASSWORD&quot;);const basicAuth = $resolve([username.value, password.value]).apply(  ([username, password]) =>    Buffer.from(`${username}:${password}`).toString(&quot;base64&quot;));new sst.aws.Nextjs(&quot;MyWeb&quot;, {  server: {    // Don't password protect prod    edge: $app.stage !== &quot;production&quot;      ? {        viewerRequest: {          injection: $interpolate`            if (                !event.request.headers.authorization                  || event.request.headers.authorization.value !== &quot;Basic ${basicAuth}&quot;               ) {              return {                statusCode: 401,                headers: {                  &quot;www-authenticate&quot;: { value: &quot;Basic&quot; }                }              };            }`,        },      }      : undefined,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nextjs-basic-auth\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-nextjs-container-with-redis\"><a href=\"#aws-nextjs-container-with-redis\">AWS Next.js container with Redis</a></h2>\n<p>Creates a hit counter app with Next.js and Redis.</p>\n<p>This deploys Next.js as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:3000</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it by:</p>\n<ol>\n<li>Setting <code dir=\"auto\">output: \"standalone\"</code> in your <code dir=\"auto\">next.config.mjs</code> file.</li>\n<li>Adding a <code dir=\"auto\">Dockerfile</code> that’s included in this example.</li>\n<li>Running <code dir=\"auto\">npx sst deploy --stage production</code>.</li>\n</ol>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nextjs-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-nextjs-streaming\"><a href=\"#aws-nextjs-streaming\">AWS Next.js streaming</a></h2>\n<p>An example of how to use streaming Next.js RSC. Uses <code dir=\"auto\">Suspense</code> to stream an async component.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">app/page.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;</span><span style=\"--0:#F78C6C;--1:#AA0982\">Suspense</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">fallback</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Loading...</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;</span><span style=\"--0:#F78C6C;--1:#AA0982\">Friends</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> /&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;/</span><span style=\"--0:#F78C6C;--1:#AA0982\">Suspense</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"<Suspense fallback={<div>Loading...</div>}>  <Friends /></Suspense>\"><div></div></button></div></figure></div>\n<p>For this demo we also need to make sure the route is not statically built.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">app/page.tsx</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">dynamic</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">force-dynamic</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export const dynamic = &quot;force-dynamic&quot;;\"><div></div></button></div></figure></div>\n<p>This is deployed with OpenNext, which needs a config to enable streaming.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">open-next.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">default</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">default: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">override: {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">wrapper: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#834442\">aws-lambda-streaming</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export default {  default: {    override: {      wrapper: &quot;aws-lambda-streaming&quot;    }  }};\"><div></div></button></div></figure></div>\n<p>You should see the <em>friends</em> section load after a 3 second delay.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Safari handles streaming differently than other browsers.</p></section></aside>\n<p>Safari uses a <a href=\"https://bugs.webkit.org/show_bug.cgi?id=252413\">different heuristic</a> to\ndetermine when to stream data. You need to render <em>enough</em> initial HTML to trigger streaming.\nThis is typically only a problem for demo apps.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Nextjs(&quot;MyWeb&quot;);\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-nextjs-stream\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-postgres-local\"><a href=\"#aws-postgres-local\">AWS Postgres local</a></h2>\n<p>In this example, we connect to a locally running Postgres instance for dev. While\non deploy, we use RDS.</p>\n<p>We use the <a href=\"https://docs.docker.com/reference/cli/docker/container/run/\"><code dir=\"auto\">docker run</code></a> CLI\nto start a local container with Postgres. You don’t have to use Docker, you can use\nPostgres.app or any other way to run Postgres locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">docker</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--rm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-p</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">5432:5432</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-v</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $(</span><span style=\"--0:#C5E478;--1:#3C63B3\">pwd</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#ECC48D;--1:#3C63B3\">/.sst/storage/postgres:/var/lib/postgresql/data</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_USER=postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_PASSWORD=password</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-e</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">POSTGRES_DB=local</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#ECC48D;--1:#3C63B3\">postgres:16.4</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"docker run \\  --rm \\  -p 5432:5432 \\  -v $(pwd)/.sst/storage/postgres:/var/lib/postgresql/data \\  -e POSTGRES_USER=postgres \\  -e POSTGRES_PASSWORD=password \\  -e POSTGRES_DB=local \\  postgres:16.4\"><div></div></button></div></figure></div>\n<p>The data is saved to the <code dir=\"auto\">.sst/storage</code> directory. So if you restart the dev server, the\ndata will still be there.</p>\n<p>We then configure the <code dir=\"auto\">dev</code> property of the <code dir=\"auto\">Postgres</code> component with the settings for the\nlocal Postgres instance.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">username: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">password</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">database: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">local</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">5432</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"dev: {  username: &quot;postgres&quot;,  password: &quot;password&quot;,  database: &quot;local&quot;,  port: 5432,}\"><div></div></button></div></figure></div>\n<p>By providing the <code dir=\"auto\">dev</code> prop for Postgres, SST will use the local Postgres instance and\nnot deploy a new RDS database when running <code dir=\"auto\">sst dev</code>.</p>\n<p>It also allows us to access the database through a Resource <code dir=\"auto\">link</code> without having to\nconditionally check if we are running locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">pool</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Pool</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">user: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">database</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const pool = new Pool({  host: Resource.MyPostgres.host,  port: Resource.MyPostgres.port,  user: Resource.MyPostgres.username,  password: Resource.MyPostgres.password,  database: Resource.MyPostgres.database,});\"><div></div></button></div></figure></div>\n<p>The above will work in both <code dir=\"auto\">sst dev</code> and <code dir=\"auto\">sst deploy</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">rds</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPostgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">username: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">password: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">password</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">database: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">local</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">localhost</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">5432</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [rds],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;ec2&quot; });const rds = new sst.aws.Postgres(&quot;MyPostgres&quot;, {  dev: {    username: &quot;postgres&quot;,    password: &quot;password&quot;,    database: &quot;local&quot;,    host: &quot;localhost&quot;,    port: 5432,  },  vpc,});new sst.aws.Function(&quot;MyFunction&quot;, {  vpc,  url: true,  link: [rds],  handler: &quot;index.handler&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-postgres-local\">full example</a>.</p>\n<hr>\n<h2 id=\"prisma-in-lambda\"><a href=\"#prisma-in-lambda\">Prisma in Lambda</a></h2>\n<p>To use Prisma in a Lambda function you need to</p>\n<ul>\n<li>Generate the Prisma Client with the right architecture</li>\n<li>Copy the generated client to the function</li>\n<li>Run the function inside a VPC</li>\n</ul>\n<p>You can set the architecture using the <code dir=\"auto\">binaryTargets</code> option in <code dir=\"auto\">prisma/schema.prisma</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">prisma/schema.prisma</span></figcaption><pre data-language=\"prisma\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#616671\">// For x86</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">binaryTargets = [\"native\", \"rhel-openssl-3.0.x\"]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#616671\">// For ARM</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#616671\">// binaryTargets = [\"native\", \"linux-arm64-openssl-3.0.x\"]</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// For x86binaryTargets = [&quot;native&quot;, &quot;rhel-openssl-3.0.x&quot;]// For ARM// binaryTargets = [&quot;native&quot;, &quot;linux-arm64-openssl-3.0.x&quot;]\"><div></div></button></div></figure></div>\n<p>You can also switch to ARM, just make sure to also change the function architecture in your\n<code dir=\"auto\">sst.config.ts</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// For ARM</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">architecture: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">arm64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  // For ARM  architecture: &quot;arm64&quot;}\"><div></div></button></div></figure></div>\n<p>To generate the client, you need to run <code dir=\"auto\">prisma generate</code> when you make changes to the\nschema.</p>\n<p>Since this <a href=\"https://www.prisma.io/docs/orm/more/help-and-troubleshooting/help-articles/vercel-caching-issue#a-custom-postinstall-script\">needs to be done on every deploy</a>, we add a <code dir=\"auto\">postinstall</code> script to the <code dir=\"auto\">package.json</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">package.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">scripts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">\"postinstall\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">prisma generate</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"&quot;scripts&quot;: {  &quot;postinstall&quot;: &quot;prisma generate&quot;}\"><div></div></button></div></figure></div>\n<p>This runs the command on <code dir=\"auto\">npm install</code>.</p>\n<p>We then need to copy the generated client to the function when we deploy.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">copyFiles: [{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node_modules/.prisma/client/</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  copyFiles: [{ from: &quot;node_modules/.prisma/client/&quot; }]}\"><div></div></button></div></figure></div>\n<p>Our function also needs to run inside a VPC, since Prisma doesn’t support the Data API.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  vpc}\"><div></div></button></div></figure></div>\n<h4 id=\"prisma-in-serverless-environments\"><a href=\"#prisma-in-serverless-environments\">Prisma in serverless environments</a></h4>\n<p>Prisma is <a href=\"https://www.prisma.io/docs/orm/prisma-client/setup-and-configuration/databases-connections#serverless-environments-faas\">not great in serverless environments</a>. For a couple of reasons:</p>\n<ol>\n<li>It doesn’t support Data API, so you need to manage the connection pool on your own.</li>\n<li>Without the Data API, your functions need to run inside a VPC.\n<ul>\n<li>You cannot use <code dir=\"auto\">sst dev</code> without <a href=\"/docs/live#using-a-vpc\">connecting to the VPC</a>.</li>\n</ul>\n</li>\n<li>Due to the internal architecture of their client, it’s also has slower cold starts.</li>\n</ol>\n<p>Instead we recommend using <a href=\"https://orm.drizzle.team\">Drizzle</a>. This example is here for\nreference for people that are already using Prisma.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">rds</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPostgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [rds]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// For ARM</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// architecture: \"arm64\",</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">copyFiles:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node_modules/.prisma/client/</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">api: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;managed&quot; });const rds = new sst.aws.Postgres(&quot;MyPostgres&quot;, { vpc });const api = new sst.aws.Function(&quot;MyApi&quot;, {  vpc,  url: true,  link: [rds],  // For ARM  // architecture: &quot;arm64&quot;,  handler: &quot;index.handler&quot;,  copyFiles: [{ from: &quot;node_modules/.prisma/client/&quot; }],});return {  api: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-prisma-lambda\">full example</a>.</p>\n<hr>\n<h2 id=\"puppeteer-in-lambda\"><a href=\"#puppeteer-in-lambda\">Puppeteer in Lambda</a></h2>\n<p>To use Puppeteer in a Lambda function you need:</p>\n<ol>\n<li><a href=\"https://www.npmjs.com/package/puppeteer-core\"><code dir=\"auto\">puppeteer-core</code></a></li>\n<li>Chromium\n<ul>\n<li>In <code dir=\"auto\">sst dev</code>, we’ll use a locally installed Chromium version.</li>\n<li>In <code dir=\"auto\">sst deploy</code>, we’ll use the <a href=\"https://github.com/sparticuz/chromium\"><code dir=\"auto\">@sparticuz/chromium</code></a> package. It comes with a pre-built binary for Lambda.</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"chromium-version\"><a href=\"#chromium-version\">Chromium version</a></h4>\n<p>Since Puppeteer has a preferred version of Chromium, we’ll need to check the version of\nChrome that a given version of Puppeteer supports. Head over to the\n<a href=\"https://pptr.dev/chromium-support\">Puppeteer’s Chromium Support page</a> and check which\nversions work together.</p>\n<p>For example, Puppeteer v23.1.1 supports Chrome for Testing 127.0.6533.119. So, we’ll use the\nv127 of <code dir=\"auto\">@sparticuz/chromium</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">puppeteer-core@23.1.1</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">@sparticuz/chromium@127.0.0</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm install puppeteer-core@23.1.1 @sparticuz/chromium@127.0.0\"><div></div></button></div></figure></div>\n<h4 id=\"install-chromium-locally\"><a href=\"#install-chromium-locally\">Install Chromium locally</a></h4>\n<p>To use this locally, you’ll need to install Chromium.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">@puppeteer/browsers</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">chromium@latest</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--path</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">/tmp/localChromium</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx @puppeteer/browsers install chromium@latest --path /tmp/localChromium\"><div></div></button></div></figure></div>\n<p>Once installed you’ll see the location of the Chromium binary, <code dir=\"auto\">/tmp/localChromium/chromium/mac_arm-1350406/chrome-mac/Chromium.app/Contents/MacOS/Chromium</code>.</p>\n<p>Update this in your Lambda function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// This is the path to the local Chromium binary</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">YOUR_LOCAL_CHROMIUM_PATH</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/tmp/localChromium/chromium/mac_arm-1350406/chrome-mac/Chromium.app/Contents/MacOS/Chromium</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// This is the path to the local Chromium binaryconst YOUR_LOCAL_CHROMIUM_PATH = &quot;/tmp/localChromium/chromium/mac_arm-1350406/chrome-mac/Chromium.app/Contents/MacOS/Chromium&quot;;\"><div></div></button></div></figure></div>\n<p>You’ll notice we are using the right binary with the <code dir=\"auto\">SST_DEV</code> environment variable.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">browser</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = await </span><span style=\"--0:#D6DEEB;--1:#403F53\">puppeteer</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">launch</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">args: </span><span style=\"--0:#D6DEEB;--1:#403F53\">chromium</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">defaultViewport: </span><span style=\"--0:#D6DEEB;--1:#403F53\">chromium</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">defaultViewport</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">executablePath: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">process</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">env</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#82AAFF;--1:#335497\">SST_DEV</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">    </span></span><span style=\"--0:#C792EA\">? </span></span><span style=\"--0:#82AAFF;--1:#335497\">YOUR_LOCAL_CHROMIUM_PATH</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">    </span></span><span style=\"--0:#C792EA\">: await </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">chromium</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#82AAFF;--1:#335497\">executablePath</span><span style=\"--0:#D6DEEB;--1:#403F53\">()</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">headless: </span><span style=\"--0:#D6DEEB;--1:#403F53\">chromium</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">headless</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const browser = await puppeteer.launch({  args: chromium.args,  defaultViewport: chromium.defaultViewport,  executablePath: process.env.SST_DEV    ? YOUR_LOCAL_CHROMIUM_PATH    : await chromium.executablePath(),  headless: chromium.headless,});\"><div></div></button></div></figure></div>\n<h4 id=\"deploy\"><a href=\"#deploy\">Deploy</a></h4>\n<p>We don’t need a layer to deploy this because <code dir=\"auto\">@sparticuz/chromium</code> comes with a pre-built\nbinary for Lambda.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>As of writing this, <code dir=\"auto\">arm64</code> is not supported by <code dir=\"auto\">@sparticuz/chromium</code>.</p></section></aside>\n<p>We just need to set it in the <a href=\"/docs/component/aws/function#nodejs-install\"><code dir=\"auto\">nodejs.install</code></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">nodejs: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">install: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">@sparticuz/chromium</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  nodejs: {    install: [&quot;@sparticuz/chromium&quot;]  }}\"><div></div></button></div></figure></div>\n<p>And on deploy, SST will use the right binary.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>You don’t need to use a Lambda layer to use Puppeteer.</p></section></aside>\n<p>We are giving our function more memory and a longer timeout since running Puppeteer can\ntake a while.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">memory: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">2 GB</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">timeout: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">15 minutes</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">nodejs: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">install:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">@sparticuz/chromium</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const api = new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  memory: &quot;2 GB&quot;,  timeout: &quot;15 minutes&quot;,  handler: &quot;index.handler&quot;,  nodejs: {    install: [&quot;@sparticuz/chromium&quot;],  },});return {  url: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-puppeteer\">full example</a>.</p>\n<hr>\n<h2 id=\"subscribe-to-queues-1\"><a href=\"#subscribe-to-queues-1\">Subscribe to queues</a></h2>\n<p>Create an SQS queue, subscribe to it, and publish to it from a function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [queue]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">queue: queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const queue = new sst.aws.Queue(&quot;MyQueue&quot;);queue.subscribe(&quot;subscriber.handler&quot;);const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;publisher.handler&quot;,  link: [queue],  url: true,});return {  app: app.url,  queue: queue.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-queue\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-redis-local\"><a href=\"#aws-redis-local\">AWS Redis local</a></h2>\n<p>In this example, we connect to a local Docker Redis instance for dev. While on deploy, we use\nRedis ElastiCache.</p>\n<p>We use the <a href=\"https://docs.docker.com/reference/cli/docker/container/run/\"><code dir=\"auto\">docker run</code></a> CLI\nto start a local Redis server. You don’t have to use Docker, you can run it locally any way\nyou want.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">docker</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--rm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-p</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">6379:6379</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#82AAFF;--1:#3C63B3\">-v</span><span style=\"--0:#D6DEEB;--1:#403F53\"> $(</span><span style=\"--0:#C5E478;--1:#3C63B3\">pwd</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#ECC48D;--1:#3C63B3\">/.sst/storage/redis:/data</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#F78C6C;--1:#AA0982\">\\</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#ECC48D;--1:#3C63B3\">redis:latest</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"docker run \\  --rm \\  -p 6379:6379 \\  -v $(pwd)/.sst/storage/redis:/data \\  redis:latest\"><div></div></button></div></figure></div>\n<p>The data is persisted to the <code dir=\"auto\">.sst/storage</code> directory. So if you restart the dev server,\nthe data will still be there.</p>\n<p>We then configure the <code dir=\"auto\">dev</code> property of the <code dir=\"auto\">Redis</code> component with the settings for the\nlocal Redis server.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">localhost</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">6379</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"dev: {  host: &quot;localhost&quot;,  port: 6379}\"><div></div></button></div></figure></div>\n<p>By providing the <code dir=\"auto\">dev</code> prop for Redis, SST will use the local Redis server and\nnot deploy a new Redis ElastiCache cluster when running <code dir=\"auto\">sst dev</code>.</p>\n<p>It also allows us to access Redis through a Reosurce <code dir=\"auto\">link</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">client</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#C792EA;--1:#8D46B4\"> === </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">localhost</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">})</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">[{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">redisOptions: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">tls: { </span><span style=\"--0:#82AAFF;--1:#3C63B3\">checkServerIdentity</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">()</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">undefined</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">username: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">username</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">          </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyRedis</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">password</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const client = Resource.MyRedis.host === &quot;localhost&quot;  ? new Redis({      host: Resource.MyRedis.host,      port: Resource.MyRedis.port,    })  : new Cluster(      [{        host: Resource.MyRedis.host,        port: Resource.MyRedis.port,      }],      {        redisOptions: {          tls: { checkServerIdentity: () => undefined },          username: Resource.MyRedis.username,          password: Resource.MyRedis.password,        },      },    );\"><div></div></button></div></figure></div>\n<p>The local Redis server is running in <code dir=\"auto\">standalone</code> mode, whereas on deploy it’ll be in\n<code dir=\"auto\">cluster</code> mode. So our Lambda function needs to connect using the right config.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">managed</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">host: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">localhost</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">port: </span><span style=\"--0:#F78C6C;--1:#AA0982\">6379</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;managed&quot; });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, {  dev: {    host: &quot;localhost&quot;,    port: 6379,  },  vpc,});new sst.aws.Function(&quot;MyApp&quot;, {  vpc,  url: true,  link: [redis],  handler: &quot;index.handler&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-redis-local\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-remix-container-with-redis\"><a href=\"#aws-remix-container-with-redis\">AWS Remix container with Redis</a></h2>\n<p>Creates a hit counter app with Remix and Redis.</p>\n<p>This deploys Remix as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:5173</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it by adding the <code dir=\"auto\">Dockerfile</code> that’s included in this example and\nrunning <code dir=\"auto\">npx sst deploy --stage production</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-remix-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-remix-streaming\"><a href=\"#aws-remix-streaming\">AWS Remix streaming</a></h2>\n<p>Follows the <a href=\"https://remix.run/docs/en/main/guides/streaming\">Remix Streaming</a> guide to create\nan app that streams data.</p>\n<p>Uses the <code dir=\"auto\">defer</code> utility to stream data through the <code dir=\"auto\">loader</code> function.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">app/routes/_index.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">defer</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">spongebob,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">friends: friendsPromise,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"return defer({  spongebob,  friends: friendsPromise,});\"><div></div></button></div></figure></div>\n<p>Then uses the the <code dir=\"auto\">Suspense</code> and <code dir=\"auto\">Await</code> components to render the data.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">app/routes/_index.tsx</span></figcaption><pre data-language=\"tsx\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;</span><span style=\"--0:#F78C6C;--1:#AA0982\">Suspense</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">fallback</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Loading...</span><span style=\"--1:#8D46B4\"><span style=\"--0:#7FDBCA\">&lt;/</span><span style=\"--0:#CAECE6\">div</span><span style=\"--0:#7FDBCA\">&gt;</span></span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;</span><span style=\"--0:#F78C6C;--1:#AA0982\">Await</span><span style=\"--0:#7FDBCA;--1:#8D46B4\"> </span><span style=\"--0:#C5E478;--1:#3C63B3\">resolve</span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\">friends</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#DD6B68;--1:#B73936\">{</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#809191;--1:#616671\">/* ... */</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#DD6B68;--1:#B73936\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;/</span><span style=\"--0:#F78C6C;--1:#AA0982\">Await</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#8D46B4\">&lt;/</span><span style=\"--0:#F78C6C;--1:#AA0982\">Suspense</span><span style=\"--0:#7FDBCA;--1:#8D46B4\">&gt;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"<Suspense fallback={<div>Loading...</div>}>  <Await resolve={friends}>    { /* ... */ }  </Await></Suspense>\"><div></div></button></div></figure></div>\n<p>You should see the <em>friends</em> section load after a 3 second delay.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Safari handles streaming differently than other browsers.</p></section></aside>\n<p>Safari uses a <a href=\"https://bugs.webkit.org/show_bug.cgi?id=252413\">different heuristic</a> to\ndetermine when to stream data. You need to render <em>enough</em> initial HTML to trigger streaming.\nThis is typically only a problem for demo apps.</p>\n<p>Streaming works out of the box with the <code dir=\"auto\">Remix</code> component.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Remix</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Remix(&quot;MyWeb&quot;);\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-remix-stream\">full example</a>.</p>\n<hr>\n<h2 id=\"router-and-bucket\"><a href=\"#router-and-bucket\">Router and bucket</a></h2>\n<p>Creates a router that serves static files from the <code dir=\"auto\">public</code> folder of a given bucket.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Create a bucket that CloudFront can access</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">access: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">cloudfront</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Upload the image to the `public` folder</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">s3</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">BucketObjectv2</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyImage</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">key: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">public/spongebob.svg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">contentType: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">image/svg+xml</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">source: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$asset</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">spongebob.svg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">),</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Router</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRouter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">routes: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">      </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">rewrite: { regex: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">^/(.*)$</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/public/$1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">image: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">router</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">/spongebob.svg</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Create a bucket that CloudFront can accessconst bucket = new sst.aws.Bucket(&quot;MyBucket&quot;, {  access: &quot;cloudfront&quot;,});// Upload the image to the `public` foldernew aws.s3.BucketObjectv2(&quot;MyImage&quot;, {  bucket: bucket.name,  key: &quot;public/spongebob.svg&quot;,  contentType: &quot;image/svg+xml&quot;,  source: $asset(&quot;spongebob.svg&quot;),});const router = new sst.aws.Router(&quot;MyRouter&quot;, {  routes: {    &quot;/*&quot;: {      bucket,      rewrite: { regex: &quot;^/(.*)$&quot;, to: &quot;/public/$1&quot; },    },  },});return {  image: $interpolate`${router.url}/spongebob.svg`,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-router-bucket\">full example</a>.</p>\n<hr>\n<h2 id=\"router-and-function-url\"><a href=\"#router-and-function-url\">Router and function URL</a></h2>\n<p>Creates a router that routes all requests to a function with a URL.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">api.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">access: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">public</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Router</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRouter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">router.ion.dev.sst.dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">routes: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/api/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#D6DEEB;--1:#403F53\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">https://</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">domain</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">router: router</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">bucket: bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">domain</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const api = new sst.aws.Function(&quot;MyApi&quot;, {  handler: &quot;api.handler&quot;,  url: true,});const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;, {  access: &quot;public&quot;,});const router = new sst.aws.Router(&quot;MyRouter&quot;, {  domain: &quot;router.ion.dev.sst.dev&quot;,  routes: {    &quot;/api/*&quot;: api.url,    &quot;/*&quot;: $interpolate`https://${bucket.domain}`,  },});return {  router: router.url,  bucket: bucket.domain,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-router\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-cluster-service-discovery\"><a href=\"#aws-cluster-service-discovery\">AWS Cluster Service Discovery</a></h2>\n<p>In this example, we are connecting to a service running on a cluster using its AWS Cloud\nMap service host name. This is useful for service discovery.</p>\n<p>We are deploying a service to a cluster in a VPC. And we can access it within the VPC using\nthe service’s cloud map hostname.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">lambda.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">reponse</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = await </span><span style=\"--0:#82AAFF;--1:#3C63B3\">fetch</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#ECC48D;--1:#3C63B3\">http://</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyService</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">service</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const reponse = await fetch(`http://${Resource.MyService.service}`);\"><div></div></button></div></figure></div>\n<p>Here we are accessing it through a Lambda function that’s linked to the service and is\ndeployed to the same VPC.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">service</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [service],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">lambda.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;ec2&quot; });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });const service = new sst.aws.Service(&quot;MyService&quot;, { cluster });new sst.aws.Function(&quot;MyFunction&quot;, {  vpc,  url: true,  link: [service],  handler: &quot;lambda.handler&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-service-discovery\">full example</a>.</p>\n<hr>\n<h2 id=\"sharp-in-lambda\"><a href=\"#sharp-in-lambda\">Sharp in Lambda</a></h2>\n<p>Uses the <a href=\"https://sharp.pixelplumbing.com/\">Sharp</a> library to resize images. In this example,\nit resizes a <code dir=\"auto\">logo.png</code> local file to 100x100 pixels.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#FFFFFF;--1:#9B504E\">nodejs</span><span style=\"--0:#D6DEEB;--1:#403F53\">: { </span><span style=\"--0:#FFFFFF;--1:#9B504E\">install</span><span style=\"--0:#D6DEEB;--1:#403F53\">: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">sharp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">] }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  nodejs: { install: [&quot;sharp&quot;] }}\"><div></div></button></div></figure></div>\n<p>We don’t need a layer to deploy this because <code dir=\"auto\">sharp</code> comes with a pre-built binary for Lambda.\nThis is handled by <a href=\"/docs/component/aws/function#nodejs-install\"><code dir=\"auto\">nodejs.install</code></a>.</p>\n<aside aria-label=\"Tip\" class=\"starlight-aside starlight-aside--tip\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z\"></path><path d=\"M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z\"></path></svg>Tip</p><section class=\"starlight-aside__content\"><p>You don’t need to use a Lambda layer to use Sharp.</p></section></aside>\n<p>In dev, this uses the sharp npm package locally.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">package.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#7FDBCA;--1:#097174\">\"dependencies\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#7FDBCA;--1:#097174\">\"sharp\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C789D6;--1:#7F5889\">^0.33.5</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  &quot;dependencies&quot;: {    &quot;sharp&quot;: &quot;^0.33.5&quot;  }}\"><div></div></button></div></figure></div>\n<p>On deploy, SST will use the right binary from the sharp package for the target Lambda\narchitecture.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">func</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">nodejs: { install:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sharp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">copyFiles:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">logo.png</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: func</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const func = new sst.aws.Function(&quot;MyFunction&quot;, {  url: true,  handler: &quot;index.handler&quot;,  nodejs: { install: [&quot;sharp&quot;] },  copyFiles: [{ from: &quot;logo.png&quot; }],});return {  url: func.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-sharp\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-solidstart-websocket-endpoint\"><a href=\"#aws-solidstart-websocket-endpoint\">AWS SolidStart WebSocket endpoint</a></h2>\n<p>Deploys a SolidStart app with a <a href=\"https://docs.solidjs.com/solid-start/advanced/websocket\">WebSocket endpoint</a>\nin a container to AWS.</p>\n<p>Uses the experimental WebSocket support in Nitro.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">app.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">default</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">defineConfig</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">server: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">experimental: {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">websocket: </span><span style=\"--0:#ff728a;--1:#8b3e3e\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">})</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">addRouter</span><span style=\"--0:#D6DEEB;--1:#403F53\">({</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ws</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">type: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./src/ws.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">target: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">server</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">base: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/ws</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export default defineConfig({  server: {    experimental: {      websocket: true,    },  },}).addRouter({  name: &quot;ws&quot;,  type: &quot;http&quot;,  handler: &quot;./src/ws.ts&quot;,  target: &quot;server&quot;,  base: &quot;/ws&quot;,});\"><div></div></button></div></figure></div>\n<p>Once deployed you can test the <code dir=\"auto\">/ws</code> endpoint and it’ll send a message back after a 3s delay.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-solid-container-ws\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-static-site-basic-auth\"><a href=\"#aws-static-site-basic-auth\">AWS static site basic auth</a></h2>\n<p>This deploys a simple static site and adds basic auth to it.</p>\n<p>This is useful for dev environments where you want to share a static site with your team but\nensure that it’s not publicly accessible.</p>\n<p>This works by injecting some code into a CloudFront function that checks the basic auth\nheader and matches it against the <code dir=\"auto\">USERNAME</code> and <code dir=\"auto\">PASSWORD</code> secrets.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">injection: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">    </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">if (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">!event.request.headers.authorization</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">|| event.request.headers.authorization.value !== \"Basic </span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">basicAuth</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">       </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">      </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">return {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">statusCode: 401,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">headers: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"www-authenticate\": { value: \"Basic\" }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">        </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">      </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">    </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"{  injection: $interpolate`    if (        !event.request.headers.authorization          || event.request.headers.authorization.value !== &quot;Basic ${basicAuth}&quot;       ) {      return {        statusCode: 401,        headers: {          &quot;www-authenticate&quot;: { value: &quot;Basic&quot; }        }      };    }`,}\"><div></div></button></div></figure></div>\n<p>To deploy this, you need to first set the <code dir=\"auto\">USERNAME</code> and <code dir=\"auto\">PASSWORD</code> secrets.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">secret</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">USERNAME</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">my-username</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">secret</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">set</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">PASSWORD</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">my-password</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sst secret set USERNAME my-usernamesst secret set PASSWORD my-password\"><div></div></button></div></figure></div>\n<p>If you are deploying this to preview environments, you might want to set the secrets using\nthe <a href=\"/docs/reference/cli#secret\"><code dir=\"auto\">--fallback</code></a> flag.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">USERNAME</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">PASSWORD</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">basicAuth</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$resolve</span><span style=\"--0:#D6DEEB;--1:#403F53\">([username</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\">, password</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">value</span><span style=\"--0:#D6DEEB;--1:#403F53\">])</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">apply</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">[</span><span style=\"--0:#D7DBE0;--1:#403F53\">username</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D7DBE0;--1:#403F53\">password</span><span style=\"--0:#C792EA;--1:#8D46B4\">]</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D6DEEB;--1:#403F53\">Buffer</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">username</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">:</span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">password</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">toString</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">base64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">StaticSite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySite</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">site</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#809191;--1:#5E6578\">// Don't password protect prod</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">edge: $app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">!==</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">production</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8D46B4\">?</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">viewerRequest: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">        </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">injection: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">$interpolate</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">if (</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">!event.request.headers.authorization</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">|| event.request.headers.authorization.value !== \"Basic </span><span style=\"--0:#DD6B68;--1:#B73936\">${</span><span style=\"--0:#D6DEEB;--1:#403F53\">basicAuth</span><span style=\"--0:#DD6B68;--1:#B73936\">}</span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">             </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">) {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">            </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">return {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">statusCode: 401,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">headers: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">                </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">\"www-authenticate\": { value: \"Basic\" }</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">              </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">            </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#ECC48D;--1:#3C63B3\">          </span></span><span style=\"--0:#ECC48D;--1:#3C63B3\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">`</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#C792EA;--1:#8D46B4\">:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">undefined</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const username = new sst.Secret(&quot;USERNAME&quot;);const password = new sst.Secret(&quot;PASSWORD&quot;);const basicAuth = $resolve([username.value, password.value]).apply(  ([username, password]) =>    Buffer.from(`${username}:${password}`).toString(&quot;base64&quot;));new sst.aws.StaticSite(&quot;MySite&quot;, {  path: &quot;site&quot;,  // Don't password protect prod  edge: $app.stage !== &quot;production&quot;    ? {      viewerRequest: {        injection: $interpolate`          if (              !event.request.headers.authorization                || event.request.headers.authorization.value !== &quot;Basic ${basicAuth}&quot;             ) {            return {              statusCode: 401,              headers: {                &quot;www-authenticate&quot;: { value: &quot;Basic&quot; }              }            };          }`,      },    }    : undefined,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-static-site-basic-auth\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-static-site\"><a href=\"#aws-static-site\">AWS static site</a></h2>\n<p>Deploy a simple HTML file as a static site with S3 and CloudFront. The website is stored in\nthe <code dir=\"auto\">site/</code> directory.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">StaticSite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySite</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">path: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">site</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.StaticSite(&quot;MySite&quot;, {  path: &quot;site&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-static-site\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-sveltekit-container-with-redis\"><a href=\"#aws-sveltekit-container-with-redis\">AWS SvelteKit container with Redis</a></h2>\n<p>Creates a hit counter app with SvelteKit and Redis.</p>\n<p>This deploys SvelteKit as a Fargate service to ECS and it’s linked to Redis.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>Since our Redis cluster is in a VPC, we’ll need a tunnel to connect to it from our local\nmachine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><mark><span style=\"--0:#82AAFF;--1:#335497\">sudo</span></mark><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>This needs <em>sudo</em> to create a network interface on your machine. You’ll only need to do this\nonce on your machine.</p>\n<p>To start your app locally run.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst dev\"><div></div></button></div></figure></div>\n<p>Now if you go to <code dir=\"auto\">http://localhost:5173</code> you’ll see a counter update as you refresh the page.</p>\n<p>Finally, you can deploy it by adding the <code dir=\"auto\">Dockerfile</code> that’s included in this example and\nrunning <code dir=\"auto\">npx sst deploy --stage production</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">redis</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Redis</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRedis</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Service</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyService</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [redis],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">loadBalancer: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ports: [{ listen: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">80/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, forward: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">3000/http</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> }],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npm run dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true });const redis = new sst.aws.Redis(&quot;MyRedis&quot;, { vpc });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });new sst.aws.Service(&quot;MyService&quot;, {  cluster,  link: [redis],  loadBalancer: {    ports: [{ listen: &quot;80/http&quot;, forward: &quot;3000/http&quot; }],  },  dev: {    command: &quot;npm run dev&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-svelte-redis\">full example</a>.</p>\n<hr>\n<h2 id=\"swift-in-lambda\"><a href=\"#swift-in-lambda\">Swift in Lambda</a></h2>\n<p>Deploys a simple Swift application to Lambda using the <code dir=\"auto\">al2023</code> runtime.</p>\n<aside aria-label=\"Note\" class=\"starlight-aside starlight-aside--note\"><p class=\"starlight-aside__title\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"starlight-aside__icon\"><path d=\"M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z\"></path></svg>Note</p><section class=\"starlight-aside__content\"><p>Building this function requires Docker.</p></section></aside>\n<p>Check out the README in the repo for more details.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">swift</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Swift</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">runtime: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">provided.al2023</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">architecture: </span><span style=\"--0:#D6DEEB;--1:#403F53\">process</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arch</span><span style=\"--0:#C792EA;--1:#8D46B4\"> === </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">arm64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> ? </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">arm64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> : </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">x86_64</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">bundle: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">build</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">app</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">bootstrap</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Router</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">SwiftRouter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">routes: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#D6DEEB;--1:#403F53\">swift</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">swift.dev.sst.dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: router</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const swift = new sst.aws.Function(&quot;Swift&quot;, {  runtime: &quot;provided.al2023&quot;,  architecture: process.arch === &quot;arm64&quot; ? &quot;arm64&quot; : &quot;x86_64&quot;,  bundle: build(&quot;app&quot;),  handler: &quot;bootstrap&quot;,  url: true,});const router = new sst.aws.Router(&quot;SwiftRouter&quot;, {  routes: {    &quot;/*&quot;: swift.url,  },  domain: &quot;swift.dev.sst.dev&quot;,});return {  url: router.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-swift\">full example</a>.</p>\n<hr>\n<h2 id=\"t3-stack-in-aws\"><a href=\"#t3-stack-in-aws\">T3 Stack in AWS</a></h2>\n<p>Deploy <a href=\"https://create.t3.gg\">T3 stack</a> with Drizzle and Postgres to AWS.</p>\n<p>This example was created using <code dir=\"auto\">create-t3-app</code> and the following options: tRPC, Drizzle,\nno auth, Tailwind, Postgres, and the App Router.</p>\n<p>Instead of a local database, we’ll be using an RDS Postgres database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">src/server/db/index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">pool</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">Pool</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">host: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">host</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">port: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">port</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">user: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">username</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">password: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">password</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">database: </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">database</span><span style=\"--0:#C792EA;--1:#773b98\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const pool = new Pool({  host: Resource.MyPostgres.host,  port: Resource.MyPostgres.port,  user: Resource.MyPostgres.username,  password: Resource.MyPostgres.password,  database: Resource.MyPostgres.database,});\"><div></div></button></div></figure></div>\n<p>Similarly, for Drizzle Kit.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">drizzle.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">default</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">schema: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">./src/server/db/schema.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dialect: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">postgresql</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dbCredentials: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">ssl: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">rejectUnauthorized: </span><span style=\"--0:#FF5874;--1:#A54A4A\">false</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">host: Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">host</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">port: Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">port</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">user: Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">username</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">password: Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">password</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">database: Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#FAF39F;--1:#111111\">MyPostgres</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">database</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">tablesFilter: [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">aws-t3_*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">} </span><span style=\"--0:#C792EA;--1:#8D46B4\">satisfies</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#FFCB8B;--1:#111111\">Config</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"export default {  schema: &quot;./src/server/db/schema.ts&quot;,  dialect: &quot;postgresql&quot;,  dbCredentials: {    ssl: {      rejectUnauthorized: false,    },    host: Resource.MyPostgres.host,    port: Resource.MyPostgres.port,    user: Resource.MyPostgres.username,    password: Resource.MyPostgres.password,    database: Resource.MyPostgres.database,  },  tablesFilter: [&quot;aws-t3_*&quot;],} satisfies Config;\"><div></div></button></div></figure></div>\n<p>In our Next.js app we can access our Postgres database because we <a href=\"/docs/linking/\">link them</a>\nboth. We don’t need to use our <code dir=\"auto\">.env</code> files.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">rds</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPostgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">, proxy: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">   </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [rds]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\"> </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\" const rds = new sst.aws.Postgres(&quot;MyPostgres&quot;, { vpc, proxy: true }); new sst.aws.Nextjs(&quot;MyWeb&quot;, {   vpc,   link: [rds] });\"><div></div></button></div></figure></div>\n<p>To run this in dev mode run:</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">dev</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm installnpx sst dev\"><div></div></button></div></figure></div>\n<p>It’ll take a few minutes to deploy the database and the VPC.</p>\n<p>This also starts a tunnel to let your local machine connect to the RDS Postgres database.\nMake sure you have it installed, you only need to do this once for your local machine.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">sudo</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">install</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"sudo npx sst tunnel install\"><div></div></button></div></figure></div>\n<p>Now in a new terminal you can run the database migrations.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npm</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">db:push</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npm run db:push\"><div></div></button></div></figure></div>\n<p>We also have the Drizzle Studio start automatically in dev mode under the <strong>Studio</strong> tab.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">x</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">DevCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [rds],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npx drizzle-kit studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.x.DevCommand(&quot;Studio&quot;, {  link: [rds],  dev: {    command: &quot;npx drizzle-kit studio&quot;,  },});\"><div></div></button></div></figure></div>\n<p>And to make sure our credentials are available, we update our <code dir=\"auto\">package.json</code>\nwith the <a href=\"/docs/reference/cli\"><code dir=\"auto\">sst shell</code></a> CLI.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">package.json</span></figcaption><pre data-language=\"json\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">db:generate</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst shell drizzle-kit generate</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">db:migrate</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst shell drizzle-kit migrate</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">db:push</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst shell drizzle-kit push</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">db:studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst shell drizzle-kit studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"&quot;db:generate&quot;: &quot;sst shell drizzle-kit generate&quot;,&quot;db:migrate&quot;: &quot;sst shell drizzle-kit migrate&quot;,&quot;db:push&quot;: &quot;sst shell drizzle-kit push&quot;,&quot;db:studio&quot;: &quot;sst shell drizzle-kit studio&quot;,\"><div></div></button></div></figure></div>\n<p>So running <code dir=\"auto\">npm run db:push</code> will run Drizzle Kit with the right credentials.</p>\n<p>To deploy this to production run:</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">deploy</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">production</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst deploy --stage production\"><div></div></button></div></figure></div>\n<p>Then run the migrations.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">shell</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">production</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">drizzle-kit</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">push</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst shell --stage production npx drizzle-kit push\"><div></div></button></div></figure></div>\n<p>If you are running this locally, you’ll need to have a tunnel running.</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal not-content\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">npx</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">sst</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">tunnel</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#82AAFF;--1:#3C63B3\">--stage</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#ECC48D;--1:#3C63B3\">production</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"npx sst tunnel --stage production\"><div></div></button></div></figure></div>\n<p>If you are doing this in a CI/CD pipeline, you’d want your build containers to be in the\nsame VPC.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { bastion: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">, nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">rds</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Postgres</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyPostgres</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\">, proxy: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Nextjs</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyWeb</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [rds]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">x</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">DevCommand</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [rds],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">npx drizzle-kit studio</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { bastion: true, nat: &quot;ec2&quot; });const rds = new sst.aws.Postgres(&quot;MyPostgres&quot;, { vpc, proxy: true });new sst.aws.Nextjs(&quot;MyWeb&quot;, {  vpc,  link: [rds]});new sst.x.DevCommand(&quot;Studio&quot;, {  link: [rds],  dev: {    command: &quot;npx drizzle-kit studio&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-t3\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-task-cron\"><a href=\"#aws-task-cron\">AWS Task Cron</a></h2>\n<p>Use the <a href=\"/docs/component/aws/task\"><code dir=\"auto\">Task</code></a> and <a href=\"/docs/component/aws/cron\"><code dir=\"auto\">Cron</code></a> components\nfor long running background tasks.</p>\n<p>We have a node script that we want to run in <code dir=\"auto\">index.mjs</code>. It’ll be deployed as a\nDocker container using <code dir=\"auto\">Dockerfile</code>.</p>\n<p>It’ll be invoked by a cron job that runs every 2 minutes.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cron</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCron</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">task,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">schedule: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">rate(2 minutes)</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.Cron(&quot;MyCron&quot;, {  task,  schedule: &quot;rate(2 minutes)&quot;});\"><div></div></button></div></figure></div>\n<p>When this is run in <code dir=\"auto\">sst dev</code>, the task is executed locally using <code dir=\"auto\">dev.command</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"dev: {  command: &quot;node index.mjs&quot;}\"><div></div></button></div></figure></div>\n<p>To deploy, you need the Docker daemon running.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">task</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Task</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyTask</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [bucket]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cron</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCron</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">task,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">schedule: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">rate(2 minutes)</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;);const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });const task = new sst.aws.Task(&quot;MyTask&quot;, {  cluster,  link: [bucket],  dev: {    command: &quot;node index.mjs&quot;,  },});new sst.aws.Cron(&quot;MyCron&quot;, {  task,  schedule: &quot;rate(2 minutes)&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-task-cron\">full example</a>.</p>\n<hr>\n<h2 id=\"aws-task\"><a href=\"#aws-task\">AWS Task</a></h2>\n<p>Use the <a href=\"/docs/component/aws/task\"><code dir=\"auto\">Task</code></a> component to run background tasks.</p>\n<p>We have a node script that we want to run in <code dir=\"auto\">image/index.mjs</code>. It’ll be deployed as a\nDocker container using <code dir=\"auto\">image/Dockerfile</code>.</p>\n<p>We also have a function that the task is linked to. It uses the <a href=\"/docs/reference/sdk/\">SDK</a>\nto start the task.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">index.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { Resource } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">import</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { task } </span><span style=\"--0:#C792EA;--1:#8D46B4\">from</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst/aws/task</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">export const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">handler</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = async </span><span style=\"--0:#D9F5DD;--1:#111111\">()</span><span style=\"--0:#C792EA;--1:#8D46B4\"> =&gt; {</span></div></div><div class=\"ec-line highlight mark\"><div class=\"code\"><span style=\"--1:#773b98\"><span class=\"indent\"><span style=\"--0:#C792EA\">  </span></span><span style=\"--0:#C792EA\">const </span></span><span style=\"--0:#82AAFF;--1:#335497\">ret</span><span style=\"--0:#C792EA;--1:#773b98\"> = await </span><span style=\"--0:#D6DEEB;--1:#403F53\">task</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#82AAFF;--1:#335497\">run</span><span style=\"--0:#D6DEEB;--1:#403F53\">(Resource</span><span style=\"--0:#C792EA;--1:#773b98\">.</span><span style=\"--0:#7FDBCA;--1:#086164\">MyTask</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#773b98\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">return {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">statusCode: </span><span style=\"--0:#F78C6C;--1:#AA0982\">200</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">body: </span><span style=\"--0:#82AAFF;--1:#3C63B3\">JSON</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">stringify</span><span style=\"--0:#D6DEEB;--1:#403F53\">(ret</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#FF5874;--1:#A54A4A\">null</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#F78C6C;--1:#AA0982\">2</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"import { Resource } from &quot;sst&quot;;import { task } from &quot;sst/aws/task&quot;;export const handler = async () => {  const ret = await task.run(Resource.MyTask);  return {    statusCode: 200,    body: JSON.stringify(ret, null, 2),  };};\"><div></div></button></div></figure></div>\n<p>When this is run in <code dir=\"auto\">sst dev</code>, the task is executed locally using <code dir=\"auto\">dev.command</code>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">}</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"dev: {  command: &quot;node index.mjs&quot;}\"><div></div></button></div></figure></div>\n<p>To deploy, you need the Docker daemon running.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vpc</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVpc</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { nat: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ec2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cluster</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyCluster</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, { </span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">task</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Task</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyTask</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#D6DEEB;--1:#403F53\">cluster</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [bucket]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">image: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">context: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">image</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dev: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">node index.mjs</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">vpc,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">link: [task],</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);const vpc = new sst.aws.Vpc(&quot;MyVpc&quot;, { nat: &quot;ec2&quot; });const cluster = new sst.aws.Cluster(&quot;MyCluster&quot;, { vpc });const task = new sst.aws.Task(&quot;MyTask&quot;, {  cluster,  link: [bucket],  image: {    context: &quot;image&quot;,  },  dev: {    command: &quot;node index.mjs&quot;,  },});new sst.aws.Function(&quot;MyApp&quot;, {  vpc,  url: true,  link: [task],  handler: &quot;index.handler&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-task\">full example</a>.</p>\n<hr>\n<h2 id=\"subscribe-to-topics\"><a href=\"#subscribe-to-topics\">Subscribe to topics</a></h2>\n<p>Create an SNS topic, publish to it from a function, and subscribe to it with a function and a queue.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Queue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyQueue</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">topic</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">SnsTopic</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyTopic</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">topic</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribe</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">subscriber.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {});</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">topic</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">subscribeQueue</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MySubscriber2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, queue</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">arn</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">publisher.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [topic]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">topic: topic</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">name</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const queue = new sst.aws.Queue(&quot;MyQueue&quot;);queue.subscribe(&quot;subscriber.handler&quot;);const topic = new sst.aws.SnsTopic(&quot;MyTopic&quot;);topic.subscribe(&quot;MySubscriber1&quot;, &quot;subscriber.handler&quot;, {});topic.subscribeQueue(&quot;MySubscriber2&quot;, queue.arn);const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;publisher.handler&quot;,  link: [topic],  url: true,});return {  app: app.url,  topic: topic.name,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-topic\">full example</a>.</p>\n<hr>\n<h2 id=\"vector-search\"><a href=\"#vector-search\">Vector search</a></h2>\n<p>Store and search for vector data using the Vector component. Includes a seeder API that\nuses an LLM to generate embeddings for some movies and optionally their posters.</p>\n<p>Once seeded, you can call the search API to query the vector database.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">OpenAiApiKey</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">OpenAiApiKey</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">vector</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Vector</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyVectorDB</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dimension: </span><span style=\"--0:#F78C6C;--1:#AA0982\">1536</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">seeder</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Seeder</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.seeder</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [OpenAiApiKey, vector]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">copyFiles:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">iron-man.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">iron-man.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">black-widow.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">black-widow.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">spider-man.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">spider-man.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{ from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">thor.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">thor.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\"> },</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">{</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">from: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">captain-america.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">      </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">to: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">captain-america.jpg</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">app</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApp</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.app</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [OpenAiApiKey, vector]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> { seeder: seeder</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">, app: app</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\"> };</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const OpenAiApiKey = new sst.Secret(&quot;OpenAiApiKey&quot;);const vector = new sst.aws.Vector(&quot;MyVectorDB&quot;, {  dimension: 1536,});const seeder = new sst.aws.Function(&quot;Seeder&quot;, {  handler: &quot;index.seeder&quot;,  link: [OpenAiApiKey, vector],  copyFiles: [    { from: &quot;iron-man.jpg&quot;, to: &quot;iron-man.jpg&quot; },    {      from: &quot;black-widow.jpg&quot;,      to: &quot;black-widow.jpg&quot;,    },    {      from: &quot;spider-man.jpg&quot;,      to: &quot;spider-man.jpg&quot;,    },    { from: &quot;thor.jpg&quot;, to: &quot;thor.jpg&quot; },    {      from: &quot;captain-america.jpg&quot;,      to: &quot;captain-america.jpg&quot;,    },  ],  url: true,});const app = new sst.aws.Function(&quot;MyApp&quot;, {  handler: &quot;index.app&quot;,  link: [OpenAiApiKey, vector],  url: true,});return { seeder: seeder.url, app: app.url };\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-vector\">full example</a>.</p>\n<hr>\n<h2 id=\"react-spa-with-vite\"><a href=\"#react-spa-with-vite\">React SPA with Vite</a></h2>\n<p>Deploy a React single-page app (SPA) with Vite to S3 and CloudFront.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">StaticSite</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Web</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">build: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">command: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">pnpm run build</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">output: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">dist</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"new sst.aws.StaticSite(&quot;Web&quot;, {  build: {    command: &quot;pnpm run build&quot;,    output: &quot;dist&quot;,  },});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/aws-vite\">full example</a>.</p>\n<hr>\n<h2 id=\"cloudflare-cron\"><a href=\"#cloudflare-cron\">Cloudflare Cron</a></h2>\n<p>This example creates a Cloudflare Worker that runs on a schedule.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">cron</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">cloudflare</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Cron</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Cron</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">job: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">schedules:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">* * * * *</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">]</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const cron = new sst.cloudflare.Cron(&quot;Cron&quot;, {  job: &quot;index.ts&quot;,  schedules: [&quot;* * * * *&quot;]});return {};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/cloudflare-cron\">full example</a>.</p>\n<hr>\n<h2 id=\"cloudflare-kv\"><a href=\"#cloudflare-kv\">Cloudflare KV</a></h2>\n<p>This example creates a Cloudflare KV namespace and links it to a worker. Now you can use the\nSDK to interact with the KV namespace in your worker.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">storage</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">cloudflare</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Kv</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyStorage</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">worker</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">cloudflare</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Worker</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Worker</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [storage]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: worker</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const storage = new sst.cloudflare.Kv(&quot;MyStorage&quot;);const worker = new sst.cloudflare.Worker(&quot;Worker&quot;, {  url: true,  link: [storage],  handler: &quot;index.ts&quot;,});return {  url: worker.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/cloudflare-kv\">full example</a>.</p>\n<hr>\n<h2 id=\"link-multiple-secrets\"><a href=\"#link-multiple-secrets\">Link multiple secrets</a></h2>\n<p>You might have multiple secrets that need to be used across your app. It can be tedious to\ncreate a new secret and link it to each function or resource.</p>\n<p>A common pattern to addresses this is to create an object with all your secrets and then\nlink them all at once. Now when you have a new secret, you can add it to the object and\nit will be automatically available to all your resources.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#809191;--1:#5E6578\">// Manage all secrets together</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">secrets</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">secret1: </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Secret1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">some-secret-value-1</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">secret2: </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Secret</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">Secret2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">some-secret-value-2</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">allSecrets</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#D6DEEB;--1:#403F53\">Object</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">values</span><span style=\"--0:#D6DEEB;--1:#403F53\">(secrets);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">bucket</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Bucket</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyBucket</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">api</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyApi</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">link:</span><span style=\"--0:#D6DEEB;--1:#403F53\"> [bucket, </span><span style=\"--0:#7FDBCA;--1:#097174\">...</span><span style=\"--0:#D6DEEB;--1:#403F53\">allSecrets]</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.handler</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">url: </span><span style=\"--0:#FF5874;--1:#A54A4A\">true</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">url: api</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"// Manage all secrets togetherconst secrets = {  secret1: new sst.Secret(&quot;Secret1&quot;, &quot;some-secret-value-1&quot;),  secret2: new sst.Secret(&quot;Secret2&quot;, &quot;some-secret-value-2&quot;),};const allSecrets = Object.values(secrets);const bucket = new sst.aws.Bucket(&quot;MyBucket&quot;);const api = new sst.aws.Function(&quot;MyApi&quot;, {  link: [bucket, ...allSecrets],  handler: &quot;index.handler&quot;,  url: true,});return {  url: api.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/secret-link-all\">full example</a>.</p>\n<hr>\n<h2 id=\"default-function-props\"><a href=\"#default-function-props\">Default function props</a></h2>\n<p>Set default props for all the functions in your app using the global <a href=\"/docs/reference/global/#transform\"><code dir=\"auto\">$transform</code></a>.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#82AAFF;--1:#3C63B3\">$transform</span><span style=\"--0:#D6DEEB;--1:#403F53\">(sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">, </span><span style=\"--0:#D9F5DD;--1:#111111\">(</span><span style=\"--0:#D7DBE0;--1:#403F53\">args</span><span style=\"--0:#D9F5DD;--1:#111111\">)</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=&gt;</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">runtime</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">nodejs14.x</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">;</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">args</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">environment</span><span style=\"--0:#D6DEEB;--1:#403F53\"> </span><span style=\"--0:#C792EA;--1:#8D46B4\">=</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">    </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">FOO: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">BAR</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#D6DEEB;--1:#403F53\"> sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Function</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyFunction</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">handler: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">index.ts</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">});</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"$transform(sst.aws.Function, (args) => {  args.runtime = &quot;nodejs14.x&quot;;  args.environment = {    FOO: &quot;BAR&quot;,  };});new sst.aws.Function(&quot;MyFunction&quot;, {  handler: &quot;index.ts&quot;,});\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/sst-$transform\">full example</a>.</p>\n<hr>\n<h2 id=\"vercel-domains\"><a href=\"#vercel-domains\">Vercel domains</a></h2>\n<p>Creates a router that uses domains purchased through and hosted in your Vercel account.\nEnsure the <code dir=\"auto\">VERCEL_API_TOKEN</code> and <code dir=\"auto\">VERCEL_TEAM_ID</code> environment variables are set.</p>\n<div class=\"expressive-code\"><figure class=\"frame has-title not-content\"><figcaption class=\"header\"><span class=\"title\">sst.config.ts</span></figcaption><pre data-language=\"ts\"><code><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">const </span><span style=\"--0:#82AAFF;--1:#3C63B3\">router</span><span style=\"--0:#C792EA;--1:#8D46B4\"> = </span><span style=\"--0:#7FDBCA;--1:#097174\">new</span><span style=\"--0:#C792EA;--1:#8D46B4\"> </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">aws</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">Router</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">MyRouter</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">, {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">domain: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">name: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">ion.sst.moe</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">    </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">dns: </span><span style=\"--0:#D6DEEB;--1:#403F53\">sst</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#FAF39F;--1:#111111\">vercel</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#82AAFF;--1:#3C63B3\">dns</span><span style=\"--0:#D6DEEB;--1:#403F53\">(</span><span style=\"--0:#C792EA;--1:#8D46B4\">{ domain: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">sst.moe</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\"> }</span><span style=\"--0:#D6DEEB;--1:#403F53\">)</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">routes: {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">/*</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">: </span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#ECC48D;--1:#9B504E\">https://sst.dev</span><span style=\"--0:#D9F5DD;--1:#111111\">\"</span><span style=\"--0:#C792EA;--1:#8D46B4\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#C792EA;--1:#8D46B4\">  </span></span><span style=\"--0:#C792EA;--1:#8D46B4\">},</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">}</span><span style=\"--0:#D6DEEB;--1:#403F53\">);</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#C792EA;--1:#8D46B4\">return</span><span style=\"--0:#D6DEEB;--1:#403F53\"> {</span></div></div><div class=\"ec-line\"><div class=\"code\"><span class=\"indent\"><span style=\"--0:#D6DEEB;--1:#403F53\">  </span></span><span style=\"--0:#D6DEEB;--1:#403F53\">router: router</span><span style=\"--0:#C792EA;--1:#8D46B4\">.</span><span style=\"--0:#7FDBCA;--1:#097174\">url</span><span style=\"--0:#D6DEEB;--1:#403F53\">,</span></div></div><div class=\"ec-line\"><div class=\"code\"><span style=\"--0:#D6DEEB;--1:#403F53\">};</span></div></div></code></pre><div class=\"copy\"><button title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"const router = new sst.aws.Router(&quot;MyRouter&quot;, {  domain: {    name: &quot;ion.sst.moe&quot;,    dns: sst.vercel.dns({ domain: &quot;sst.moe&quot; }),  },  routes: {    &quot;/*&quot;: &quot;https://sst.dev&quot;,  },});return {  router: router.url,};\"><div></div></button></div></figure></div>\n<p>View the <a href=\"https://github.com/sst/sst/tree/dev/examples/vercel-domain\">full example</a>.</p> </div> <footer class=\"doc astro-sz7xmlte\"><div class=\"meta sl-flex astro-sz7xmlte\"><div class=\"astro-sz7xmlte\"><a href=\"https://github.com/sst/sst/edit/dev/examples\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z\"></path></svg> \nEdit this page\n</a><a href=\"https://x.com/SST_dev\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M 18.242188 2.25 L 21.554688 2.25 L 14.324219 10.507812 L 22.828125 21.75 L 16.171875 21.75 L 10.953125 14.933594 L 4.992188 21.75 L 1.679688 21.75 L 9.40625 12.914062 L 1.257812 2.25 L 8.082031 2.25 L 12.792969 8.480469 Z M 17.082031 19.773438 L 18.914062 19.773438 L 7.082031 4.125 L 5.113281 4.125 Z M 17.082031 19.773438 \"></path></svg> \nFollow us on X.com\n</a><a href=\"https://github.com/sst/sst/issues/new\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z\"></path></svg> \nFind a bug? Open an issue\n</a><a href=\"https://sst.dev/discord\" target=\"_blank\" class=\"sl-flex astro-sz7xmlte\"><svg aria-hidden=\"true\" class=\"astro-sz7xmlte astro-uhqvxnpk\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style=\"--sl-icon-size: 1em;\"><path d=\"M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z\"></path></svg> \nJoin our Discord community\n</a></div><div class=\"astro-sz7xmlte\"><p class=\"astro-sz7xmlte\">\nBuilt with <a target=\"_blank\" href=\"https://github.com/sst/sst/tree/dev/www/sst.config.ts\" class=\"astro-sz7xmlte\">Astro &amp; SST</a></p><p class=\"astro-sz7xmlte\">\nLast updated — <time datetime=\"2025-03-17T23:52:25.000Z\" class=\"astro-sz7xmlte\">Mar 17, 2025</time></p><p class=\"astro-sz7xmlte\">\n© 2025&nbsp;<a target=\"_blank\" href=\"https://anoma.ly\" class=\"astro-sz7xmlte\">Anomaly Innovations</a></p></div></div></footer> </div> </div>   </main> </div> </div>  </div> </div>  <div id=\"kapa-widget-container\"></div>"
  }
]